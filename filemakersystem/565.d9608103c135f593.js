"use strict";(self.webpackChunkfilemakersystem=self.webpackChunkfilemakersystem||[]).push([[565],{6565:(S,d,s)=>{s.r(d),s.d(d,{AuthModule:()=>b});var g=s(4666),l=s(5465),n=s(2508),m=s(2607),c=s(8347),t=s(2560),u=s(6518),p=s(4817),f=s(4497),v=s(3927);function y(e,h){1&e&&(t.TgZ(0,"small",25),t._uU(1," Please enter email. "),t.qZA())}function C(e,h){1&e&&(t.TgZ(0,"small",25),t._uU(1," Please enter valid email address. "),t.qZA())}function A(e,h){1&e&&(t.TgZ(0,"small",25),t._uU(1," Please enter password. "),t.qZA())}const Z=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(r,o,i,a,F,M,I){this.fb=r,this.authservice=o,this.router=i,this.toastr=a,this._titleservice=F,this._Activatedroute=M,this.crud=I,this.name="jitendra yadav",this.permissions={},this.textType="password",this.type=this._Activatedroute.queryParams,this.addToCart=!1,this.dashBoardPermission={},this._titleservice.setTitle("Login | Viezu"),this.loginForm=this.fb.group({email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required]],remember:["",[]]})}ngOnInit(){this.addToCart=this.type._value.shop,localStorage.getItem("email")&&this.loginForm.patchValue({email:localStorage.getItem("email"),password:(0,m.Z)(localStorage.getItem("password")),remember:"true"})}ngAfterViewInit(){this.loginForm.markAsUntouched()}loginFormSubmit(){if(this.loginForm.valid){let r={email:this.loginForm.value.email,password:(0,m.y)(this.loginForm.value.password)};this.loginForm.value.remember?(localStorage.setItem("email",this.loginForm.value.email),localStorage.setItem("password",(0,m.y)(this.loginForm.value.password))):(localStorage.removeItem("email"),localStorage.removeItem("password")),this.authservice.login(r).subscribe(o=>{console.log(o,"login response"),0==o.data.on_stop?(localStorage.setItem("userdetails",JSON.stringify(o.data)),localStorage.setItem("token",o.data.token),this.toastr.success(o.message,"",{timeOut:2e3}),5==o.data.user_type||2==o.data.user_type?(o.data.roles.permissions.map(i=>{this.permissions[i.permission]="AIREMAP_ADMIN"==o.data.role?"Full access":i.access}),localStorage.setItem("permissions",JSON.stringify(this.permissions)),this.crud.getRequest(`${c.t.adminDashboardPermissionManage}?role_name=${o.data.roles.name}`).then(i=>{i&&(i.data[0].dashboard_json.forEach(a=>{this.dashBoardPermission[a.short_code]=a.is_show}),localStorage.setItem("dashBoardPermissions",JSON.stringify(this.dashBoardPermission)),this.router.navigate(["/admin"]))})):(3==o.data.user_type||4==o.data.user_type||6==o.data.user_type||7==o.data.user_type)&&(this.addToCart?this.router.navigateByUrl("/credit/shop"):this.router.navigate(["/dashboard"]))):this.toastr.error("Your account has been stopped by administrator, please contact support.")},o=>{this.toastr.error(o.error.detail,"",{timeOut:5e3})})}else this.markAllControlsAsTouched(this.loginForm)}markAllControlsAsTouched(r){Object.values(r.controls).forEach(o=>{o.markAsTouched(),o instanceof n.cw&&this.markAllControlsAsTouched(o)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(n.qu),t.Y36(u.e),t.Y36(l.F0),t.Y36(p._W),t.Y36(f.Dx),t.Y36(l.gz),t.Y36(v.I))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:39,vars:8,consts:[[1,"container-fluid"],[1,"row","inner-box"],[1,"col-sm-5","p-0","mob-left"],["src","assets/images/Login.webp","alt","login",1,"bnrimg"],[1,"col-sm-7","mob-right"],[1,"login-box"],[1,"login-box-inner"],[3,"formGroup","ngSubmit"],[1,"margins"],["for","email",1,"form-label"],["type","email","formControlName","email","placeholder","Enter email",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"margins","iconSwitch"],["for","pwd",1,"form-label"],["formControlName","password","placeholder","Enter password",1,"form-control",3,"type"],[1,"eyeIcon",3,"src","click"],[1,"remember-me"],[1,""],["type","checkbox","formControlName","remember",1,"form-check-input"],[1,"align-right"],["routerLink","/auth/forgot-password"],[1,"d-grid",2,"cursor","pointer"],["type","submit",1,"btn","btn-primary","btn-block","lbtn"],[1,"text-center","reg"],["routerLink","/auth/register"],[1,"text-danger"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),t._uU(8,"Login"),t.qZA(),t.TgZ(9,"p"),t._uU(10,"Welcome"),t.qZA(),t.TgZ(11,"form",7),t.NdJ("ngSubmit",function(){return i.loginFormSubmit()}),t.TgZ(12,"div",8)(13,"label",9),t._uU(14,"Email:"),t.qZA(),t._UZ(15,"input",10),t.YNc(16,y,2,0,"small",11),t.YNc(17,C,2,0,"small",11),t.qZA(),t.TgZ(18,"div",12)(19,"label",13),t._uU(20,"Password:"),t.qZA(),t._UZ(21,"input",14),t.TgZ(22,"img",15),t.NdJ("click",function(){return i.textType="password"==i.textType?"text":"password"}),t.qZA(),t.YNc(23,A,2,0,"small",11),t.qZA(),t.TgZ(24,"div",16)(25,"div",17),t._UZ(26,"input",18),t._uU(27," Remember me "),t.qZA(),t.TgZ(28,"div",19)(29,"a",20),t._uU(30,"Forgot Password ?"),t.qZA()()(),t.TgZ(31,"div",21)(32,"button",22),t._uU(33,"Login"),t.qZA()(),t.TgZ(34,"div",23)(35,"span"),t._uU(36,"Don't have an account? "),t.qZA(),t.TgZ(37,"a",24),t._uU(38,"Register"),t.qZA()()()()()()()()),2&o&&(t.xp6(11),t.Q6J("formGroup",i.loginForm),t.xp6(5),t.Q6J("ngIf",i.loginForm.controls.email.touched&&i.loginForm.controls.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",i.loginForm.controls.email.hasError("email")),t.xp6(4),t.ekj("is-invalid",i.loginForm.controls.password.dirty&&i.loginForm.controls.password.hasError("required")),t.Q6J("type",i.textType),t.xp6(1),t.Q6J("src","password"==i.textType?"assets/images/eye.svg":"assets/images/eye-off.svg",t.LSH),t.xp6(1),t.Q6J("ngIf",i.loginForm.controls.password.touched&&i.loginForm.controls.password.hasError("required")))},dependencies:[g.O5,l.rH,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.sg,n.u],styles:[".remember-me[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){font-size:var(--font-size-14);line-height:var(--font-size-16);color:#3f424b;display:flex;align-items:center}.remember-me[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1)   input[_ngcontent-%COMP%]{border-radius:50%;margin-right:var(--font-size-12)}.remember-me[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) a{font-size:var(--font-size-14);line-height:var(--font-size-16);color:#00c0f2}.align-right[_ngcontent-%COMP%]{text-align:right}.align-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00c0f2;text-decoration:none}.iconSwitch[_ngcontent-%COMP%]{position:relative}.iconSwitch[_ngcontent-%COMP%]   .eyeIcon[_ngcontent-%COMP%]{position:absolute;top:var(--font-size-54);right:var(--font-size-20);cursor:pointer;color:#000!important;width:var(--font-size-20)}.remember-me[_ngcontent-%COMP%]{margin-bottom:var(--font-size-30)}@media screen and (max-width: 991px){.iconSwitch[_ngcontent-%COMP%]   .eyeIcon[_ngcontent-%COMP%]{position:absolute;top:47px;right:20px}}"]})}return e})()},{path:"register",loadChildren:()=>Promise.all([s.e(136),s.e(800),s.e(826)]).then(s.bind(s,9826)).then(e=>e.RegisterModule)},{path:"forgot-password",loadChildren:()=>s.e(967).then(s.bind(s,5967)).then(e=>e.ForgetPasswordModule)},{path:"reset-password/:email",loadChildren:()=>s.e(91).then(s.bind(s,6091)).then(e=>e.ResetPasswordModule)},{path:"otp/:email",loadChildren:()=>s.e(407).then(s.bind(s,6407)).then(e=>e.OtpModule)}];let T=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(Z),l.Bz]})}return e})();var P=s(3054);let b=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[g.ez,T,n.UX,n.u5,P.A0]})}return e})()}}]);
//# sourceMappingURL=565.d9608103c135f593.js.map