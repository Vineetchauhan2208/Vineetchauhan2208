{"version":3,"file":"868.274ae1df3a9b1dc4.js","mappings":"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","names":["CustomerService","constructor","_http","this","environment","getCustomers","params","get","baseUrl","getCustomerByUuid","id","createFileServiceRequest","data","post","getFileFormData","static","_angular_core__WEBPACK_IMPORTED_MODULE_1__","factory","EditTicketComponent","selectors","i0","ctx_r47","ctx_r54","ctx_r66","ctx_r67","TicketListComponent","fb","_titleservice","ar","_ticketservice","toastr","_roleservice","crud","_permissions","pageService","noti","firstDay","startDate","dayjs","startOf","endDate","endOf","format","applyLabel","cancelLabel","fromLabel","toLabel","displayFormat","date","text","add","queryParams","Subject","m","invalidDates","some","d","isSame","month","tooltip","tooltips","find","tt","retrieveTickets","getFilterList","setTitle","filterTicketForm","group","status","Validators","category","created_at","ticketstatusForm","ticket_status","frTicketstatusForm","ticketAssignForm","role_id","user_id","permissions","getPermissions","ngOnInit","getCountByCategory","usersdetail","JSON","parse","localStorage","getItem","searchSubject","pipe","debounceTime","distinctUntilChanged","subscribe","results","page","searchTicketResult","checkPage","getPageDetail","ticketIdsArr","split","type","_value","chartType","showDownload","getRequest","year","start_date","then","res","modifyTicketDetails","handleLiveTicketUpdates","onTicketUpdats","tickets","length","ticketToBeUpdated","el","ids","ticket_id","conversation_count","ticket_conversation","updated_at","ticket_modified_time","team_status","display_user_status","assigned_to","first_name","ticket_assigned","last_name","console","log","roles","userFilterList","sort","enabledFilter","enableFilter","datesUpdatedRange","$event","$y","$M","$D","toDate","datesUpdatedSingle","datesUpdatedInline","savePageDetail","window","location","href","getSavedTicketFilter","requestUrl","controls","setValue","custom_filter","getErrorList","errorList","downloadCsv","fileName","csvContent","constructCsvContent","blob","Blob","a","document","createElement","URL","createObjectURL","download","body","appendChild","click","removeChild","forEach","row","created_by","truncateText","subject","request_id","file_request","credit_spent","credit","credit_type","formatDate","getTicketCategory","ticketCategories","getUserByRole","event","getRoles","roleUserList","err","ticketAssignFormSubmit","ticketAssignTo","ticketstatusid","value","success","message","timeOut","getElementById","error","detail","saveTicketDetail","ticket","setItem","stringify","getTicketDetail","patchValue","assigned_to_name","assigned_to_email","email","ticketstatus","ticketStatus","ticketstatusFormSubmit","updateTicketStatus","frTicketstatusFormSubmit","updateFRTicketStatus","frId","getRequestParams","searchTitle","pageSize","filter","search","page_size","end_date","searchTickets","e","searchKey","field","order","sortField","sortOrder","order_in","getTicketFilterByTicketStatus","getTicket","element","allVehicleDetail","vehicle_details","showError","totalTicket","count","getStatusCount","count_by_category","index","push","unshift","getTicketsOnFilter","handlePageChange","onKeyUp","x","title","filterTicketFormSubmit","getTicketByFilter","getTicketOnFilter","restFilter","filterByStatus","ticketIds","toString","sortedParam","getFileList","downloadFileList","downloadFIle","file","i","cusRequestUrl","downloaded_times","counter","open","url","onChangeTicketStatus","tkid","includes","indexOf","splice","ngOnDestroy","removeItem","maxLength","trim","substring","array","key","b","nameA","toUpperCase","nameB","deleteSavedFilter","deleteRequest","selectedFilter","getVehicleDetail","model","isStandaloneTicket","vehDetail","replace","other_fields","replaceAll","core","NgxDaterangepickerBootstrapDirective","ctx","TicketComponent","ctx_r79","message_type","ViewTicketComponent","_converservice","sanitizer","route","router","uploadService","_templateservice","notification","renderer","xorEncryption","FormData","FormControl","COMMA","personalize","name","getState","state","ticketDetail","attachmentForm","attachement_type","attachement_name","templateForm","disabled","template_type","personalizeList","categoryList","ticketId","snapshot","paramMap","conversationForm","sender","recipient","industryCtrl","valueChanges","industryList","listen","activeUserPopup","nativeElement","contains","target","popupContainer","isActiveUsersVisible","updateDownloadHistory","historyTab","tab","getChatHistory","onMessageAdmin","retrieveConversation","initSocket","onConversation","bypassSecurityTrustHtml","changingThisBreaksApplicationSecurity","conversations","setTimeout","scrollBottom","activeUsers","active_users","uuid","userDetail","activeUserList","activeUsersCount","getArticleDetailBlock","answerDetailBlock","answer","articleAnswerViewBlock","onScroll","onChatScroll","chatPageSize","getKnowledgeBaseDetail","pageSideBar","getKnowledgeBaseDetailSidebar","handleNotePageChange","notePage","getNotes","articleList","totalArticle","searchKeySideBar","articleListSideBar","totalArticleSideBar","addKeys","input","selectedIndustry","removeKeys","gen","tagList","selectedKeys","option","industryInput","customerId","statusCount","reverse","isDirectoryLoading","finally","conversationFormSubmit","sendMessage","ckeEditor","copyShare","answerDetail","slug","articleAnswerView","readArticle","ques","slice","serializeUrl","createUrlTree","isConversationLoading","chatPage","conversationsCount","catch","getAttachments","isLoading","attachments","onFileChange","newFileList","Array","from","files","fileList","size","formData","append","sendAttachment","saveAttachments","fileInput","updateStatusOnAttachment","selectFile","selectedFiles","item","uploadFile","cb","fileType","decodeFileNameFromUrl","decodeURIComponent","scroll","scrollTop","scrollHeight","scrollToTop","closeSocket","applyTag","postRequest","tags","expandMsgWindow","isexpandedMsgWindow","isHistoryLoading","chatHistory","getArticleDetail","notePageSize","noteDetails","totalNote","createTicketNote","note","notes","retrieveTemplate","getTemplate","templates","totalTemplate","handleTemplatePageChange","temCanpage","setTemplateInSendMsgBox","template","previewTemplateForm","currentTemplate","setDeleteData","deleteAttachmentData","deleteAttachment","ctx_r63","ctx_r81","ctx_r82","other_tuning_tool_used","AdminRequestFileComponent","customer","formBuilder","require","alpha2","countryDetails","vehicleInformation","customer_first_name","customer_last_name","vehicle_type","other_vehicle_type","vehicle_make","other_vehicle_make","other_model","vehicle_registration","vehicle_year","vehicle_VIN","file_type","tuning_tool_used","engineInformation","engine_size","engine_size_deci","transmission","other_transmission","fuel_type","other_fuel_type","mileage_type","mileage","ecuInformation","ecu_brand","other_ecu_brand","ecu_version","other_ecu_version","control_unit","other_control_unit","additionalInformation","country","additional_function","other_additional_function","tuning_required","additional_info","ticketCreateForm","description","reqId","countryData","obj","moveCountryOnTop","Date","getFullYear","yearCount","users","submitRequest","getTypeCount","downloadFile","tuning_file","vehicleDetails","sortEle","indexOfECU","autotuningListSet","autoEcuBrandVersionSet","moveOtherInLast","tuningToolUsedList","role","individual","business","other_field","ele","vehicleTypes","getVehicleBrands","showOtherVehicleType","vehicleBrandList","brand_name","showOtherVehicleMake","modelList","model_name","file_key_credit","showOtherModel","newTuningRequiredList","tuningRequiredList","gasoline","additionalFunctionList","additional_functions","showAdditonalFunction","selectAdditionalFun","diesel","newUniqueEcuBrandList","ecuBrandList","uniqueBrands","Object","values","reduce","acc","uniqueBrandListBaseOnCtrlUnit","ecu_type","editEcuBrandVesrsion","showEcuBrand","showEcuVersion","newECU_versionList","brand","setFuelModel","arr","toLowerCase","localeCompare","findIndex","removedObject","autocall","getBrandModel","getVehicleControlList","otherVehicleDetailBoxController","ab","resetEcuBrandVersion","unique","uniqueECUBrand","autoCall","ecuListBaseOnCtrlUnit","all","resetCtrlUnit","selectAddFun","showAddiInfoOtherBox","getTuningRequired","ctrlUnitChange","showOtherEcuBrand_version","markAllControlsAsTouched","formGroup","control","markAsTouched","FormGroup","areFormsValid","invalid","markAllAsTouched","submitForm","formData3","showSelectError","acceptTermBusi","valid","ecuBrandName","engineSizeValue","onlyFileKeyCredit","fileCreditRequired","onlyFuntionKeyCredit","functionCreditRequired","checkOtherCondition","navigate","acceptTermCondCount","fileUpload","FileReader","readAsDataURL","ticketCreateFormSubmit","ticketFormData","navigateByUrl","buyNow","vehicleInfo","engineInfo","ecuInfo","additionalInfo","additionalFuncArray","acceptTermCond","resetForm","delete","otherIndex","routes","path","component","children","GroupTicketFilterComponent","recentFilterId","pageType","getTicketStatusList","is_active","roleList","getFilterGroup","saveTicketFilter","falseCount","editFilter","resetFilter","putRequest","TicketRoutingModule","RouterModule","TicketModule","CommonModule","InfiniteScrollModule","FormsModule","ReactiveFormsModule","MatChipsModule","MatFormFieldModule","MatIconModule","MatInputModule","MatAutocompleteModule","NgxPaginationModule","NgSelectModule","NgxDaterangepickerBootstrapModule","CKEditorModule","DirectiveModuleModule","SharedComponentsModule","SharedPipeModule","NgHttpLoaderModule"],"sourceRoot":"webpack:///","sources":["./src/app/admin/services/customer.service.ts","./src/app/admin/ticket/edit-ticket/edit-ticket.component.ts","./src/app/admin/ticket/edit-ticket/edit-ticket.component.html","./src/app/admin/ticket/ticket-list/ticket-list.component.html","./src/app/admin/ticket/ticket-list/ticket-list.component.ts","./src/app/admin/ticket/ticket.component.ts","./src/app/admin/ticket/ticket.component.html","./src/app/admin/ticket/view-ticket/view-ticket.component.html","./src/app/admin/ticket/view-ticket/view-ticket.component.ts","./src/app/admin/ticket/admin-request-file/admin-request-file.component.html","./src/app/admin/ticket/admin-request-file/admin-request-file.component.ts","./src/app/admin/ticket/group-ticket-filter/group-ticket-filter.component.html","./src/app/admin/ticket/ticket-routing.module.ts","./src/app/admin/ticket/group-ticket-filter/group-ticket-filter.component.ts","./src/app/admin/ticket/ticket.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CustomerService {\n\n  baseUrl = environment.baseUrl;\n  constructor(private _http:HttpClient) \n  {\n\n\n  }\n  \n  getCustomers(params:any)\n  {\n    return this._http.get(this.baseUrl+\"/api/v1/admin/customer\", { params });\n  }\n\n  getCustomerByUuid(id:any)\n  {\n    return this._http.get(`${this.baseUrl}/api/v1/admin/customer/${id}`);\n  }\n  createFileServiceRequest(data:any) {\n    return this._http.post(`${this.baseUrl}/api/v1/file/service/request`,data);\n  }\n  getFileFormData() {\n    return this._http.get(`${this.baseUrl}/api/v1/file/service/get/file_form_data`);\n  }\n\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-edit-ticket',\n  templateUrl: './edit-ticket.component.html',\n  styleUrls: ['./edit-ticket.component.scss']\n})\nexport class EditTicketComponent {\n\n}\n","<p>edit-ticket works!</p>\n","<section class=\"user-list\">\n  <div class=\"ulist-div\">\n    <div class=\"u-add after-seperator\">\n      <h2 class=\"main-title\">Ticket</h2>\n\n      <div class=\"u-add-right\" *ngIf=\"!showDownload\">\n        <smart-search placeholder=\"Search...\" (onSearch)=\"page = 1;searchTickets($event);\"></smart-search>\n\n        <select\n          class=\"form-select bg-input\"\n          (change)=\"enableFilter()\"\n          [(ngModel)]=\"enabledFilter\"\n          style=\"width: 20ch;\"\n        >\n          <option value=\"\" disabled>Select Filter</option>\n          <option\n            value=\"{{ filter?.id }}\"\n            *ngFor=\"let filter of userFilterList\"\n          >\n            {{ filter?.title | titlecase }}\n          </option>\n          >\n        </select>\n        <!-- <div style=\"position: relative;\">\n          <p style=\"cursor: pointer;\" (click)=\"showFilter = !showFilter\"><svg xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"currentColor\" class=\"bi bi-filter\" viewBox=\"0 0 16 16\">\n              <path\n                d=\"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z\" />\n            </svg></p>\n          <ul *ngIf=\"showFilter\" class=\"dropDownList\">\n            <li>\n              <input type=\"checkbox\" [checked]=\"addi_info\" (click)=\"tdControl('addi_info')\">\n              <label for=\"\">Additional Info</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"ctrl_unit\" (click)=\"tdControl('ctrl_unit')\">\n              <label for=\"\">Ctrl Unit</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"country\" (click)=\"tdControl('country')\">\n              <label for=\"\">Country</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"asso_custo\" (click)=\"tdControl('asso_custo')\">\n              <label for=\"\">Assotiated Customer</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"engine_size\" (click)=\"tdControl('engine_size')\">\n              <label for=\"\">Engine Size</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"fuel_type\" (click)=\"tdControl('fuel_type')\">\n              <label for=\"\">Fuel Type</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"mileage\" (click)=\"tdControl('mileage')\">\n              <label for=\"\">Mileage</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"model\" (click)=\"tdControl('model')\">\n              <label for=\"\">Model</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"transmission\" (click)=\"tdControl('transmission')\">\n              <label for=\"\">Transmission</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"tuning_required\" (click)=\"tdControl('tuning_required')\">\n              <label for=\"\">Tuning Required</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"vehicle_VIN\" (click)=\"tdControl('vehicle_VIN')\">\n              <label for=\"\">Vehicle VIN</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"vehicle_make\" (click)=\"tdControl('vehicle_make')\">\n              <label for=\"\">Vehicle Make</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"vehicle_registration\" (click)=\"tdControl('vehicle_registration')\">\n              <label for=\"\">Vehicle Registration</label>\n            </li>\n            <li>\n              <input type=\"checkbox\" [checked]=\"vehicle_year\" (click)=\"tdControl('vehicle_year')\">\n              <label for=\"\">Vehicle Year</label>\n            </li>\n          </ul>\n        </div> -->\n        <div>\n          <button\n            class=\"btn-secondary d-flex\"\n            type=\"button\"\n            data-bs-toggle=\"offcanvas\"\n            data-bs-target=\"#filter\"\n            (click)=\"getTicketCategory()\"\n          >\n            <svg style=\"vertical-align:sub;\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15 10.5A3.502 3.502 0 0 0 18.355 8H21a1 1 0 1 0 0-2h-2.645a3.502 3.502 0 0 0-6.71 0H3a1 1 0 0 0 0 2h8.645A3.502 3.502 0 0 0 15 10.5zM3 16a1 1 0 1 0 0 2h2.145a3.502 3.502 0 0 0 6.71 0H21a1 1 0 1 0 0-2h-9.145a3.502 3.502 0 0 0-6.71 0H3z\" fill=\"currentColor\"></path></g></svg>\n            <span class=\"ms-1\">Filter</span>\n          </button>\n        </div>\n        <div>\n          <button\n            style=\"\n              border: none;\n              background: none;\n              color: #394a9c;\n              border: 1px solid;\n              padding: 2px 5px;\n            \"\n            class=\"btn btn-primary\"\n            type=\"button\"\n            data-bs-toggle=\"offcanvas\"\n            data-bs-target=\"#ticketStatus\"\n          >\n            <!-- <img src=\"assets/images/icon/tstatus.png\" alt=\"status\" /> -->\n            <i class=\"fa fa-arrow-right\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n        <div>\n          <button\n            style=\"\n              border: none;\n              background: none;\n              color: #394a9c;\n              border: 1px solid;\n              padding: 2px 5px;\n            \"\n            class=\"btn btn-primary\"\n            type=\"button\"\n            data-bs-toggle=\"offcanvas\"\n            data-bs-target=\"#viewFilterList\"\n          >\n            <i class=\"fa fa-filter\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n        <!-- <div class=\"dateRange\">\n          <div class=\"calIcon\">\n            <i class=\"fa fa-calendar\" aria-hidden=\"true\"></i>\n          </div>\n          <input type=\"text\" id=\"rangeCalendarCenter\" class=\"form-control dateRangeInput\" ngxDaterangepickerBootstrap\n            [(ngModel)]=\"selectedRangeFilesSubmitted\" [drops]=\"dropsDown\" [opens]=\"opensLeft\" [locale]=\"locale\"\n            [showCustomRangeLabel]=\"true\" [showCancel]=\"true\" [linkedCalendars]=\"true\" [alwaysShowCalendars]=\"false\"\n            [showRangeLabelOnInput]=\"false\" [keepCalendarOpeningWithRange]=\"false\" [isCustomDate]=\"isCustomDate\"\n            [isInvalidDate]=\"isInvalidDate\" [dateLimit]=\"dateLimit\" [maxDate]='maxDate'\n            (datesUpdated)=\"datesUpdatedRange($event,'myFilesSubmittedd')\" aria-describedby=\"rangeCalendarCenterDesc\" />\n        </div> -->\n      </div>\n      <a\n        *ngIf=\"showDownload\"\n        class=\"csv-dwnld\"\n        appDebounce\n        [appDebounce_click_time]=\"1000\"\n        (appDebounce_click)=\"downloadCsv(tickets, 'tickerData.csv')\"\n        >Download CSV</a\n      >\n    </div>\n    <div class=\"responsive-tbl mt-4\">\n      <table>\n        <thead>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Ticket ID</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'ids',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Created By</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'created_by__first_name',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Status</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'ticket_status',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Subject</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'subject',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Request Id</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'request_id',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Category</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'category',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>Error</th>\n          <th>\n            <div style=\"min-width: 12ch;\">\n              Credit\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Created</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'created_at',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Modified</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'updated_at',$event)\"></sort-button>\n            </div>\n          </th>\n          <th>Conversations</th>\n          <th>\n            <div class=\"d-flex align-items-center\">\n              <p class=\"mb-0\">Assign To</p>\n              <sort-button (onSort)=\"retrieveTickets(true,'assigned_to',$event)\"></sort-button>\n            </div>\n          </th>\n          <th class=\"tableHeadAction\">Action</th>\n        </thead>\n        <tbody>\n          <tr\n            *ngFor=\"\n              let ticket of tickets\n                | paginate\n                  : {\n                      itemsPerPage: pageSize,\n                      currentPage: page,\n                      totalItems: totalTicket\n                    };\n              let i = index\n            \"\n          >\n            <td\n              class=\"pointer\"\n              style=\"color: blue\"\n              [routerLink]=\"[\n                '/admin/tickets/view-ticket',\n                ticket?.ids,\n                ticket?.id\n              ]\"\n            >\n              {{ ticket?.ids || \"NA\" }}\n            </td>\n            <td>\n              <div\n                class=\"tdholder pointer\"\n                [routerLink]=\"[\n                  '/admin/customer/view/',\n                  ticket?.created_by?.uuid\n                ]\"\n              >\n                <div class=\"tdinner\">\n                  <span\n                    >{{ ticket?.created_by?.first_name || \"NA\" }}\n                    {{ ticket?.created_by?.last_name }}\n                  </span>\n                </div>\n              </div>\n            </td>\n            <td>\n              <span\n                class=\"blue d-flex\"\n                (click)=\"getTicketDetail(ticket)\"\n                data-bs-toggle=\"modal\"\n                data-bs-target=\"#updateStatusModal\"\n              >\n                {{ ticket?.ticket_status?.team_status || \"New\" }}\n                <i class=\"fa fa-edit\" title=\"Edit\"></i>\n              </span>\n            </td>\n            <td *ngIf=\"ticket?.subject\" [title]=\"ticket?.subject\">\n              {{ truncateText(ticket?.subject, 20) }}\n            </td>\n            <td *ngIf=\"!ticket?.subject\">NA</td>\n            <td [title]=\"ticket?.request_id\">\n              {{ ticket?.request_id || \"NA\" }}\n            </td>\n            <td [title]=\"ticket?.category\">{{ ticket?.category }}</td>\n            <td>\n              <span class=\"d-flex\">\n                <i\n                  *ngIf=\"!ticket?.file_request?.is_error\"\n                  style=\"color: #0b0bbf\"\n                  class=\"fa fa-times\"\n                  aria-hidden=\"true\"\n                ></i>\n                <i\n                  *ngIf=\"ticket?.file_request?.is_error\"\n                  style=\"color: green\"\n                  class=\"fa fa-check\"\n                  aria-hidden=\"true\"\n                ></i>\n                <i\n                  *ngIf=\"ticket?.file_request?.is_error\"\n                  style=\"color: #0b0bbf; margin-left: 10px\"\n                  (click)=\"getErrorList(ticket?.file_request?.request_id)\"\n                  class=\"fa fa-question-circle-o pointer\"\n                  aria-hidden=\"true\"\n                  data-bs-toggle=\"modal\"\n                  data-bs-target=\"#chngeEmailModal2\"\n                ></i>\n              </span>\n            </td>\n            <td *ngIf=\"ticket?.file_request?.credit_spent?.credit\">\n              {{ ticket?.file_request?.credit_spent?.credit }}\n              {{\n                ticket?.file_request?.credit_spent?.credit_type == 1\n                  ? \"File Key\"\n                  : ticket?.file_request?.credit_spent?.credit_type == 2\n                  ? \"EVC\"\n                  : \"Function Key\"\n              }}\n            </td>\n            <td *ngIf=\"!ticket?.file_request?.credit_spent?.credit\">NA</td>\n            <td>{{ noti.formatDate(ticket?.created_at) }}</td>\n            <td>{{ noti.formatDate(ticket?.updated_at) }}</td>\n            <td>{{ ticket?.conversation_count || 0 }}</td>\n            <td>\n              <span *ngIf=\"ticket?.assigned_to === null; else fulldetail\"\n                >NA</span\n              >\n              <ng-template #fulldetail>\n                <div class=\"tdholder\">\n                  <div class=\"tdinner\">\n                    <span class=\"blue\" style=\"cursor: auto;white-space:nowrap\"\n                      >{{ ticket?.assigned_to?.first_name || \"NA\" }}\n                      {{ ticket?.assigned_to?.last_name || \"NA\" }}\n                      <i\n                        class=\"fa fa-edit pointer\"\n                        title=\"Edit\"\n                        data-bs-toggle=\"modal\"\n                        data-bs-target=\"#assignToModal\"\n                        (click)=\"getTicketDetail(ticket);getUserByRole();\"\n                      ></i>\n                      <i\n                        class=\"fa fa-eye pointer\"\n                        title=\"View\"\n                        [routerLink]=\"[\n                          '/admin/role/view/',\n                          ticket?.assigned_to?.id\n                        ]\"\n                      ></i>\n                    </span>\n    \n                  </div>\n                </div>\n              </ng-template>\n            </td>\n            <!-- <td>{{ticket?.allVehicleDetail?.request_id || 'NA'}}</td>\n            <td> {{ticket?.allVehicleDetail?.file_type || 'NA'}} </td>\n            <td> {{ticket?.allVehicleDetail?.vehicle_type || 'NA'}} </td>\n            <td *ngIf=\"vehicle_registration\"> {{ticket?.allVehicleDetail?.vehicle_registration || 'NA'}} </td> -->\n            <!-- <td> {{ticket?.allVehicleDetail?.ecu_brand || 'NA'}}</td>\n            <td> {{ticket?.allVehicleDetail?.ecu_version || 'NA'}} </td>\n            <td> {{ticket?.allVehicleDetail?.tuning_tool_used || 'NA'}} </td>\n            <td *ngIf=\"addi_info\"> {{ticket?.allVehicleDetail?.additional_info || 'NA'}} </td>\n            <td *ngIf=\"ctrl_unit\"> {{ticket?.allVehicleDetail?.control_unit || 'NA'}} </td>\n            <td *ngIf=\"country\"> {{ticket?.allVehicleDetail?.country || 'NA'}} </td>\n            <td *ngIf=\"asso_custo\"> {{ticket?.allVehicleDetail?.customer_first_name}}\n              {{ticket?.allVehicleDetail?.customer_last_name}} </td>\n            <td *ngIf=\"engine_size\"> {{ticket?.allVehicleDetail?.engine_size || 'NA'}} </td>\n            <td *ngIf=\"fuel_type\"> {{ticket?.allVehicleDetail?.fuel_type || 'NA'}} </td>\n            <td *ngIf=\"mileage\"> {{ticket?.allVehicleDetail?.mileage || 'NA'}}\n              {{ticket?.allVehicleDetail?.mileage_type}} </td>\n            <td *ngIf=\"model\"> {{ticket?.allVehicleDetail?.model || 'NA'}} </td>\n            <td *ngIf=\"transmission\"> {{ticket?.allVehicleDetail?.transmission || 'NA'}} </td>\n            <td *ngIf=\"tuning_required\"> {{ticket?.allVehicleDetail?.tuning_required || 'NA'}} </td>\n            <td *ngIf=\"vehicle_VIN\"> {{ticket?.allVehicleDetail?.vehicle_VIN || 'NA'}} </td>\n            <td *ngIf=\"vehicle_make\"> {{ticket?.allVehicleDetail?.vehicle_make || 'NA'}} </td>\n            <td *ngIf=\"vehicle_year\"> {{ticket?.allVehicleDetail?.vehicle_year || 'NA'}} </td> -->\n            <td class=\"tableBodyAction\">\n              <div class=\"actiontd\">\n                <a\n                  class=\"eyeIcon\"\n                  (click)=\"getTicketDetail(ticket); savePageDetail()\"\n                  [routerLink]=\"[\n                    '/admin/tickets/view-ticket',\n                    ticket?.ids,\n                    ticket?.id\n                  ]\"\n                  [state]=\"{state:ticket}\"\n                  ><i class=\"fa fa-eye\" title=\"View\"></i\n                ></a>\n                <a\n                  class=\"eyeIcon\"\n                  (click)=\"getTicketDetail(ticket); savePageDetail()\"\n                  [routerLink]=\"[\n                    '/admin/fileservice/timeline',\n                    ticket?.request_id\n                  ]\"\n                  [queryParams]=\"{ fromTicket: true }\"\n                  ><i\n                    class=\"fa fa-clock-o\"\n                    title=\"History\"\n                    aria-hidden=\"true\"\n                  ></i\n                ></a>\n                <a\n                  class=\"eyeIcon pointer\"\n                  data-bs-toggle=\"offcanvas\"\n                  data-bs-target=\"#vehicleDetail\"\n                  (click)=\"getVehicleDetail(ticket)\"\n                  ><i class=\"fa fa-car\" aria-hidden=\"true\"></i\n                ></a>\n                <a\n                  class=\"eyeIcon pointer\"\n                  *ngIf=\"\n                    ticket?.request_id && permissions?.ticket == 'Full access'\n                  \"\n                  (click)=\"getFileList(ticket?.request_id)\"\n                  data-bs-toggle=\"modal\"\n                  data-bs-target=\"#chngeEmailModal\"\n                  ><i\n                    class=\"fa fa-download\"\n                    title=\"Download\"\n                    aria-hidden=\"true\"\n                  ></i\n                ></a>\n                <a\n                  class=\"eyeIcon pointer\"\n                  *ngIf=\"\n                    ticket?.request_id && permissions?.ticket == 'Full access'\n                  \"\n                  (click)=\"saveTicketDetail(ticket); savePageDetail()\"\n                  [routerLink]=\"['/admin/tickets/request-file', ticket?.ids]\"\n                  [queryParams]=\"{ reqId: ticket?.request_id }\"\n                >\n                  <i class=\"fa fa-pencil\" aria-hidden=\"true\"></i\n                ></a>\n                <a\n                  *ngIf=\"\n                    ticket?.request_id &&\n                    ticket?.admin_ticket?.length > 0 &&\n                    permissions?.ticket == 'Full access'\n                  \"\n                  (click)=\"adminTicket = ticket\"\n                  data-bs-toggle=\"modal\"\n                  data-bs-target=\"#viewFileReqModal\"\n                  class=\"eyeIcon pointer\"\n                >\n                  <i class=\"fa fa-table\" aria-hidden=\"true\"></i\n                ></a>\n                <!-- <i class=\"fa fa-indent\" aria-hidden=\"true\"></i> -->\n                <a\n                  *ngIf=\"\n                    ticket?.request_id && permissions?.ticket == 'Full access'\n                  \"\n                  class=\"eyeIcon pointer\"\n                  data-bs-toggle=\"modal\"\n                  data-bs-target=\"#changeStatusModel\"\n                  (click)=\"frId = ticket?.ids\"\n                >\n                  <i class=\"fa fa-indent\" aria-hidden=\"true\"></i\n                ></a>\n                <!-- <a *ngIf=\"ticket?.file_request?.request_id\" class=\"eyeIcon\" data-bs-toggle=\"dropdown\">\n                    <i class=\"fa fa-ellipsis-v\"></i>\n\n\n                    <ul class=\"dropdown-menu\" style=\"z-index: 99999;\">\n                        <li><a routerLink=\"/admin/profile\"><img src=\"assets/images/icon/account.svg\"\n                                    alt=\"profile\" />Profile</a></li>\n                        <li><a><img src=\"assets/images/icon/logout.svg\" alt=\"logout\" />Logout</a>\n                        </li>\n                    </ul>\n                  </a> -->\n\n                <!-- <a *ngIf=\"ticket?.file_request?.request_id\" class=\"eyeIcon dropdown\"> -->\n                <!-- <i class=\"fa fa-ellipsis-v dropdown-toggle\" aria-hidden=\"true\"\n                  id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"></i> -->\n                <!-- <div class=\"dropdown\">\n                    <button class=\"btn btn-secondary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                      <i class=\"fa fa-ellipsis-v dropdown-toggle\"></i>\n                    </button>\n                    <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                      <a class=\"dropdown-item\" href=\"#\">Action</a>\n                      <a class=\"dropdown-item\" href=\"#\">Another action</a>\n                    </div>\n                  </div> -->\n                <!-- </a> -->\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <p\n        class=\"errcls\"\n        *ngIf=\"showError\"\n        style=\"justify-content: center !important\"\n      >\n        <span>Records not found</span>\n      </p>\n    </div>\n    <pagination-controls\n      *ngIf=\"tickets?.length != 0\"\n      class=\"pagination-crl\"\n      previousLabel=\"Prev\"\n      nextLabel=\"Next\"\n      (pageChange)=\"handlePageChange($event)\"\n    ></pagination-controls>\n  </div>\n  <!-- The file download modal -->\n  <div class=\"modal\" id=\"chngeEmailModal\">\n    <div class=\"v-align\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header downloadFile\">\n            <h4 class=\"modal-title\">Download files</h4>\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              data-bs-dismiss=\"modal\"\n            ></button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"responsive-tbl\">\n              <table>\n                <thead>\n                  <th>Title</th>\n                  <th>Created at</th>\n                  <th>Download</th>\n                  <th>Download Count</th>\n                </thead>\n                <tr *ngFor=\"let file of downloadFileList; let i = index\">\n                  <td>{{ file?.title }}</td>\n                  <td>{{ noti.formatDate(file?.created_at) }}</td>\n                  <td style=\"text-align: center !important\">\n                    <a class=\"eyeIcon\" (click)=\"downloadFIle(file, i)\"\n                      ><i\n                        class=\"fa fa-download\"\n                        title=\"Download\"\n                        aria-hidden=\"true\"\n                      ></i\n                    ></a>\n                  </td>\n                  <td style=\"text-align: center !important\">\n                    {{ file?.downloaded_times ? file?.downloaded_times : 0 }}\n                  </td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n<!-- View file request modal -->\n<div class=\"modal\" id=\"viewFileReqModal\">\n  <div class=\"v-align\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header downloadFile\">\n          <h4 class=\"modal-title\">File Request</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"responsive-tbl\">\n            <table>\n              <thead>\n                <th>Request Id</th>\n                <th style=\"text-align: center\">Action</th>\n              </thead>\n              <tr *ngFor=\"let file of adminTicket?.admin_ticket; let i = index\">\n                <td>{{ file?.request_id }}</td>\n                <td class=\"tableBodyAction\">\n                  <div class=\"actiontd\">\n                    <a\n                      class=\"eyeIcon\"\n                      data-bs-dismiss=\"modal\"\n                      [routerLink]=\"['/admin/fileservice']\"\n                      [queryParams]=\"{ id: file?.request_id }\"\n                      ><i class=\"fa fa-eye\" title=\"View\"></i\n                    ></a>\n                  </div>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal\" id=\"chngeEmailModal2\">\n  <div class=\"v-align\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header downloadFile\">\n          <h4 class=\"modal-title\">Error Detail</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"responsive-tbl\">\n            <table>\n              <thead>\n                <th>Title</th>\n                <th>Date</th>\n                <th>Description</th>\n              </thead>\n              <tr *ngFor=\"let error of errorList; let i = index\">\n                <td class=\"d-flex align-items-center\">{{ error?.title }}</td>\n                <td>{{ noti.formatDate(error?.created_at) }}</td>\n                <td>{{ error?.description }}</td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Update ticket status Modal start here -->\n<div class=\"modal productModal\" id=\"updateStatusModal\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form\n        [formGroup]=\"ticketstatusForm\"\n        (ngSubmit)=\"ticketstatusFormSubmit()\"\n      >\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\">Update Status</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            id=\"closemodal\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <hr />\n        <div class=\"modal-body\">\n          <div>\n            <label for=\"status\" class=\"form-label\">Status</label>\n            <select class=\"form-select\" formControlName=\"ticket_status\">\n              <option disabled>Select status</option>\n              <option\n                *ngFor=\"let tkstatus of ticketStatus\"\n                value=\"{{ tkstatus?.id }}\"\n              >\n                {{ tkstatus?.ticket_status || \"New\" }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-danger\"\n            id=\"closemodal\"\n            data-bs-dismiss=\"modal\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            [disabled]=\"ticketstatusForm.invalid\"\n            class=\"btn btn-primary\"\n          >\n            Update\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n<!-- Update ticket status Modal end here-->\n<div class=\"offcanvas offcanvas-end\" id=\"filter\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">Filter</h1>\n    <button\n      type=\"button\"\n      id=\"closefilterconvas\"\n      class=\"btn-close\"\n      data-bs-dismiss=\"offcanvas\"\n    ></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body\">\n    <form [formGroup]=\"filterTicketForm\" (ngSubmit)=\"filterTicketFormSubmit()\">\n      <div>\n        <label>Ticket Status</label>\n        <select class=\"form-select\" formControlName=\"status\">\n          <option value=\"\">Select status</option>\n          <option\n            *ngFor=\"let tkstatus of ticketStatus\"\n            value=\"{{ tkstatus?.id }}\"\n          >\n            {{ tkstatus?.ticket_status || \"New\" }}\n          </option>\n        </select>\n      </div>\n      <div>\n        <label>Ticket Category</label>\n        <select class=\"form-select\" formControlName=\"category\">\n          <option value=\"\">Select Ticket Category</option>\n          <option\n            *ngFor=\"let tkcategory of ticketCategories\"\n            value=\"{{ tkcategory?.id }}\"\n          >\n            {{ tkcategory?.name }}\n          </option>\n        </select>\n      </div>\n      <div>\n        <label>Request Date</label>\n        <select class=\"form-select\" formControlName=\"created_at\">\n          <option value=\"\">Select Date</option>\n          <option value=\"today\">Today</option>\n          <option value=\"yesterday\">Yesterday</option>\n          <option value=\"week\">Past 7 days</option>\n          <option value=\"month\">This month</option>\n        </select>\n      </div>\n      <div class=\"cancel-apply\">\n        <button class=\"btn\" type=\"button\" (click)=\"restFilter()\">Reset</button>\n        <button class=\"btn btn-secondary\" type=\"submit\">Apply Filters</button>\n      </div>\n    </form>\n  </div>\n</div>\n<!-- Update file status Modal start here -->\n<div class=\"modal productModal\" id=\"changeStatusModel\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form\n        [formGroup]=\"frTicketstatusForm\"\n        (ngSubmit)=\"frTicketstatusFormSubmit()\"\n      >\n        <div\n          class=\"modal-header\"\n          style=\"margin-bottom: 0px !important; padding-bottom: 0px !important\"\n        >\n          <h4 class=\"modal-title\">Update FR Status</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            id=\"closeFtmodal\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <hr />\n        <div class=\"modal-body\">\n          <div>\n            <label for=\"status\" class=\"form-label\">Status</label>\n            <select class=\"form-select\" formControlName=\"ticket_status\">\n              <option disabled value=\"\">Select status</option>\n              <option value=\"OPEN\">Open</option>\n              <option value=\"CLOSED\">Closed</option>\n              <option value=\"Manual Handle\">Manual handle</option>\n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-danger\"\n            id=\"closemodal\"\n            data-bs-dismiss=\"modal\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            [disabled]=\"frTicketstatusForm.invalid\"\n            class=\"btn btn-primary\"\n          >\n            Update\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div class=\"offcanvas offcanvas-end\" id=\"ticketStatus\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">Ticket Status</h1>\n    <button\n      type=\"button\"\n      id=\"closeticketstatusconvas\"\n      class=\"btn-close\"\n      data-bs-dismiss=\"offcanvas\"\n    ></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body\">\n    <div class=\"offcanvas-inner\">\n      <div class=\"active\" *ngFor=\"let tkstatus of ticketStatus\">\n        <input type=\"checkbox\" (change)=\"onChangeTicketStatus(tkstatus?.id)\" />\n        <p>{{ tkstatus?.ticket_status || \"New\" }}</p>\n        <span> {{ tkstatus?.count }} </span>\n      </div>\n      <div class=\"cancel-apply\">\n        <button\n          class=\"btn\"\n          type=\"button\"\n          id=\"closefiltermodal\"\n          data-bs-dismiss=\"offcanvas\"\n        >\n          Cancel\n        </button>\n        <button\n          class=\"btn btn-secondary\"\n          (click)=\"filterByStatus()\"\n          type=\"button\"\n        >\n          Apply Filters\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- assign ticket Modal start here -->\n<div class=\"modal productModal mt-4\" id=\"assignToModal\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form\n        [formGroup]=\"ticketAssignForm\"\n        (ngSubmit)=\"ticketAssignFormSubmit()\"\n      >\n        <div class=\"modal-header\" style=\"margin-bottom: 0px !important\">\n          <h4 class=\"modal-title\">Assign To</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            id=\"closeticketasignmodal\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <hr />\n        <div class=\"modal-body\">\n          <!-- Removed Roles dropdown for improved efficiency -->\n          <!-- <div>\n            <label for=\"status\" class=\"form-label\">Select Role</label>\n            <select\n              class=\"form-select\"\n              (change)=\"getUserByRole($event)\"\n              formControlName=\"role_id\"\n            >\n              <option disabled>Select Role</option>\n              <option value=\"{{ role?.id }}\" *ngFor=\"let role of roleList\">\n                {{ role?.name }}\n              </option>\n              >\n            </select>\n          </div> -->\n          <div>\n            <label for=\"status\" class=\"form-label\"> Users</label>\n            <select class=\"form-select\" formControlName=\"user_id\">\n              <option disabled>Select User</option>\n              <option\n                value=\"{{ user?.user_id }}\"\n                *ngFor=\"let user of roleUserList\"\n              >\n                {{ user?.first_name }} {{ user?.last_name }} ({{ user?.email }})\n              </option>\n              >\n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-danger\"\n            id=\"closeticketasignmodal\"\n            data-bs-dismiss=\"modal\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            [disabled]=\"ticketAssignForm.invalid\"\n            class=\"btn btn-primary\"\n          >\n            Assign\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n<!-- Vehicle Detail side bar modal -->\n<div class=\"offcanvas offcanvas-end\" id=\"vehicleDetail\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">Vehicle Detail</h1>\n    <button\n      type=\"button\"\n      id=\"closefilterconvas\"\n      class=\"btn-close\"\n      data-bs-dismiss=\"offcanvas\"\n    ></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body viewTicket\">\n    <div *ngIf=\"!isStandaloneTicket\">\n      <div>\n        <p>Customer Name</p>\n      </div>\n      <div style=\"display: block\">\n        <span>\n          {{ vehDetail?.customer_first_name || \"NA\" }}\n          {{ vehDetail?.customer_last_name }} </span\n        ><br />\n      </div>\n    </div>\n    <div *ngIf=\"!isStandaloneTicket\">\n      <div>\n        <p>Company Name</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.user?.company_name || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Type</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.vehicle_type || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Make</p>\n      </div>\n      <div style=\"display: block\">\n        <span> {{ vehDetail?.vehicle_make || \"NA\" }}</span\n        ><br />\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Model</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.model || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Registration</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.vehicle_registration || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Year</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.vehicle_year || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle VIN</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.vehicle_VIN || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>File Type</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.file_type || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Engine Size</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.engine_size || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Transmission</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.transmission || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Fuel Type</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.fuel_type || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Mileage Type</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.mileage_type || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Mileage</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.mileage || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>ECU Brand</p>\n      </div>\n      <div>\n        <span\n          >{{ vehDetail?.ecu_brand || \"NA\" }}</span\n        >\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>ECU Version</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.ecu_version }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Control Unit</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.control_unit || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Country</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.country || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Tuning Tool Used</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.tuning_tool_used || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Tuning Required</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.tuning_required || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Credit</p>\n      </div>\n      <div>\n        <span> {{ vehDetail?.credit_spent?.credit }}\n          {{\n            vehDetail?.credit_spent?.credit_type == 1\n              ? \"File Key\"\n              : vehDetail?.credit_spent?.credit_type == 2\n              ? \"EVC\"\n              : vehDetail?.credit_spent?.credit_type == 3\n              ? \"Function Key\"\n              : \"0\"\n          }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Additional Function</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.additional_function || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Additional Info.</p>\n      </div>\n      <div>\n        <span>{{ vehDetail?.additional_info || \"NA\" }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Other Fields</p>\n      </div>\n      <div>\n        <span>{{ (vehDetail?.other_fields | titlecase) || \"NA\" }}</span>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- View filter list Modal -->\n<div class=\"offcanvas offcanvas-end\" id=\"viewFilterList\">\n  <div class=\"offcanvas-header d-flex justify-content-between\">\n    <h1 class=\"offcanvas-title\">Filter List</h1>\n    <div class=\"d-flex align-items-center\">\n      <button\n        style=\"border: none; background-color: #394a9c; margin-right: 20px\"\n        class=\"btn btn-primary\"\n        type=\"button\"\n        [routerLink]=\"['/admin/tickets/group-ticket-filter']\"\n      >\n        Create\n      </button>\n      <button\n        type=\"button\"\n        id=\"closefilterList\"\n        class=\"btn-close\"\n        data-bs-dismiss=\"offcanvas\"\n      ></button>\n    </div>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body\">\n    <div class=\"offcanvas-inner\">\n      <div class=\"active\" *ngFor=\"let filterList of userFilterList\">\n        <p>{{ filterList?.title | titlecase }}</p>\n        <div>\n          <button\n            style=\"border: none; color: #394a9c\"\n            class=\"btn\"\n            type=\"button\"\n            [routerLink]=\"['/admin/tickets/group-ticket-filter']\"\n            [queryParams]=\"{ id: filterList?.id }\"\n          >\n            <i\n              class=\"fa fa-pencil\"\n              aria-hidden=\"true\"\n              style=\"padding: 4px 6px; border: 1px solid\"\n            ></i>\n          </button>\n          <button\n            style=\"border: none; color: red\"\n            class=\"btn\"\n            type=\"button\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#deleteModal\"\n            (click)=\"selectedFilter = filterList\"\n          >\n            <i\n              class=\"fa fa-trash\"\n              aria-hidden=\"true\"\n              style=\"padding: 4px 6px; border: 1px solid\"\n            ></i>\n          </button>\n        </div>\n      </div>\n      <div>\n        <p\n          class=\"errcls\"\n          *ngIf=\"userFilterList?.length == 0\"\n          style=\"justify-content: center !important\"\n        >\n          <span style=\"color: red\">No Filter Available.</span>\n        </p>\n      </div>\n      <!-- <div class=\"cancel-apply\">\n        <button class=\"btn\" type=\"button\" id=\"closefiltermodal\" data-bs-dismiss=\"offcanvas\">Cancel</button>\n        <button class=\"btn btn-secondary\" (click)=\"filterByStatus()\" type=\"button\">Apply Filters</button>\n      </div> -->\n    </div>\n  </div>\n</div>\n<!-- Delete Modal -->\n<!-- Delete Modal -->\n<div class=\"modal\" id=\"deleteModal\">\n  <div class=\"v-align\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content deleteModal\">\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\">Delete Filter</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <div>\n              <p>\n                Are you sure, you want to delete\n                <b>{{ selectedFilter?.title }}</b> ?\n              </p>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <div class=\"flexDiv\">\n            <button class=\"btn cancel\" data-bs-dismiss=\"modal\">Cancel</button>\n            <button\n              type=\"button\"\n              class=\"btn delete\"\n              (click)=\"deleteSavedFilter()\"\n              data-bs-dismiss=\"modal\"\n            >\n              Confirm\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { RoleService } from '../../services/role.service';\nimport { TicketService } from '../../services/ticket.service';\nimport { requestUrl } from 'src/app/services/adminReqUrl.const';\nimport { CrudService } from 'src/app/services/crud.service';\nimport { cusRequestUrl } from 'src/app/services/customerReqUrl.const';\nimport { UploadFileService } from 'src/app/services/upload-file.service';\nimport { NotificationsService } from 'src/services/notifications.service';\nimport { PermissionsService } from '../../services/permissions.service';\nimport {\n  Subject,\n  Subscription,\n  debounceTime,\n  distinctUntilChanged,\n  switchMap,\n} from 'rxjs';\nimport dayjs, { Dayjs } from 'dayjs';\nimport { NgxDaterangepickerBootstrapDirective } from 'ngx-daterangepicker-bootstrap';\n\n@Component({\n  selector: 'app-ticket-list',\n  templateUrl: './ticket-list.component.html',\n  styleUrls: ['./ticket-list.component.scss'],\n})\nexport class TicketListComponent implements OnInit {\n  filterTicketForm: FormGroup;\n  ticketstatusForm: FormGroup;\n  ticketstatusid: any;\n  ticketAssignForm: FormGroup;\n  frTicketstatusForm: FormGroup;\n  roleList: any = [];\n  roleUserList: any = [];\n  ticketIdsArr: any = [];\n  ticketCategories: any = [];\n  ticketStatus: any = [];\n  tickets: any = [];\n  page = 1;\n  pageSize = 10;\n  title = '';\n  status = '';\n  totalTicket: any;\n  category: any = '';\n  created_at: any = '';\n  ticketIds: any = [];\n  showFilter: boolean = false;\n  addi_info: boolean = false;\n  ctrl_unit: boolean = false;\n  country: boolean = false;\n  engine_size: boolean = false;\n  asso_custo: boolean = false;\n  fuel_type: boolean = false;\n  mileage: boolean = false;\n  model: boolean = false;\n  transmission: boolean = false;\n  tuning_required: boolean = false;\n  vehicle_VIN: boolean = false;\n  vehicle_make: boolean = false;\n  vehicle_registration: boolean = true;\n  vehicle_year: boolean = false;\n  showError: boolean = false;\n  ticketDetail: any;\n  downloadFileList: any;\n  errorList: any;\n  adminTicket: any;\n  searchKey: any;\n  frId: any;\n  permissions: any;\n\n  // Date range picker code start from here\n  dropsDown = 'down';\n  dropsUp = 'up';\n  opensRight = 'right';\n  opensCenter = 'center';\n  opensLeft = 'left';\n  selectedRangeCalendarCenter: any;\n  selectedRangeSupportTicketsByStatus: any;\n  selectedRangeToolUsage: any;\n  selectedRangeFilesSubmitted: any;\n  maxDate?: Dayjs;\n  minDate?: Dayjs;\n  invalidDates: Dayjs[] = [];\n  localeTime = {\n    firstDay: 1,\n    startDate: dayjs().startOf('day'),\n    endDate: dayjs().endOf('day'),\n    format: 'DD.MM.YYYY HH:mm:ss',\n    applyLabel: 'Apply',\n    cancelLabel: 'Cancel',\n    fromLabel: 'From',\n    toLabel: 'To',\n  };\n  locale = {\n    firstDay: 1,\n    startDate: dayjs().startOf('day'),\n    endDate: dayjs().endOf('day'),\n    format: 'YYYY-MM-DD',\n    applyLabel: 'Apply',\n    cancelLabel: 'Cancel',\n    fromLabel: 'From',\n    toLabel: 'To',\n    displayFormat: 'YYYY-MM-DD',\n  };\n  tooltips = [\n    { date: dayjs(), text: 'Today is just unselectable' },\n    { date: dayjs().add(2, 'days'), text: 'Yeeeees!!!' },\n  ];\n  dateLimit = 30;\n  @ViewChild(NgxDaterangepickerBootstrapDirective, { static: false })\n  pickerDirective!: NgxDaterangepickerBootstrapDirective;\n  // Date range picker code end from here&&&&&&&&&&&&&&&&&&&&&\n  startDate: any;\n  toDate: any;\n  selectedFilter: any;\n  enabledFilter: any = '';\n  type: any = this.ar.queryParams;\n  showDownload: boolean = false;\n  sortField: string | undefined;\n  sortOrder: string | undefined;\n  constructor(\n    private fb: FormBuilder,\n    private _titleservice: Title,\n    private ar: ActivatedRoute,\n    private _ticketservice: TicketService,\n    private toastr: ToastrService,\n    private _roleservice: RoleService,\n    private crud: CrudService,\n    private _permissions: PermissionsService,\n    private pageService: UploadFileService,\n    public noti: NotificationsService\n  ) {\n    this.retrieveTickets(false);\n    this.getFilterList();\n    this._titleservice.setTitle('Tickets');\n    this.filterTicketForm = this.fb.group({\n      status: ['', Validators.required],\n      category: ['', Validators.required],\n      created_at: ['', Validators.required],\n    });\n\n    this.ticketstatusForm = this.fb.group({\n      ticket_status: ['', Validators.required],\n    });\n    this.frTicketstatusForm = this.fb.group({\n      ticket_status: ['', Validators.required],\n    });\n\n    this.ticketAssignForm = this.fb.group({\n      role_id: ['Select Role', Validators.required],\n      user_id: ['Select User', Validators.required],\n    });\n    this.permissions = this._permissions.getPermissions();\n  }\n  private searchSubject: Subject<string> = new Subject<string>();\n  usersdetail: any;\n\n\n  ngOnInit(): void {\n    this.getCountByCategory();\n    this.usersdetail = JSON.parse(localStorage.getItem('userdetails') || '');\n    this.searchSubject\n      .pipe(\n        debounceTime(1000), // Wait for 300 milliseconds after user stops typing\n        distinctUntilChanged() // Only emit if the current value is different from the previous one\n        // switchMap((searchTerm: string) => this.dataService.search(searchTerm)) // Example: call a service method to fetch data\n      )\n      .subscribe((results: any) => {\n        this.page = 1;\n        this.searchTicketResult();\n      });\n    var checkPage = this.pageService.getPageDetail();\n    if (checkPage) this.page = checkPage;\n    // const jsonData = localStorage.getItem('previousPageDetail');\n    // if (jsonData !== null) {\n    //   try {\n    //     var pageDetail = JSON.parse(localStorage.getItem('previousPageDetail') || '');\n    //     if (pageDetail.url == window.location.href) {\n    //       this.page = pageDetail.page;\n    //       localStorage.removeItem('previousPageDetail');\n    //     }\n    //     else{\n    //       localStorage.removeItem('previousPageDetail');\n    //     }\n    //   } catch (error) {}\n    // }\n    this.ticketIdsArr = localStorage.getItem('ticketids')?.split(',');\n    // var currentDate = new Date();\n    // var sevenDaysAgo = new Date(currentDate.getTime() - (7 * 24 * 60 * 60 * 1000));\n    // this.toDate = currentDate.toISOString().split('T')[0];\n    // this.startDate = sevenDaysAgo.toISOString().split('T')[0];\n    if (this.type['_value'].chartType) {\n      var url;\n      this.showDownload = true;\n      //       {{url}}/dashboard/internal/ticket/by_status/activity/data?range=3&filter_by=range&year=2024&ticket_status=Cancelled by customer\n      // {{url}}/dashboard/internal/ticket/by_status/activity/data?filter_by=date&from_date=2024-04-11&to_date=2024-04-11&ticket_status=Cancelled by customer\n\n      if (this.type['_value'].chartType == 'month') {\n        url = `dashboard/internal/ticket/by_status/activity/data?month=${this.type['_value'].month}&filter_type=range&year=${this.type['_value'].year}&ticket_status=${this.type['_value'].ticket_status}`;\n      } else {\n        url = `dashboard/internal/ticket/by_status/activity/data?filter_by=date&from_date=${this.type['_value'].start_date}&to_date=${this.type['_value'].start_date}&ticket_status=${this.type['_value'].ticket_status}`;\n      }\n      this.crud.getRequest(`${url}`).then((res: any) => {\n        if (res) {\n          this.modifyTicketDetails(res);\n        }\n      });\n    } else {\n\n\n      // Temporary disabled filter API to directly fetch tickets without delay\n      // this.getSavedTicketFilter();\n    }\n    // this.getRoles();\n    // this.getTicketCategory();\n\n    this.handleLiveTicketUpdates();\n  }\n\n\n  handleLiveTicketUpdates() {\n    this.noti.onTicketUpdats.subscribe((res:any) => {\n      if(!res || !this.tickets?.length) return;\n\n      const ticketToBeUpdated = this.tickets.find((el:any) => el.ids == res.ticket_id)\n      if(!ticketToBeUpdated) return;\n\n      \n      ticketToBeUpdated.conversation_count = res.ticket_conversation;\n      ticketToBeUpdated.updated_at = res.ticket_modified_time;\n\n      // Update Status\n      ticketToBeUpdated.ticket_status.team_status = res.ticket_status;\n      ticketToBeUpdated.ticket_status.display_user_status = res.ticket_status;\n\n      // Update Assigned to\n      ticketToBeUpdated.assigned_to.first_name = res.ticket_assigned;\n      ticketToBeUpdated.assigned_to.last_name = ' '\n\n      console.log(ticketToBeUpdated,'updated ticket');\n      \n    })\n  }\n\n\n  userFilterList: any = [];\n  getFilterList() {\n    this.crud\n      .get(\n        `admin/ticket/group/list_by_role?role_id=${this.usersdetail?.roles?.id}`,\n        true\n      )\n      .subscribe((res: any) => {\n        if (res) {\n          this.userFilterList = res.data;\n          this.userFilterList = this.sort(this.userFilterList, 'title');\n        }\n      });\n\n      this.crud\n      .get(`admin/ticket/active/filter_for_user`,true)\n      .subscribe((res: any) => {\n        if (res) {\n          if (res.data && res.data.id) {\n            this.enabledFilter = res.data?.id;\n          }\n        }\n      });\n  }\n  enableFilter() {\n    this.page = 1;\n    this.crud\n      .get(`admin/ticket/active/filter?active_filter_id=${this.enabledFilter}`)\n      .subscribe((res: any) => {\n        if (res) {\n          console.log(res, 'res');\n          this.retrieveTickets(false);\n        }\n      });\n  }\n  isInvalidDate = (m: Dayjs) => {\n    return this.invalidDates.some((d) => d.isSame(m, 'day'));\n  };\n\n  isCustomDate = (date: Dayjs) => {\n    return date.month() === 0 || date.month() === 6 ? 'mycustomdate' : false;\n  };\n\n  isTooltipDate = (m: Dayjs) => {\n    const tooltip = this.tooltips.find((tt) => tt.date.isSame(m, 'day'));\n    return tooltip ? tooltip.text : false;\n  };\n  dateRange: any = {\n    startDate: '',\n    endDate: '',\n  };\n\n  datesUpdatedRange($event: any, type: string) {\n    this.startDate =\n      $event.startDate.$y +\n      '-' +\n      ($event.startDate.$M + 1) +\n      '-' +\n      $event.startDate.$D;\n    this.toDate =\n      $event.endDate.$y +\n      '-' +\n      ($event.endDate.$M + 1) +\n      '-' +\n      $event.endDate.$D;\n    this.retrieveTickets(false);\n  }\n\n  datesUpdatedSingle($event: any) {\n    console.log('single', $event);\n  }\n\n  datesUpdatedInline($event: Object) {\n    console.log('inline', $event);\n  }\n  savePageDetail() {\n    this.pageService.savePageDetail(window.location.href, this.page);\n    // var detail = {\n    //   url: window.location.href,\n    //   page: this.page\n    // }\n    // localStorage.setItem('previousPageDetail', JSON.stringify(detail));\n  }\n  getSavedTicketFilter() {\n    this.crud\n      .getRequest(`${requestUrl.getSavedTicketFilter}`)\n      .then((res: any) => {\n        this.filterTicketForm.controls['status'].setValue(\n          res?.data?.custom_filter?.status\n            ? res?.data?.custom_filter?.status\n            : ''\n        );\n        this.filterTicketForm.controls['category'].setValue(\n          res?.data?.custom_filter?.category\n            ? res?.data?.custom_filter?.category\n            : ''\n        );\n        this.filterTicketForm.controls['created_at'].setValue(\n          res?.data?.custom_filter?.created_at\n            ? res?.data?.custom_filter?.created_at\n            : ''\n        );\n        this.retrieveTickets(false);\n      });\n  }\n\n  getErrorList(id: any) {\n    this.crud\n      .getRequest(`${requestUrl.geterrorDetail}${id}`)\n      .then((res: any) => {\n        if (res) {\n          this.errorList = res.data;\n        }\n      });\n  }\n  downloadCsv(data: any[], fileName: string): void {\n    const csvContent = this.constructCsvContent(data);\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n\n    // Create link element to initiate download\n    const a = document.createElement('a');\n    a.href = window.URL.createObjectURL(blob);\n    a.download = fileName;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  }\n\n  private constructCsvContent(data: any[]): string {\n    let csvContent =\n      'Ticket ID,Created By,Status,Subject,Request Id,Category,Credit,Created,Assign To\\n';\n\n    // Loop through the data and construct CSV rows\n    data.forEach((row) => {\n      csvContent += `${row.ids},${row.created_by?.first_name} ${row.created_by?.last_name\n        } ,${row.ticket_status?.team_status},${this.truncateText(row?.subject, 20) || 'NA'\n        } ,${row?.request_id || 'NA'},${row.category},${row.file_request?.credit_spent.credit || 'NA'\n        } ${row.file_request?.credit_spent?.credit\n          ? row?.file_request?.credit_spent?.credit_type == 1\n            ? 'File Key'\n            : row?.file_request?.credit_spent?.credit_type == 2\n              ? 'EVC'\n              : 'Function Key'\n          : ''\n        },${this.noti.formatDate(row?.created_at)},${row.assigned_to?.first_name\n        } ${row.assigned_to?.last_name}\\n`;\n    });\n\n    return csvContent;\n  }\n  // tdControl(type: string) {\n  //   if (type == 'addi_info')\n  //     this.addi_info = !this.addi_info;\n  //   else if (type == 'ctrl_unit')\n  //     this.ctrl_unit = !this.ctrl_unit;\n  //   else if (type == 'country')\n  //     this.country = !this.country;\n  //   else if (type == 'engine_size')\n  //     this.engine_size = !this.engine_size;\n  //   else if (type == 'asso_custo')\n  //     this.asso_custo = !this.asso_custo;\n  //   else if (type == 'fuel_type')\n  //     this.fuel_type = !this.fuel_type;\n  //   else if (type == 'mileage')\n  //     this.mileage = !this.mileage;\n  //   else if (type == 'model')\n  //     this.model = !this.model;\n  //   else if (type == 'transmission')\n  //     this.transmission = !this.transmission;\n  //   else if (type == 'tuning_required')\n  //     this.tuning_required = !this.tuning_required;\n  //   else if (type == 'vehicle_VIN')\n  //     this.vehicle_VIN = !this.vehicle_VIN;\n  //   else if (type == 'vehicle_make')\n  //     this.vehicle_make = !this.vehicle_make;\n  //   else if (type == 'vehicle_registration')\n  //     this.vehicle_registration = !this.vehicle_registration;\n  //   else if (type == 'vehicle_year')\n  //     this.vehicle_year = !this.vehicle_year;\n  // }\n\n  getTicketCategory() {\n    this.crud.getRequest(`${requestUrl.getTicketCategory}`).then((res: any) => {\n      if (res) this.ticketCategories = res.data.results;\n    });\n  }\n\n\n\n  getUserByRole(event?: any) {\n    // Get all users at once instead of fetching role wise users.\n    // let roleid = event.target.value;\n    this._roleservice.getRoles({}).subscribe(\n      (res: any) => {\n        this.roleUserList = res.data;\n      },\n      (err: any) => { }\n    );\n  }\n\n  ticketAssignFormSubmit() {\n    const body = { user_id: this.ticketAssignForm.value?.user_id }\n\n    this._roleservice\n      .ticketAssignTo(this.ticketstatusid, body)\n      .subscribe(\n        (res: any) => {\n          this.toastr.success(res.message, '', { timeOut: 4000 });\n          document.getElementById('closeticketasignmodal')?.click();\n          this.retrieveTickets(false);\n        },\n        (err: any) => {\n          this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n        }\n      );\n  }\n  saveTicketDetail(ticket: any) {\n    localStorage.setItem('fileRequestData', JSON.stringify(ticket));\n  }\n  getTicketDetail(data: any) {\n    this.ticketstatusid = data.ids;\n    let id = data.ticket_status?.id != null ? data.ticket_status.id : 0;\n    this.ticketstatusForm.patchValue({ ticket_status: id });\n\n    let sharedata = {\n      assigned_to_name: data.assigned_to?.first_name,\n      assigned_to_email: data.assigned_to?.email,\n      ids: data.ids,\n      id: id,\n      ticketstatus: this.ticketStatus,\n      status:\n        data.ticket_status != null ? data.ticket_status.team_status : 'New',\n    };\n    localStorage.setItem('ticketsharedata', JSON.stringify(sharedata));\n  }\n\n  ticketstatusFormSubmit() {\n    let data = this.ticketstatusForm.value;\n    this._ticketservice.updateTicketStatus(this.ticketstatusid, data).subscribe(\n      (res: any) => {\n        this.toastr.success(res.message, '', { timeOut: 4000 });\n        this.retrieveTickets(false);\n        document.getElementById('closemodal')?.click();\n      },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      }\n    );\n  }\n  frTicketstatusFormSubmit() {\n    this._ticketservice\n      .updateFRTicketStatus(\n        this.frTicketstatusForm.value.ticket_status,\n        this.frId\n      )\n      .subscribe(\n        (res: any) => {\n          this.toastr.success(res.message, '', { timeOut: 4000 });\n          // this.retrieveTickets(false);\n          document.getElementById('closeFtmodal')?.click();\n          this.frTicketstatusForm.controls['ticket_status'].setValue('');\n        },\n        (err: any) => {\n          this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n        }\n      );\n  }\n\n  getRequestParams(\n    searchTitle: string,\n    page: number,\n    pageSize: number,\n    status: any,\n    category: any,\n    created_at: any,\n    filter: boolean\n  ): any {\n    let params: any = {};\n    if (searchTitle) {\n      params[`search`] = searchTitle;\n    }\n    if (page) {\n      params[`page`] = page;\n    }\n    if (pageSize) {\n      params[`page_size`] = pageSize;\n    }\n    if (status) {\n      params[`status`] = status;\n    }\n    if (category) {\n      params[`category`] = category;\n    }\n    if (created_at) {\n      params[`created_at`] = created_at;\n    }\n    params[`filter`] = filter;\n    if (this.startDate) params[`start_date`] = this.startDate;\n    if (this.toDate) params[`end_date`] = this.toDate;\n\n    return params;\n  }\n  searchTickets(e:any) {\n    this.page = 1;\n    this.searchKey = e;\n    this.searchTicketResult();\n  }\n  \n  searchTicketResult() {\n    if (this.searchKey.length > 0) {\n      this.crud\n        .getRequest(`admin/ticket/search?search=${this.searchKey}`)\n        .then((res: any) => {\n          this.modifyTicketDetails(res);\n        });\n    } else {\n      this.retrieveTickets(false);\n    }\n  }\n\n  retrieveTickets(filter: boolean, field?: string, order?: string): void {\n    const params = this.getRequestParams(\n      this.searchKey,\n      this.page,\n      this.pageSize,\n      this.status,\n      this.category,\n      this.created_at,\n      filter\n    );\n    if (field) {\n      this.sortField = field;\n      this.sortOrder = order;\n    }\n    if (this.sortField) {\n      params[`field`] = this.sortField;\n      params[`order_in`] = this.sortOrder;\n    }\n    if (this.status) {\n      this.getTicketFilterByTicketStatus();\n      return;\n    }\n    this._ticketservice.getTicket(params).subscribe(\n      (res: any) => {\n        this.modifyTicketDetails(res);\n      },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      }\n    );\n  }\n  modifyTicketDetails(res: any) {\n    this.tickets = res?.data?.results ? res?.data?.results : res?.data;\n    this.tickets?.forEach((element: any) => {\n      element['allVehicleDetail'] = element?.file_request\n        ? element?.file_request\n        : element?.vehicle_details;\n    });\n    this.showError = this.tickets?.length == 0 ? true : false;\n    this.totalTicket = res?.data?.count;\n\n    // if (this.ticketStatus?.length == 0) {\n    //   res.count_by_category.forEach((value: any, index: any) => {\n    //     if (value.id != 0) {\n    //       this.ticketStatus.push(value);\n    //     } else {\n    //       let nulldata = { id: 0, count: value.count, ticket_status: 'New' };\n    //       this.ticketStatus.unshift(nulldata);\n    //     }\n    //   });\n    // }\n    // this.ticketStatus = this.sort(this.ticketStatus, 'ticket_status');\n  }\n\n  getCountByCategory() {\n    this._ticketservice.getStatusCount().subscribe((res: any) => {\n      if (res) {\n        if (this.ticketStatus?.length == 0) {\n          res.count_by_category.forEach((value: any, index: any) => {\n            if (value.id != 0) {\n              this.ticketStatus.push(value);\n            } else {\n              let nulldata = { id: 0, count: value.count, ticket_status: 'New' };\n              this.ticketStatus.unshift(nulldata);\n            }\n          });\n        }\n        this.ticketStatus = this.sort(this.ticketStatus, 'ticket_status');\n      }\n    })\n  }\n\n  getTicketsOnFilter(field: any, type: any) {\n    let params: any = {};\n    params[`field`] = field;\n    params[`order_in`] = type;\n    params[`filter`] = false;\n    this._ticketservice.getTicket(params).subscribe(\n      (res: any) => {\n        this.tickets = res.data.results;\n        this.showError = this.tickets.length == 0 ? true : false;\n        this.totalTicket = res.data.count;\n        if (this.ticketStatus.length == 0) {\n          res.count_by_category.forEach((value: any, index: any) => {\n            if (value.id != 0) {\n              this.ticketStatus.push(value);\n            } else {\n              let nulldata = {\n                id: 0,\n                count: value.count,\n                ticket_status: 'New',\n              };\n              this.ticketStatus.unshift(nulldata);\n            }\n          });\n        }\n      },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      }\n    );\n  }\n\n  handlePageChange(event: number): void {\n    this.page = event;\n    if (this.status) {\n      this.getTicketFilterByTicketStatus();\n      return;\n    }\n    this.retrieveTickets(!!this.searchKey);\n  }\n\n  onKeyUp(x: any) {\n    this.title = x;\n    this.page = 1;\n    this.retrieveTickets(false);\n  }\n\n  filterTicketFormSubmit() {\n    this.page = 1;\n    this.category = this.filterTicketForm.value.category;\n    this.status = this.filterTicketForm.value.status;\n    this.created_at = this.filterTicketForm.value.created_at;\n    this.getTicketByFilter();\n    document.getElementById('closefilterconvas')?.click();\n  }\n\n  getTicketByFilter() {\n    let params: any = {};\n    if (this.status) {\n      params[`status`] = this.status;\n    }\n    if (this.category) {\n      params[`category`] = this.category;\n    }\n    if (this.created_at) {\n      params[`created_at`] = this.created_at;\n    }\n    this._ticketservice.getTicketOnFilter(params).subscribe(\n      (res: any) => {\n        this.modifyTicketDetails(res);\n      },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      }\n    );\n  }\n  restFilter() {\n    if (\n      this.filterTicketForm.value.status == '' &&\n      this.filterTicketForm.value.category == '' &&\n      this.filterTicketForm.value.created_at == ''\n    ) {\n      document.getElementById('closefilterconvas')?.click();\n    } else {\n      this.category = '';\n      this.status = '';\n      this.created_at = '';\n      this.filterTicketForm.controls['status'].setValue('');\n      this.filterTicketForm.controls['category'].setValue('');\n      this.filterTicketForm.controls['created_at'].setValue('');\n\n      this.retrieveTickets(true);\n      document.getElementById('closefilterconvas')?.click();\n    }\n  }\n\n  filterByStatus() {\n    localStorage.setItem('ticketids', this.ticketIds.toString());\n    this.status = this.ticketIds.toString();\n    this.page = 1;\n    if (this.status) {\n      this.page = 1;\n      this.getTicketFilterByTicketStatus();\n    }\n    else this.retrieveTickets(false);\n    document.getElementById('closeticketstatusconvas')?.click();\n  }\n\n  getTicketFilterByTicketStatus() {\n    let sortedParam = '';\n    if (this.sortField) {\n      sortedParam = `&field=${this.sortField}&order_in=${this.sortOrder}`;\n    }\n    this.crud\n      .getRequest(`admin/ticket/filter_by_status?status=${this.status}&page=${this.page}&page_size=${this.pageSize}${sortedParam}`)\n      .then((res: any) => {\n        this.modifyTicketDetails(res);\n      });\n  }\n  getFileList(id: any) {\n    this.crud\n      .getRequest(`${requestUrl.fileDownloadList}${id}`)\n      .then((res: any) => {\n        if (res) {\n          this.downloadFileList = res.data;\n        }\n      });\n  }\n  downloadFIle(file: any, i: number) {\n    this.crud\n      .getRequest(`${cusRequestUrl.updateDownloadCount}${file.id}`)\n      .then((res: any) => {\n        if (res) {\n          this.downloadFileList[i].downloaded_times = res.counter;\n          window.open(file.url, '_blank');\n        }\n      });\n  }\n  onChangeTicketStatus(tkid: any) {\n    if (this.ticketIds.includes(tkid)) {\n      const index = this.ticketIds.indexOf(tkid);\n      if (index > -1) {\n        this.ticketIds.splice(index, 1);\n      }\n    } else {\n      this.ticketIds.push(tkid);\n    }\n  }\n\n  ngOnDestroy() {\n    localStorage.removeItem('ticketids');\n  }\n\n  truncateText(text: string, maxLength: number): string {\n    if (text?.trim().length > maxLength) {\n      return text.substring(0, maxLength) + '...';\n    }\n    return text;\n  }\n\n  sort(array: any, key: any) {\n    return array.sort((a: any, b: any) => {\n      var nameA = a[key].toUpperCase();\n      var nameB = b[key].toUpperCase();\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n  deleteSavedFilter() {\n    this.crud\n      .deleteRequest(`admin/ticket/group?filter_id=${this.selectedFilter?.id}`)\n      .then((res: any) => {\n        if (res) {\n          this.toastr.success(res.message);\n          this.getFilterList();\n        }\n      });\n  }\n\n\n  vehDetail: any;\n  isStandaloneTicket = false;\n  getVehicleDetail(ticket: any) {\n    if (ticket?.vehicle_details?.model) {\n      this.isStandaloneTicket = true;\n      this.vehDetail = ticket.vehicle_details; \n      return;\n    }\n    this.isStandaloneTicket = false;\n    \n    this.crud\n      .getRequest(\n        `file/service/request/detail/${ticket?.request_id.replace(\n          'FR',\n          ''\n        )}`\n      )\n      .then((res: any) => {\n        this.vehDetail = res;\n        if (\"other_fields\" in this.vehDetail && this.vehDetail.other_fields) {\n          this.vehDetail.other_fields = this.vehDetail.other_fields.replaceAll('_', ' ').replaceAll(',', ', ');\n        }\n      });\n    // }\n    // else {\n    //   this.vehDetail = this.ticketDetail?.vehicle_details;\n    // }\n  }\n\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-ticket',\n  templateUrl: './ticket.component.html',\n  styleUrls: ['./ticket.component.scss']\n})\nexport class TicketComponent {\n\n}\n","<router-outlet></router-outlet>\n","<section class=\"user-list\">\n\n  <div class=\"ulist-div\">\n    <div class=\"u-add\">\n      <h2>Ticket ID: {{ticketId}} </h2>\n      <div class=\"u-add-right\">\n        <div routerLink=\"/admin/tickets\">\n          <i class=\"fa fa-long-arrow-left\" title=\"Back\" aria-hidden=\"true\"></i>\n        </div>\n        <div *ngIf=\"ticketDetail?.request_id\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#activeUser\" title=\"Active User\">\n          <i class=\"fa fa-address-book\" aria-hidden=\"true\"></i>\n        </div>\n        <div (click)=\"getVehicleDetail()\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#vehicleDetail\" title=\"Vehicle Details\">\n          <i class=\"fa fa-car\" aria-hidden=\"true\"></i>\n        </div>\n        <div (click)=\"getKnowledgeBaseDetailSidebar()\" id=\"knowBaseSide\" data-bs-toggle=\"offcanvas\"\n          data-bs-target=\"#KB\" title=\"Knowledgebase\">\n          <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>\n        </div>\n        <!-- Download all files options -->\n        <div \n          *ngIf=\"ticketDetail?.request_id && permissions?.ticket == 'Full access'\"\n          data-bs-toggle=\"modal\" data-bs-target=\"#chngeEmailModal\"\n          title=\"Download files\" (click)=\"getFileList()\">\n          <i class=\"fa fa-download\" aria-hidden=\"true\"></i>\n        </div>\n        <div data-bs-toggle=\"offcanvas\" data-bs-target=\"#ticketDetail\" title=\"View Tickets\">\n          <i class=\"fa fa-eye\" aria-hidden=\"true\"></i>\n        </div>\n        <div data-bs-toggle=\"offcanvas\" data-bs-target=\"#filter\" title=\"Edit Ticket\" (click)=\"getUserByRole()\">\n          <i class=\"fa fa-edit\"></i>\n        </div>\n\n        <div data-bs-toggle=\"modal\" data-bs-target=\"#changeStatusModel\" title=\"Update FR Status\">\n          <i class=\"fa fa-indent\" aria-hidden=\"true\"></i>\n        </div>\n      </div>\n    </div>\n    <hr style=\"margin-inline: 0!important;\"/>\n\n    <div class=\"tholder\">\n      <div class=\"tleft\" [ngClass]=\"isexpandedMsgWindow==true?'large':'small'\">\n        <div class=\"faDiv\">\n          <i (click)=\"expandMsgWindow()\" class=\"fa fa-expand\"></i>\n        </div>\n        <div class=\"tabList\">\n          <ul>\n            <div style=\"position: relative;\">\n              <li  #popup (click)=\"isActiveUsersVisible = !isActiveUsersVisible\" class=\"usersTab\" [class.badge]=\"!isActiveUsersVisible && activeUsersCount\" [attr.data-count]=\"activeUsersCount\" title=\"Active Users\">\n                  <svg width=\"1.2rem\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g>\n                    <g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g>\n                    <g id=\"SVGRepo_iconCarrier\">\n                      <path d=\"M8 7C9.65685 7 11 5.65685 11 4C11 2.34315 9.65685 1 8 1C6.34315 1 5 2.34315 5 4C5 5.65685 6.34315 7 8 7Z\" fill=\"#394a9c\"></path>\n                      <path d=\"M14 12C14 10.3431 12.6569 9 11 9H5C3.34315 9 2 10.3431 2 12V15H14V12Z\" fill=\"#394a9c\"></path>\n                    </g>\n                  </svg>\n                  <span>Active Viewers</span>\n              </li>\n              <div #popupContainer class=\"active-user-popup\" [class.active]=\"isActiveUsersVisible\">\n                <ng-container *ngTemplateOutlet=\"activeUsers\"></ng-container>\n              </div>\n            </div>\n\n            <li (click)=\"tab='conversion'\" [ngClass]=\"tab=='conversion' ? 'activeTab' : ''\" title=\"Conversation\">\n              <img [src]=\"tab=='conversion'?'assets/images/icon/conversationwhite.svg':'assets/images/icon/conversationBase.svg'\" alt=\"Conversation\"/>\n              <span>Conversation</span>\n            </li> \n            <li (click)=\"tab='information'\" [ngClass]=\"tab=='information' ? 'activeTab' : ''\" title=\"Information\">\n              <!-- <img [src]=\"tab=='information'?'assets/images/icon/conversationwhite.svg':'assets/images/icon/conversion.png'\" alt=\"Information\"/> -->\n              <i class=\"fa fa-info\" style=\"width:18px\" aria-hidden=\"true\"></i>\n              <span>Information</span>\n            </li>\n            <li *ngIf=\"ticketDetail?.file_request;\" (click)=\"tab='files';getFileList()\"\n                [ngClass]=\"tab=='files' ? 'activeTab' : ''\" title=\"File\">\n                <i class=\"fa fa-file-o\" aria-hidden=\"true\"></i>\n                <span>File</span>\n            </li>\n            <li (click)=\"tab = 'attachment';getAttachments()\" [ngClass]=\"tab=='attachment' ? 'activeTab' : ''\" title=\"Attachment\">\n              <img [src]=\"tab=='attachment'?'assets/images/icon/Attachmentwhite.svg':'assets/images/icon/attachment.png'\" alt=\"attachment\" />\n              <span>Attachment</span>\n            </li>\n            <li (click)=\"tab='history'; getChatHistory()\" [ngClass]=\"tab=='history' ? 'activeTab' : ''\" title=\"History\">\n              <img [src]=\"tab=='history'?'assets/images/icon/Historywhite.svg':'assets/images/icon/clock.png'\" alt=\"history\" alt=\"history\" />\n              <span>History</span>\n            </li>\n            <li (click)=\"tab='kbase';getKnowledgeBaseDetail()\" [ngClass]=\"tab=='kbase' ? 'activeTab' : ''\" title=\"Knowledgebase\">\n              <img [src]=\"tab=='kbase'?'assets/images/icon/Knowledgewhite.svg':'assets/images/icon/knowledgeBase.svg'\" alt=\"knowledge\" />\n              <span>Knowledgebase</span>\n            </li>\n            <li (click)=\"tab='notes'; getNotes()\" [ngClass]=\"tab=='notes' ? 'activeTab' : ''\" title=\"Notes\">\n              <!-- <img [src]=\"tab=='notes'?'assets/images/icon/Knowledgewhite.svg':'assets/images/icon/knowledgeBase.png'\" alt=\"notes\" /> -->\n              <i class=\"fa fa-clipboard\" aria-hidden=\"true\"></i>\n              <span>Notes</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"tright\" [ngClass]=\"isexpandedMsgWindow==true?'small':'large'\">\n        <div *ngIf=\"tab=='conversion'\">\n          <div class=\"chatWindow\" #scroll infinite-scroll [infiniteScrollDistance]=\"distance\" [scrollWindow]=\"false\">\n            <div *ngIf=\"isConversationLoading\" class=\"h-100 d-flex align-items-center justify-content-center\" style=\"min-height: 300px;\">\n              <svg width=\"6rem\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><radialGradient id=\"a11\" cx=\".66\" fx=\".66\" cy=\".3125\" fy=\".3125\" gradientTransform=\"scale(1.5)\"><stop offset=\"0\" stop-color=\"#2315FF\"></stop><stop offset=\".3\" stop-color=\"#2315FF\" stop-opacity=\".9\"></stop><stop offset=\".6\" stop-color=\"#2315FF\" stop-opacity=\".6\"></stop><stop offset=\".8\" stop-color=\"#2315FF\" stop-opacity=\".3\"></stop><stop offset=\"1\" stop-color=\"#2315FF\" stop-opacity=\"0\"></stop></radialGradient><circle transform-origin=\"center\" fill=\"none\" stroke=\"url(#a11)\" stroke-width=\"15\" stroke-linecap=\"round\" stroke-dasharray=\"200 1000\" stroke-dashoffset=\"0\" cx=\"100\" cy=\"100\" r=\"70\"><animateTransform type=\"rotate\" attributeName=\"transform\" calcMode=\"spline\" dur=\"2\" values=\"360;0\" keyTimes=\"0;1\" keySplines=\"0 0 1 1\" repeatCount=\"indefinite\"></animateTransform></circle><circle transform-origin=\"center\" fill=\"none\" opacity=\".2\" stroke=\"#2315FF\" stroke-width=\"15\" stroke-linecap=\"round\" cx=\"100\" cy=\"100\" r=\"70\"></circle></svg>\n            </div>\n            <ng-container *ngIf=\"!isConversationLoading\">\n              <div class=\"conversion-inner\" *ngFor=\"let con of conversations\">\n                <div class=\"c_part\"\n                  [ngStyle]=\"{'align-items':customerId !== con?.sender ? 'flex-end' : 'flex-start'}\">\n                  <div [ngStyle]=\"{'width':con.message_type == 'article' ? '100%':'65%'}\">\n                    <div class=\"lpart\">\n                      <div class=\"nameDesc\">\n                        <div [ngClass]=\"customerId !== con?.sender?'nameDesc-inner_right':'nameDesc-inner_left'\">\n                          <div>\n                            <img [src]=\"con?.sender_image || 'assets/images/icon/avtarIcon.jpeg'\" onerror=\"this.src = 'assets/images/icon/avtarIcon.jpeg'\" alt=\"avatar\" />\n                          </div>\n                          <div class=\"flex flex-column\">\n                            <span> {{con?.sender_name | titlecase}} </span>\n                            <p class=\"mb-0\" [class.text-end]=\"customerId !== con?.sender\" style=\"font-size: .85rem;\"> {{notification.formatDate(con?.created_at)}}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div *ngIf=\"con.message_type== 'file'\" class=\"text rightChatBox justify-content-end\" \n                      [class.pushLeft]=\"customerId === con?.sender\"\n                      [class.pushRight]=\"customerId !== con?.sender\">\n                      \n                      <div\n                        *ngIf=\"con?.file && (con.file.endsWith('.png') || con.file.endsWith('.jpg') || con.file.endsWith('.jpeg') || con.file.endsWith('.webp') || con.file.endsWith('.svg'))\">\n                        <a [href]=\"con.file\" target=\"_blank\"><img style=\"background-color: #C0C0C0;\" class=\"imgF\" [src]=\"con.file\" alt=\"file\"></a>\n                        <p class=\"file-name\">{{decodeFileNameFromUrl(con.file)}}</p>\n                      </div>\n\n                      <div\n                        *ngIf=\"\n                        !(con?.file && \n                        (con.file.endsWith('.png') || \n                        con.file.endsWith('.jpg') || \n                        con.file.endsWith('.jpeg') || \n                        con.file.endsWith('.webp') || \n                        con.file.endsWith('.svg')))\n                        &&\n                        !(con.file && (con.file.endsWith('.xlsx') || \n                        con.file.endsWith('.doc') || \n                        con.file.endsWith('.pdf') || \n                        con.file.endsWith('.ods') || \n                        con.file.endsWith('.odt') || \n                        con.file.endsWith('.txt') || \n                        con.file.endsWith('.docx') || \n                        con.file.endsWith('.html') || \n                        con.file.endsWith('.json')))\">\n                        <a [href]=\"con.file\" target=\"_blank\"><img class=\"imgF\" src=\"assets/images/icon/filesIcon.png\" alt=\"file\"></a>\n                        <p class=\"file-name\">{{decodeFileNameFromUrl(con.file)}}</p>\n                      </div>\n\n                      <div class=\"docView\"\n                        *ngIf=\"con.file && (con.file.endsWith('.xlsx') || con.file.endsWith('.doc') || con.file.endsWith('.pdf') || con.file.endsWith('.ods') || con.file.endsWith('.odt')\n                        || con.file.endsWith('.txt') || con.file.endsWith('.docx') || con.file.endsWith('.html') || con.file.endsWith('.json'))\">\n                        <div class=\"docViewInner\">\n                          <div>\n                            <i class=\"fa fa-2x fa-file-text-o\" style=\"color: blue;\" aria-hidden=\"true\"></i>\n                            <span style=\"word-break: break-all;\" class=\"file-name\">\n                              {{decodeFileNameFromUrl(con.file)}}</span>\n                          </div>\n                          <a [href]=\"con.file\" target=\"_blank\" class=\"ms-2\">\n                            <i class=\"fa fa-2x fa-arrow-circle-o-down\" aria-hidden=\"true\"></i>\n                          </a>\n                        </div>\n                      </div>\n                      <pre\n                        style=\"cursor: pointer; white-space: break-spaces;word-break: auto-phrase;\"\n                        *ngIf=\"con.message\"\n                        [innerHTML]=\"con.message\">\n                      </pre>\n\n                    </div>\n                    <div *ngIf=\"con.message_type== 'text'\" class=\"text\"\n                      [ngClass]=\"customerId !== con?.sender?'rightChatBox':'leftChatBox'\">\n                      <a *ngIf=\"con.file\" [href]=\"con.file\" target=\"_blank\">\n                        <img\n                          [ngClass]=\"con.file.endsWith('.png') || con.file.endsWith('.jpg') ||con.file.endsWith('.jpeg')?'imgF':'imgD'\"\n                          [src]=\"con.file.endsWith('.png') || con.file.endsWith('.jpg') ||con.file.endsWith('.jpeg')?con.file:'assets/images/icon/filesIcon.png'\"\n                          alt=\"file\">\n                      </a>\n                      <pre *ngIf=\"con.message\" style=\"white-space: pre-wrap;word-break: auto-phrase;\"\n                        class=\"e2e-inner-html-bound mb-0\" [innerHTML]=\"con.message\">\n                      </pre>\n                    </div>\n                    <div *ngIf=\"con.message_type== 'article'\" class=\"text\" [ngClass]=\"customerId !== con?.sender?'rightChatBox':'leftChatBox'\" style=\"margin-right: 2rem;\">\n                      <p *ngIf=\"con.message\" class=\"e2e-inner-html-bound\" [innerHTML]=\"con.message\"> </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ng-container>\n          </div>\n          <form [formGroup]=\"conversationForm\" (ngSubmit)=\"conversationFormSubmit()\">\n            <div class=\"textarea\">\n              <div class=\"uploadFileView\">\n                <div>\n                  <img *ngIf=\"conversationForm.controls['file'].value != ''\" src=\"assets/images/icon/cross-small.svg\"\n                    alt=\"close\"\n                    [ngClass]=\"(fileType== 'png' || fileType== 'jpg' || fileType== 'jpeg')?'fileCross':'docCross'\"\n                    (click)=\"conversationForm.controls['file'].setValue('');conversationForm.controls['message_type'].setValue('text')\" />\n                  <img *ngIf=\"conversationForm.controls['file'].value != ''\"\n                    [ngClass]=\"(fileType== 'png' || fileType== 'jpg' || fileType== 'jpeg')?'fileimg':'docIcon'\"\n                    [src]=\"(fileType== 'png' || fileType== 'jpg' || fileType== 'jpeg')?conversationForm.controls['file'].value:'assets/images/icon/filesIcon.png'\"\n                    alt=\"close\">\n                </div>\n              </div>\n              <textarea *ngIf=\"!ckeEditor\" class=\" form-control\" formControlName=\"message\"\n                placeholder=\"Enter your message here\"> </textarea>\n                <ckeditor *ngIf=\"ckeEditor\" #ckeditor formControlName=\"message\"></ckeditor>\n              <div class=\"btnGroup\">\n                <a (click)=\"retrieveTemplate()\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#ADDTEMPLATE\"><img\n                    src=\"assets/images/icon/msg.png\" alt=\"message\" /></a>\n                <div class=\"fileupload\">\n                  <div class=\"dropup\">\n                    <img src=\"assets/images/icon/fileupload.png\" (click)=\"fileInput.click()\"  alt=\"file upload\" class=\"dropdown-toggle\"/>\n                    <input class=\"hidden\" type=\"file\" #fileInput (change)=\"selectFile($event)\" />\n\n                    <!-- <ul class=\"dropdown-menu\">\n                      <li>\n                        <div class=\"fileUploadOption\">\n                          <a class=\"dropdown-item\"><i class=\"fa fa-files-o\" aria-hidden=\"true\"></i>Document</a>\n                          <input type=\"file\" accept=\"file/*\" (change)=\"selectFile($event)\" />\n                        </div>\n                      </li>\n                      <li>\n                        <div class=\"fileUploadOption\">\n                          <a class=\"dropdown-item\"><i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>Image</a>\n                          <input type=\"file\" accept=\"image/*\" (change)=\"selectFile($event)\" />\n                        </div>\n                      </li>\n                    </ul> -->\n                  </div>\n                </div>\n                <button *ngIf=\"permissions.ticket == 'Full access'\" type=\"submit\" [disabled]=\"conversationForm.invalid\" class=\"btn btn-primary\">\n                  Send<img src=\"assets/images/icon/mailsend.png\" alt=\"send mail\" />\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div *ngIf=\"tab=='information'\">\n          <div class=\"service-header\">\n            <h2>Ticket Information</h2>\n          </div>\n          <div class=\"viewInfo\">\n            <div>\n              <div>\n                <div>\n                  <p>Created By</p>\n                </div>\n                <div style=\"display: block;\">\n                  <span> {{ticketDetail?.created_by.first_name}} {{ticketDetail?.created_by.last_name}} </span><br>\n                  <span>{{ticketDetail?.created_by.email}}</span>\n                </div>\n              </div>\n              <div>\n                <div>\n                  <p>Assigned To</p>\n                </div>\n                <div style=\"display: block;\">\n                  <span> {{ticketDetail?.assigned_to.first_name}} {{ticketDetail?.assigned_to.last_name}} </span><br>\n                  <span>{{ticketDetail?.assigned_to.email}}</span>\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <div>\n                  <p>Created</p>\n                </div>\n                <div>\n                  <span>{{notification.formatDate(ticketDetail?.created_at)}}</span>\n                </div>\n              </div>\n              <div>\n                <div>\n                  <p>Modified</p>\n                </div>\n                <div>\n                  <span>{{notification.formatDate(ticketDetail?.updated_at)}}</span>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <div>\n                <div>\n                  <p>Subject</p>\n                </div>\n                <div>\n                  <span>{{ticketDetail?.subject}}</span>\n                </div>\n              </div>\n              <div>\n                <div>\n                  <p>Status</p>\n                </div>\n                <div>\n                  <span>{{ticketDetail?.ticket_status?.team_status || 'New'}}</span>\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <div>\n                  <p>Category</p>\n                </div>\n                <div>\n                  <span>{{ticketDetail?.category}}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"description\">\n              <div>\n                <div>\n                  <p>Description</p>\n                </div>\n                <div>\n                  <span>{{ticketDetail?.description}}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"description\">\n              <div>\n                <div>\n                  <p>Conversations</p>\n                </div>\n                <div>\n                  <span>{{conversationsCount}}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div *ngIf=\"tab=='files' && ticketDetail?.file_request\">\n          <section class=\"user-list\">\n            <ul class=\"breadcrumb\">\n              <li class=\"breadcrumb-item\"><a routerLink=\"/admin\">Home</a></li>\n              <li class=\"breadcrumb-item\"><a routerLink=\"/admin/directory\">Directory</a></li>\n              <li class=\"breadcrumb-item\"><a routerLink=\"/admin/directory/view-directory\" routerLinkActive=\"active\">View\n                  Directory</a></li>\n            </ul>\n\n            <div class=\"ulist-div\">\n              <div class=\"u-add\">\n                <h2>Directory</h2>\n                <div class=\"u-add-right\">\n                </div>\n              </div>\n              <hr />\n              <div class=\"directory-inner\">\n                <div *ngIf=\"isDirectoryLoading\" class=\"h-100 d-flex align-items-center justify-content-center\">\n                  <svg width=\"6rem\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><radialGradient id=\"a11\" cx=\".66\" fx=\".66\" cy=\".3125\" fy=\".3125\" gradientTransform=\"scale(1.5)\"><stop offset=\"0\" stop-color=\"#2315FF\"></stop><stop offset=\".3\" stop-color=\"#2315FF\" stop-opacity=\".9\"></stop><stop offset=\".6\" stop-color=\"#2315FF\" stop-opacity=\".6\"></stop><stop offset=\".8\" stop-color=\"#2315FF\" stop-opacity=\".3\"></stop><stop offset=\"1\" stop-color=\"#2315FF\" stop-opacity=\"0\"></stop></radialGradient><circle transform-origin=\"center\" fill=\"none\" stroke=\"url(#a11)\" stroke-width=\"15\" stroke-linecap=\"round\" stroke-dasharray=\"200 1000\" stroke-dashoffset=\"0\" cx=\"100\" cy=\"100\" r=\"70\"><animateTransform type=\"rotate\" attributeName=\"transform\" calcMode=\"spline\" dur=\"2\" values=\"360;0\" keyTimes=\"0;1\" keySplines=\"0 0 1 1\" repeatCount=\"indefinite\"></animateTransform></circle><circle transform-origin=\"center\" fill=\"none\" opacity=\".2\" stroke=\"#2315FF\" stroke-width=\"15\" stroke-linecap=\"round\" cx=\"100\" cy=\"100\" r=\"70\"></circle></svg>\n                </div>\n                <div *ngIf=\"!isDirectoryLoading\" class=\"responsive-tbl\">\n                  <table>\n                    <thead>\n                      <th>Title</th>\n                      <th>Created at</th>\n                      <th>Size</th>\n                      <th>Download</th>\n                    </thead>\n                    <tr *ngFor=\"let file of downloadFileList;let i = index\">\n                      <td> {{file?.title}} </td>\n                      <td style=\"text-align: left;\">{{notification.formatDate(file?.created_at)}}</td>\n                      <td>{{ file?.file_size | fileSize }}</td>\n                      <td> <a class=\"eyeIcon\" style=\"margin: auto;\" (click)=\"downloadFIle(file,i)\"><i\n                            class=\"fa fa-download\" title=\"Download\" aria-hidden=\"true\"></i></a> </td>\n                    </tr>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n        <div *ngIf=\"tab=='attachment'\" >\n          <!-- Add file start-->\n\n          <div class=\"addFile\" #scroll>\n            <form [formGroup]=\"attachmentForm\">\n              <div class=\"d-flex\">\n                <div class=\"d-flex flex-column \" style=\"width:38%;\">\n                  <label for=\"\">File Type</label>\n                  <select class=\"form-control\" formControlName=\"attachement_type\">\n                    <option value=\"Select File Type\" disabled> Select File Type</option>\n                    <option value=\"1\">Tuning File</option>\n                    <option value=\"2\">Basic Attachment</option>\n                  </select>\n                </div>\n                <div class=\"d-flex flex-column\" style=\"width:38%;\">\n                  <label>File</label>\n                  <input type=\"file\" #fileInput class=\"form-control\" (change)=\"onFileChange($event)\" />\n                </div>\n                <div class=\"d-flex flex-column justify-content-end\" style=\"width: 15%;\">\n                  <label for=\"\"></label>\n                  <button type=\"button\" *ngIf=\"permissions.user_management == 'Full access'\" class=\"btn btn-primary form-control\" (click)=\"sendAttachment()\">Submit</button>\n                </div>\n              </div>\n              <div class=\"d-flex justify-content-between mt-4\">\n              </div>\n              <div class=\"d-flex justify-content-end mt-4\">\n              </div>\n            </form>\n          </div>\n          <div class=\"addfile-inner\">\n            <div *ngIf=\"isLoading\" class=\"h-100 d-flex align-items-center justify-content-center\">\n              <svg width=\"6rem\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><radialGradient id=\"a11\" cx=\".66\" fx=\".66\" cy=\".3125\" fy=\".3125\" gradientTransform=\"scale(1.5)\"><stop offset=\"0\" stop-color=\"#2315FF\"></stop><stop offset=\".3\" stop-color=\"#2315FF\" stop-opacity=\".9\"></stop><stop offset=\".6\" stop-color=\"#2315FF\" stop-opacity=\".6\"></stop><stop offset=\".8\" stop-color=\"#2315FF\" stop-opacity=\".3\"></stop><stop offset=\"1\" stop-color=\"#2315FF\" stop-opacity=\"0\"></stop></radialGradient><circle transform-origin=\"center\" fill=\"none\" stroke=\"url(#a11)\" stroke-width=\"15\" stroke-linecap=\"round\" stroke-dasharray=\"200 1000\" stroke-dashoffset=\"0\" cx=\"100\" cy=\"100\" r=\"70\"><animateTransform type=\"rotate\" attributeName=\"transform\" calcMode=\"spline\" dur=\"2\" values=\"360;0\" keyTimes=\"0;1\" keySplines=\"0 0 1 1\" repeatCount=\"indefinite\"></animateTransform></circle><circle transform-origin=\"center\" fill=\"none\" opacity=\".2\" stroke=\"#2315FF\" stroke-width=\"15\" stroke-linecap=\"round\" cx=\"100\" cy=\"100\" r=\"70\"></circle></svg>\n            </div>\n            <div *ngIf=\"!isLoading\" class=\"responsive-tbl\">\n              <table>\n                <thead>\n                  <th>File type</th>\n                  <th>File title</th>\n                  <th>File size</th>\n                  <th>Uploaded by</th>\n                  <th>Uploaded at</th>\n                  <th>Action</th>\n                </thead>\n                <tr *ngFor=\"let attachment of attachments;index as i\">\n                  <td> {{attachment.attachement_type == 1?'Tuning File':'Basic Attachment'}} </td>\n                  <td> \n                    <div [title]=\"attachment.attachement_name\" class=\"d-block\" style=\"max-width: 20ch;overflow: hidden;text-overflow: ellipsis;\">\n                      {{attachment.attachement_name || 'NA'}} \n                    </div>\n                  </td>\n                  <td> {{attachment?.file_size | fileSize}} </td>\n                  <!-- <td> {{attachment.file || 'NA'}} </td> -->\n                  <td>\n                    <div class=\"tdholder\">\n                      <div class=\"tdinner\">\n                        <span>{{attachment?.uploaded_by.first_name || 'NA'}} {{attachment?.uploaded_by.last_name ||\n                          'NA'}}\n                        </span>\n                        <p>{{attachment?.uploaded_by.email || 'NA'}} </p>\n                      </div>\n                    </div>\n                  </td>\n                  <td> {{notification.formatDate(attachment?.created_at)}}</td>\n                  <td>\n                    <div class=\"actiontd\">\n                      <a href=\"{{attachment.file}}\" download=\"\" target=\"_blank\"> <img width=\"20px\" class=\"dimg\"\n                          src=\"assets/images/icon/download-icon.png\" alt=\"attachment\" />\n                        </a>\n                      <a class=\"edit\" style=\"cursor: pointer;border-color: red;\"\n                          title=\"Delete attachment\"\n                          (click)=\"setDeleteData(attachment.id, i)\" data-bs-toggle=\"modal\"\n                          data-bs-target=\"#deleteModal\">\n                          <i class=\"fa fa-trash-o\" style=\"color: red;\"></i>\n                      </a>\n                    </div>\n                  </td>\n                </tr>\n              </table>\n              <p class=\"errcls\" *ngIf=\"attachments.length ==0\" style=\"justify-content: center !important;\">\n                <span>Records not found</span>\n              </p>\n            </div>\n          </div>\n        </div>\n        <div *ngIf=\"tab=='history'\" style=\"min-height: 90%;\">\n          <div class=\"service-header\">\n            <h2>Timeline</h2>\n          </div>\n          <div *ngIf=\"isHistoryLoading\" class=\"h-100 d-flex align-items-center justify-content-center\" style=\"min-height: 300px;\">\n            <svg width=\"6rem\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><radialGradient id=\"a11\" cx=\".66\" fx=\".66\" cy=\".3125\" fy=\".3125\" gradientTransform=\"scale(1.5)\"><stop offset=\"0\" stop-color=\"#2315FF\"></stop><stop offset=\".3\" stop-color=\"#2315FF\" stop-opacity=\".9\"></stop><stop offset=\".6\" stop-color=\"#2315FF\" stop-opacity=\".6\"></stop><stop offset=\".8\" stop-color=\"#2315FF\" stop-opacity=\".3\"></stop><stop offset=\"1\" stop-color=\"#2315FF\" stop-opacity=\"0\"></stop></radialGradient><circle transform-origin=\"center\" fill=\"none\" stroke=\"url(#a11)\" stroke-width=\"15\" stroke-linecap=\"round\" stroke-dasharray=\"200 1000\" stroke-dashoffset=\"0\" cx=\"100\" cy=\"100\" r=\"70\"><animateTransform type=\"rotate\" attributeName=\"transform\" calcMode=\"spline\" dur=\"2\" values=\"360;0\" keyTimes=\"0;1\" keySplines=\"0 0 1 1\" repeatCount=\"indefinite\"></animateTransform></circle><circle transform-origin=\"center\" fill=\"none\" opacity=\".2\" stroke=\"#2315FF\" stroke-width=\"15\" stroke-linecap=\"round\" cx=\"100\" cy=\"100\" r=\"70\"></circle></svg>\n          </div>\n          <div *ngIf=\"!isHistoryLoading\" class=\"timeline-holder\">\n            <div class=\"timeline-inner\" *ngFor=\"let chat of chatHistory; let indexOfelement=index\">\n              <div [ngClass]=\"indexOfelement % 2 == 0 ? 'timeline-even' : 'timeline-odd'\">\n                <div class=\"timeline-inner\">\n                  <span>{{notification.formatDate(chat?.created_at)}}</span>\n                  <p>{{chat?.title}}</p>\n                  <span> {{chat?.message}} </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div *ngIf=\"tab=='kbase'\">\n          <div *ngIf=\"!articleAnswerViewBlock\" class=\"kbase\">\n            <div class=\"input-text\">\n              <div><input class=\"form-control\" type=\"text\" placeholder=\"Search Article\" [(ngModel)]=\"searchKey\"\n                  (keyUp.enter)=\"getKnowledgeBaseDetail()\">\n                <button (click)=\"getKnowledgeBaseDetail()\"><img src=\"assets/images/icon/Search.png\"\n                    alt=\"search\" /></button>\n              </div>\n            </div>\n            <div class=\"kbase-inner\"\n              *ngFor=\"let article of articleList | paginate : {itemsPerPage: pageSize,currentPage: page,totalItems: totalArticle};let i = index\">\n              <p>{{i+1}}. {{article?.title}} </p>\n              <span> {{article?.summary}} </span>\n              <span class=\"readmore\" (click)=\"getArticleDetailBlock(article.slug)\">Read More...</span>\n              <hr />\n            </div>\n          </div>\n          <div *ngIf=\"articleAnswerViewBlock\" class=\"kbase\">\n            <div class=\"backlink\" (click)=\"articleAnswerViewBlock = false\"><i\n                class=\"fa fa-long-arrow-left\"></i>&nbsp;Back\n            </div>\n            <div style=\"text-align: left;\">\n              <span style=\"font-weight: 600;\">{{answerDetailBlock.title}}</span>\n              <p [innerHTML]=\"answerDetailBlock.answer\" #answer></p>\n            </div>\n          </div>\n          <pagination-controls *ngIf=\"articleList?.length !=0 && !articleAnswerViewBlock\" class=\"pagination-crl\" previousLabel=\"Prev\"\n            nextLabel=\"Next\" (pageChange)=\"handlePageChange($event,'main')\"></pagination-controls>\n        </div>\n\n        <div *ngIf=\"tab=='notes'\">\n          <div class=\"notebox\">\n            <textarea class=\"\" [(ngModel)]=\"notes\" cols=\"30\" rows=\"5\" placeholder=\"Add Note...\"></textarea>\n            <div class=\"note\">\n              <button *ngIf=\"permissions.user_management == 'Full access'\" type=\"submit\" (click)=\"createTicketNote()\" [disabled]=\"!notes\" class=\"btn btn-primary\">\n                Add Note\n              </button>\n            </div>\n            <div class=\"noteList\">\n              <div\n                *ngFor=\"let note of noteDetails?.results | paginate : {itemsPerPage: notePageSize,currentPage: notePage,totalItems: totalNote};let i = index\">\n                <div *ngIf=\"note.note\">\n                  <img [src]=\"note.user.image?note.user.image:'assets/images/icon/avtarIcon.jpeg'\" alt=\"avtar\">\n                  <div>\n                    <p style=\"font-weight: 600;\"> {{note.user.first_name}} {{note.user.last_name}}\n                      ({{note.user.email}}), </p>\n                    <p>{{note.note}}</p>\n                    <span>{{notification.formatDate(note?.created_at)}}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <pagination-controls *ngIf=\"noteDetails.next || noteDetails.previous\" class=\"pagination-crl\" previousLabel=\"Prev\"\n              nextLabel=\"Next\" (pageChange)=\"handleNotePageChange($event)\"></pagination-controls>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n<!-- Add Template base side bar modal -->\n<div class=\"offcanvas offcanvas-end\" style=\"width: 650px;\" id=\"ADDTEMPLATE\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">\n      <!-- <i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i> -->\n      Template\n    </h1>\n    <div class=\"sideBarButton\">\n      <!-- <i *ngIf=\"articleAnswerView\" (click)=\"copyShare('share');\" class=\"fa fa-share-alt-square\" aria-hidden=\"true\"\n        title=\"Share\"></i>\n      <i *ngIf=\"articleAnswerView\" (click)=\"copyShare('copy');\" class=\"fa fa-clipboard\" aria-hidden=\"true\"\n        title=\"Copy\"></i> -->\n      <button type=\"button\" id=\"closefilterconvas\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\"></button>\n    </div>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body\">\n    <div class=\"responsive-tbl\">\n      <table>\n        <thead>\n          <!-- <th>Template ID </th> -->\n          <th> Category </th>\n          <th>Subject </th>\n          <th>Action</th>\n        </thead>\n        <tr\n          *ngFor=\"let template of templates | paginate : {itemsPerPage: temCanSize,currentPage: temCanpage,totalItems: totalTemplate};let i = index\">\n          <!-- <td> {{template.ids || ''}} </td> -->\n          <td> {{template?.template_type_display || ''}} </td>\n          <td style=\"text-align: left;\"> {{template?.subject || ''}} </td>\n          <td>\n            <a class=\"edit\" data-bs-toggle=\"modal\" data-bs-target=\"#editTemplate\" (click)=\"previewTemplateForm(template)\">\n              <i class=\"fa fa-share-alt-square\" title=\"Share\"></i>\n            </a>\n            <!-- <div data-bs-toggle=\"modal\" data-bs-target=\"#editTemplate\">\n              <i class=\"fa fa-share-alt-square\" title=\"Download\" aria-hidden=\"true\"></i>\n            </div> -->\n          </td>\n        </tr>\n      </table>\n      <p class=\"text-danger\" *ngIf=\"showError\">Records not found</p>\n\n    </div>\n    <pagination-controls *ngIf=\"templates.length !=0\" class=\"pagination-crl\" previousLabel=\"Prev\" nextLabel=\"Next\"\n      (pageChange)=\"handleTemplatePageChange($event)\"></pagination-controls>\n  </div>\n</div>\n<!-- Update ticket status Modal start here -->\n<div class=\"modal productModal mt-4\" id=\"updateStatusModal\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form [formGroup]=\"ticketstatusForm\" (ngSubmit)=\"ticketstatusFormSubmit()\">\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\">Update Status</h4>\n          <button type=\"button\" class=\"btn-close\" id=\"closemodal\" data-bs-dismiss=\"modal\"></button>\n        </div>\n        <hr />\n        <div class=\"modal-body\">\n          <div>\n            <label for=\"status\" class=\"form-label\">Status</label>\n            <select class=\"form-select\" formControlName=\"ticket_status\">\n              <option disabled>Select status</option>\n              <option *ngFor=\"let tkstatus of ticketstatus\" value=\"{{tkstatus.id}}\"> {{tkstatus.ticket_status ||\n                'New'}} </option>\n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn cancel\" id=\"closemodal\" data-bs-dismiss=\"modal\">Cancel</button>\n          <button *ngIf=\"permissions.user_management == 'Full access'\" type=\"submit\" [disabled]=\"ticketstatusForm.invalid\" id=\"closemodal\" data-bs-dismiss=\"modal\"\n            class=\"btn assign\">Update</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<!-- assign ticket Modal start here -->\n<div class=\"modal productModal mt-4\" id=\"assignToModal\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form [formGroup]=\"ticketAssignForm\" (ngSubmit)=\"ticketAssignFormSubmit()\">\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\">Assign To</h4>\n          <button type=\"button\" class=\"btn-close\" id=\"closemodal\" data-bs-dismiss=\"modal\"></button>\n        </div>\n        <hr />\n        <div class=\"modal-body\">\n          <!-- Removed roles dropdown for efficiency -->\n          <!-- <div>\n            <label for=\"status\" class=\"form-label\">Select Role</label>\n            <select class=\"form-select\" (change)=\"getUserByRole($event)\" formControlName=\"role_id\">\n              <option disabled>Select Role</option>\n              <option value=\"{{role.id}}\" *ngFor=\"let role of roleList\"> {{role.name}} </option>>\n            </select>\n          </div> -->\n          <div>\n            <label for=\"status\" class=\"form-label\">Users</label>\n            <select class=\"form-select\" formControlName=\"user_id\">\n              <option disabled>Select User</option>\n              <option value=\"{{user.user_id}}\" *ngFor=\"let user of roleUserList\"> {{user.first_name}} {{user.last_name}}\n                ({{user.email}}) </option>>\n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn cancel\" id=\"closemodal\" data-bs-dismiss=\"modal\">Cancel</button>\n          <button *ngIf=\"permissions.user_management == 'Full access'\" type=\"submit\" [disabled]=\"ticketAssignForm.invalid\" id=\"closemodal\" data-bs-dismiss=\"modal\"\n            class=\"btn assign\">Assign</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n<!-- Edit Action Modal Code -->\n<div class=\"offcanvas offcanvas-end\" id=\"filter\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">Action</h1>\n    <button type=\"button\" id=\"closefilterconvas\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\"></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body\">\n    <div>\n      <label>Update Ticket</label>\n      <div class=\"modalTabStatus\">\n        <div class=\"fdiv\">\n          <div>\n            <span> Change Status: </span>\n            <span data-bs-toggle=\"modal\" data-bs-target=\"#updateStatusModal\"> <i class=\"fa fa-edit edit\"></i> </span>\n          </div>\n          <div>\n            <span> Assign To: </span>\n            <span data-bs-toggle=\"modal\" data-bs-target=\"#assignToModal\"> <i class=\"fa fa-edit edit\"></i> </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <br>\n    <form>\n      <div style=\"position: relative;\">\n        <label for=\"\">Tag</label>\n        <div class=\"form-group addTagsChip LinkedInSearchMatChip\">\n          <mat-form-field class=\"example-chip-list\" appearance=\"fill\">\n            <mat-chip-grid #chipList aria-label=\"Industry Selection\">\n              <mat-chip *ngFor=\"let industry of selectedIndustry\" (removed)=\"removeKeys(industry)\">\n                {{industry}}\n                <button matChipRemove>\n                  <mat-icon>cancel</mat-icon>\n                </button>\n              </mat-chip>\n              <input style=\"border: none; background: none; padding: 0px; margin: 0px; overflow: scroll; height: 40px;\"\n                #industryInput [formControl]=\"industryCtrl\" [matAutocomplete]=\"auto\" [matChipInputFor]=\"chipList\"\n                [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\" (matChipInputTokenEnd)=\"addKeys($event)\">\n            </mat-chip-grid>\n            <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"selectedKeys($event)\">\n              <mat-option *ngFor=\"let industry of industryList\" [value]=\"industry\">\n                <div class=\"profile\">\n                  <img [src]=\"industry.image ?industry.image:'assets/images/icon/customer-profile.png'\" alt=\"profile\" />\n                  <div>\n                    <p> {{industry?.first_name || ''}} {{industry?.last_name || ''}} </p>\n                    <span> {{industry.email}} </span>\n                  </div>\n                </div>\n              </mat-option>\n            </mat-autocomplete>\n          </mat-form-field>\n          <div>\n          </div>\n        </div>\n      </div>\n      <div class=\"taggedPeople\">\n        <label for=\"\">Tagged People</label>\n        <ul>\n          <li *ngFor=\"let people of ticketDetail?.tags\">\n            <div class=\"profile\">\n              <img [src]=\"people.image ?people.image:'assets/images/icon/customer-profile.png'\" alt=\"profile\" />\n              <div>\n                <p> {{people?.first_name || ''}} {{people?.last_name || ''}} </p>\n                <span> {{people.email}} </span>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div class=\"cancel-apply\">\n        <button class=\"btn\" type=\"button\" data-bs-dismiss=\"offcanvas\">Cancel</button>\n        <button *ngIf=\"permissions.user_management == 'Full access'\" class=\"btn btn-secondary\" (click)=\"applyTag();\" type=\"submit\">Apply</button>\n      </div>\n    </form>\n  </div>\n</div>\n<!-- Knowledgebase side bar modal -->\n<div class=\"offcanvas offcanvas-end\" style=\"width: 650px;\" id=\"KB\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">\n      <i *ngIf=\"articleAnswerView\" class=\"fa fa-arrow-left\" aria-hidden=\"true\" (click)=\"articleAnswerView = false\"></i>\n      Knowledgebase\n    </h1>\n    <div class=\"sideBarButton\">\n      <i *ngIf=\"articleAnswerView && permissions.user_management == 'Full access'\" (click)=\"copyShare('share');\" class=\"fa fa-share-alt-square\" aria-hidden=\"true\"\n        title=\"Share\"></i>\n      <i *ngIf=\"articleAnswerView && permissions.user_management == 'Full access'\" (click)=\"copyShare('copy');\" class=\"fa fa-clipboard\" aria-hidden=\"true\"\n        title=\"Copy\"></i>\n      <button type=\"button\" (click)=\"articleAnswerView = false\" id=\"closefilterconvas\" class=\"btn-close\"\n        data-bs-dismiss=\"offcanvas\"></button>\n    </div>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body\">\n    <div *ngIf=\"!articleAnswerView\">\n      <div class=\"kbase\">\n        <div class=\"input-text\">\n          <div style=\"width: 100%;\">\n            <input class=\"form-control\" type=\"text\" placeholder=\"Search Article\" [(ngModel)]=\"searchKeySideBar\"\n              (keyUp.enter)=\"getKnowledgeBaseDetailSidebar()\">\n            <button (click)=\"getKnowledgeBaseDetailSidebar()\"><img src=\"assets/images/icon/Search.png\"\n                alt=\"search\" /></button>\n          </div>\n        </div>\n        <div class=\"kbase-inner\"\n          *ngFor=\"let article of articleListSideBar | paginate : {itemsPerPage: pageSize,currentPage: pageSideBar,totalItems: totalArticleSideBar};let i = index\">\n          <p>{{i+1}}. {{article?.title}} </p>\n          <span> {{article?.summary}} </span>\n          <span (click)=\"getArticleDetail(article.slug)\" style=\"color: blue; cursor: pointer;\">Read More...</span>\n          <div class=\"kbuttons\">\n            <button *ngIf=\"permissions.user_management == 'Full access'\" class=\"btn\" data-bs-dismiss=\"offcanvas\" (click)=\"getArticleDetail(article.slug,'copy')\"><img\n                src=\"assets/images/icon/copy.png\" alt=\"copy\" />Copy</button>\n            <button *ngIf=\"permissions.user_management == 'Full access'\" class=\"btn\" data-bs-dismiss=\"offcanvas\" (click)=\"getArticleDetail(article.slug,'share')\"><img\n                src=\"assets/images/icon/share.png\" alt=\"share\" />Share</button>\n          </div>\n          <hr />\n        </div>\n      </div>\n      <pagination-controls *ngIf=\"articleList?.length !=0\" class=\"pagination-crl\" previousLabel=\"Prev\" nextLabel=\"Next\"\n        (pageChange)=\"handlePageChange($event,'SideBar')\"></pagination-controls>\n    </div>\n    <div *ngIf=\"articleAnswerView\">\n      <div style=\"text-align: left;\">\n        <span style=\"font-weight: 600;\">{{answerDetail.title}}</span>\n        <p [innerHTML]=\"answerDetail.answer\" #answer></p>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Ticket Detail side bar modal -->\n<div class=\"offcanvas offcanvas-end\" id=\"ticketDetail\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">View Ticket</h1>\n    <button type=\"button\" id=\"closefilterconvas\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\"></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body viewTicket\">\n    <div>\n      <div>\n        <p>Created By</p>\n      </div>\n      <div style=\"display: block;\">\n        <span> {{ticketDetail?.created_by?.first_name}} {{ticketDetail?.created_by?.last_name}} </span><br>\n        <span>{{ticketDetail?.created_by?.email}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Created</p>\n      </div>\n      <div>\n        <span>{{notification.formatDate(ticketDetail?.created_at)}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Modified</p>\n      </div>\n      <div>\n        <span>{{notification.formatDate(ticketDetail?.updated_at)}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Assigned To</p>\n      </div>\n      <div style=\"display: block;\">\n        <span> {{ticketDetail?.assigned_to?.first_name}} {{ticketDetail?.assigned_to?.last_name}} </span><br>\n        <span>{{ticketDetail?.assigned_to?.email}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Category</p>\n      </div>\n      <div>\n        <span>{{ticketDetail?.category}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Subject</p>\n      </div>\n      <div>\n        <span>{{ticketDetail?.subject}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Status</p>\n      </div>\n      <div>\n        <span>{{ticketDetail?.ticket_status?.team_status || 'New'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Description</p>\n      </div>\n      <div>\n        <span>{{ticketDetail?.description}}</span>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Vehicle Detail side bar modal -->\n<div class=\"offcanvas offcanvas-end\" id=\"vehicleDetail\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">Vehicle Detail</h1>\n    <button type=\"button\" id=\"closefilterconvas\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\"></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body viewTicket\">\n    <div *ngIf=\"!isStandaloneTicket\">\n      <div>\n        <p>Request Id</p>\n      </div>\n      <div style=\"display: block;\">\n        <span> {{vehDetail?.request_id || 'NA'}}\n        </span><br>\n      </div>\n    </div>\n    <div *ngIf=\"!isStandaloneTicket\">\n      <div>\n        <p>Customer Name</p>\n      </div>\n      <div style=\"display: block;\">\n        <span> {{vehDetail?.customer_first_name || 'NA'}} {{vehDetail?.customer_last_name}}\n        </span><br>\n      </div>\n    </div>\n    <div *ngIf=\"!isStandaloneTicket\">\n      <div>\n        <p>Company Name</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.user?.company_name || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Type</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.vehicle_type || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Make</p>\n      </div>\n      <div style=\"display: block;\">\n        <span> {{vehDetail?.vehicle_make || 'NA'}}</span><br>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Model</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.model || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Registration</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.vehicle_registration || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle Year</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.vehicle_year || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Vehicle VIN</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.vehicle_VIN || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>File Type</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.file_type || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Engine Size</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.engine_size || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Transmission</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.transmission || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Fuel Type</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.fuel_type || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Mileage Type</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.mileage_type || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Mileage</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.mileage || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>ECU Brand</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.ecu_brand || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>ECU Version</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.ecu_version || \"NA\"}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Control Unit</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.control_unit || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Country</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.country || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Tuning Tool Used</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.tuning_tool_used || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Tuning Required</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.tuning_required || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Credit</p>\n      </div>\n      <div>\n        <span> {{ vehDetail?.credit_spent?.credit }}\n          {{\n            vehDetail?.credit_spent?.credit_type == 1\n              ? \"File Key\"\n              : vehDetail?.credit_spent?.credit_type == 2\n              ? \"EVC\"\n              : vehDetail?.credit_spent?.credit_type == 3\n              ? \"Function Key\"\n              : \"0\"\n          }}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Additional Function</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.additional_function || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Additional Info.</p>\n      </div>\n      <div>\n        <span>{{vehDetail?.additional_info || 'NA'}}</span>\n      </div>\n    </div>\n    <div>\n      <div>\n        <p>Other Fields</p>\n      </div>\n      <div>\n        <span>{{(vehDetail?.other_fields | titlecase) || 'NA'}}</span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Active User side bar modal -->\n<div class=\"offcanvas offcanvas-end\" id=\"activeUser\">\n  <div class=\"offcanvas-header\">\n    <h1 class=\"offcanvas-title\">Active User</h1>\n    <button type=\"button\" id=\"closefilterconvas\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\"></button>\n  </div>\n  <hr />\n  <div class=\"offcanvas-body activeUser\">\n    <div class=\"d-flex\" *ngFor=\"let user of activeUserList\">\n      <div class=\"userImg\">\n        <img [src]=\"user?.image || 'assets/images/icon/avtarIcon.jpeg'\" alt=\"\">\n      </div>\n      <div class=\"userDetail\">\n        <p>{{user?.first_name}} {{user?.last_name}} </p>\n        <span> {{user?.email}} </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Update file status Modal start here -->\n<div class=\"modal productModal\" id=\"changeStatusModel\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form [formGroup]=\"frTicketstatusForm\" (ngSubmit)=\"frTicketstatusFormSubmit()\">\n        <div class=\"modal-header\" style=\"margin-bottom: 0px !important; padding-bottom: 0px !important;\">\n          <h4 class=\"modal-title\">Update FR Status</h4>\n          <button type=\"button\" class=\"btn-close\" id=\"closeFtmodal\" data-bs-dismiss=\"modal\"></button>\n        </div>\n        <hr />\n        <div class=\"modal-body\">\n          <div>\n            <label for=\"status\" class=\"form-label\">Status</label>\n            <select class=\"form-select\" formControlName=\"ticket_status\">\n              <option disabled value=\"\">Select status</option>\n              <option value=\"OPEN\">Open</option>\n              <option value=\"CLOSED\">Closed</option>\n              <option value=\"Manual Handle\">Manual handle</option>\n              \n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-danger\" id=\"closemodal\" data-bs-dismiss=\"modal\">Cancel</button>\n          <button type=\"submit\" *ngIf=\"permissions.user_management == 'Full access'\" [disabled]=\"frTicketstatusForm.invalid\" class=\"btn btn-primary\">Update</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<!-- The file download modal -->\n<div class=\"modal\" id=\"chngeEmailModal\">\n  <div class=\"v-align\">\n    <div class=\"modal-dialog download\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header downloadFile\">\n          <h4 class=\"modal-title\">Download files</h4>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"responsive-tbl\">\n            <div *ngIf=\"isDirectoryLoading\" class=\"h-100 d-flex align-items-center justify-content-center\">\n              <svg width=\"6rem\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><radialGradient id=\"a11\" cx=\".66\" fx=\".66\" cy=\".3125\" fy=\".3125\" gradientTransform=\"scale(1.5)\"><stop offset=\"0\" stop-color=\"#2315FF\"></stop><stop offset=\".3\" stop-color=\"#2315FF\" stop-opacity=\".9\"></stop><stop offset=\".6\" stop-color=\"#2315FF\" stop-opacity=\".6\"></stop><stop offset=\".8\" stop-color=\"#2315FF\" stop-opacity=\".3\"></stop><stop offset=\"1\" stop-color=\"#2315FF\" stop-opacity=\"0\"></stop></radialGradient><circle transform-origin=\"center\" fill=\"none\" stroke=\"url(#a11)\" stroke-width=\"15\" stroke-linecap=\"round\" stroke-dasharray=\"200 1000\" stroke-dashoffset=\"0\" cx=\"100\" cy=\"100\" r=\"70\"><animateTransform type=\"rotate\" attributeName=\"transform\" calcMode=\"spline\" dur=\"2\" values=\"360;0\" keyTimes=\"0;1\" keySplines=\"0 0 1 1\" repeatCount=\"indefinite\"></animateTransform></circle><circle transform-origin=\"center\" fill=\"none\" opacity=\".2\" stroke=\"#2315FF\" stroke-width=\"15\" stroke-linecap=\"round\" cx=\"100\" cy=\"100\" r=\"70\"></circle></svg>\n            </div>\n            <table *ngIf=\"!isDirectoryLoading\">\n              <thead>\n                <th>Title</th>\n                <th>Created at</th>\n                <th>Download</th>\n                <th>Download Count</th>\n              </thead>\n              <tr *ngFor=\"let file of downloadFileList; let i = index\">\n                <td>{{ file?.title }}</td>\n                <td>{{ notification.formatDate(file?.created_at) }}</td>\n                <td style=\"text-align: center !important\">\n                  <a class=\"eyeIcon\" (click)=\"downloadFIle(file, i)\"\n                    ><i\n                      class=\"fa fa-download\"\n                      title=\"Download\"\n                      aria-hidden=\"true\"\n                    ></i\n                  ></a>\n                </td>\n                <td style=\"text-align: center !important\">\n                  {{ file?.downloaded_times ? file?.downloaded_times : 0 }}\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Edit Template Modal -->\n<div class=\"modal modal-xl productModal mt-4\" id=\"editTemplate\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <form >\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\">Share Template</h4>\n          <button type=\"button\" class=\"btn-close\" id=\"closemodal\" data-bs-dismiss=\"modal\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <form [formGroup]=\"templateForm\">\n            <div class=\"u-add custom\">\n                <div class=\"u-add-right\">\n                    <div>\n                        <label class=\"mb-2\">Subject</label>\n                        <input type=\"text\" formControlName=\"subject\" class=\"form-control\" />\n                    </div>\n                    <div>\n                        <label class=\"mb-2\">Catgeory</label>\n                        <select class=\"form-select\" formControlName=\"template_type\" >\n                            <option value=\"\" disabled='true'> Select Catgeory</option>\n                            <option *ngFor=\"let cat of categoryList\" value=\"{{cat.id}}\"> {{cat.category}} </option>\n                        </select>\n                    </div>\n\n                   \n                    <div>\n                        <label class=\"mb-2\">Personalize</label>\n                        <select class=\"form-select\" disabled>\n                            <option *ngFor=\"let personalize of personalizeList\" value=\"{{personalize?.value}}\"> {{personalize?.name}} </option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <ckeditor #ckeditor formControlName=\"body\" [readOnly]=\"true\" [disabled]=\"true\"></ckeditor>\n        </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"submit\" id=\"closemodal\" data-bs-dismiss=\"modal\"\n          (click)=\"setTemplateInSendMsgBox(currentTemplate)\"\n            class=\"btn assign\">Share</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<ng-template #activeUsers>\n  <section>\n    <h3>Active Viewers</h3>\n    <ul>\n      <li *ngFor=\"let item of activeUserList\">\n        <img [src]=\"item?.image || 'assets/images/icon/customer-profile.png'\" alt=\"\">\n        <div>\n          <p>{{item.first_name}} {{item.last_name}}</p>\n          <!-- <p>{{item.user_type.replace('_',' ') | titlecase}}</p> -->\n        </div>\n      </li>\n      <div *ngIf=\"!activeUserList?.length\">\n        <p class=\"mt-4\">No active viewer</p>\n      </div>\n    </ul>\n  </section>\n</ng-template>\n\n\n<div class=\"modal\" id=\"deleteModal\">\n  <div class=\"v-align\">\n      <div class=\"modal-dialog\">\n          <div class=\"modal-content deleteModal\">\n              <div class=\"modal-header\">\n                  <h4 class=\"modal-title\">Delete Attachment</h4>\n                  <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n              </div>\n              <div class=\"modal-body\">\n                  <div>\n                      <div>\n                          <p>Are you sure, you want to delete the attachment?</p>\n                      </div>\n                  </div>\n              </div>\n              <div class=\"modal-footer\">\n                  <div class=\"flexDiv\">\n                      <button class=\"btn cancel\" data-bs-dismiss=\"modal\">Cancel</button>\n                      <button type=\"button\" class=\"btn delete\" (click)=\"deleteAttachment()\"\n                          data-bs-dismiss=\"modal\">Confirm</button>\n                  </div>\n              </div>\n          </div>\n      </div>\n  </div>\n</div>\n","import { Component, ViewChild, ElementRef, OnInit, ViewEncapsulation, Renderer2 } from '@angular/core';\nimport { ConversationService } from 'src/services/conversation.service';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TicketService } from '../../services/ticket.service';\nimport { Title, DomSanitizer } from '@angular/platform-browser';\nimport { ToastrService } from 'ngx-toastr';\nimport { UploadFileService } from 'src/app/services/upload-file.service';\nimport { RoleService } from '../../services/role.service';\nimport { requestUrl } from 'src/app/services/adminReqUrl.const';\nimport { CrudService } from 'src/app/services/crud.service';\nimport { MatChipInputEvent } from '@angular/material/chips';\nimport { COMMA } from '@angular/cdk/keycodes';\nimport { MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\nimport { debounceTime } from 'rxjs';\nimport { cusRequestUrl } from 'src/app/services/customerReqUrl.const';\nimport { environment } from 'src/environments/environment';\nimport { NotificationsService } from 'src/services/notifications.service';\nimport { TemplateService } from '../../services/template.service';\nimport { PermissionsService } from '../../services/permissions.service';\nimport { Location } from '@angular/common';\nimport { XorEncryptionService } from 'src/app/services/xor-encryption.service';\n\n@Component({\n  selector: 'app-view-ticket',\n  templateUrl: './view-ticket.component.html',\n  styleUrls: ['./view-ticket.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class ViewTicketComponent implements OnInit {\n  isexpandedMsgWindow: any = false;\n  @ViewChild('scroll')\n  public scroll!: ElementRef;\n  tab: any = 'conversion';\n  ticketId: any;\n  id: any;\n  conversationForm: FormGroup;\n  attachmentForm: FormGroup;\n  conversations: any = [];\n  attachments: any = [];\n  ticketDetail: any;\n  ticket_status: any;\n  formData: FormData = new FormData();\n  ticketstatusForm: FormGroup;\n  selectedFiles: any;\n  fileType: any;\n  roleList: any = [];\n  ticketstatus: any = [];\n  ticketAssignForm: FormGroup;\n  frTicketstatusForm: FormGroup;\n  roleUserList: any = [];\n  selectedIndustry: string[] = [];\n  tagList: any[] = [];\n  industryCtrl = new FormControl();\n  @ViewChild('industryInput')\n  industryInput!: ElementRef<HTMLInputElement>;\n  separatorKeysCodes: number[] = [COMMA];\n  industryList: any;\n  articleList: any;\n  searchKey: any;\n  pageSize: number = 10;\n  page: number = 1;\n  notes: any;\n  notePage: number = 1;\n  notePageSize: number = 10;\n  totalNote: number =0;\n  @ViewChild('fileInput')\n  public fileInput!: ElementRef;\n\n  currentTemplate?:any;\n  @ViewChild('ckeditor') public ckeditor: any;\n  templateForm: FormGroup<any>;\n  personalizeList:any;\n  categoryList: any = [\n    {\n      \"category\": \"Log Report\",\n      \"key\": \"log_report\",\n      \"id\": 1,\n      \"personalize\": [\n        { name: 'Ticket Id', value: 'ticket_id' },\n        { name: 'Ticket Ids', value: 'ticket_ids' },\n        { name: 'Created At', value: 'created_at' },\n        { name: 'Updated At', value: 'updated_at' },\n        { name: 'Status', value: 'status' },\n        { name: 'Ticket Status', value: 'ticket_status' },\n        { name: 'Ticket Url', value: 'ticket_url' },\n        { name: 'Ticket Subject', value: 'ticket_subject' },\n        { name: 'Ticket Customer Name', value: 'ticket_customer_name' },\n      ]\n    },\n    {\n      \"category\": \"Ticket\",\n      \"key\": \"ticket\",\n      \"id\": 2,\n      \"personalize\": [\n        { name: 'Ticket Id', value: 'ticket_id' },\n        { name: 'Ticket Ids', value: 'ticket_ids' },\n        { name: 'Created At', value: 'created_at' },\n        { name: 'Updated At', value: 'updated_at' },\n        { name: 'Status', value: 'status' },\n        { name: 'Ticket Status', value: 'ticket_status' },\n        { name: 'Ticket Url', value: 'ticket_url' },\n        { name: 'Ticket Subject', value: 'ticket_subject' },\n        { name: 'Ticket Customer Name', value: 'ticket_customer_name' },\n      ]\n    }\n  ]\n  timelinedata: any = [\n    { 'date': '1 March 2023 16:10:30', 'title': 'File submited by user' },\n    { 'date': '1 March 2023 16:10:30', 'title': 'File matching' },\n    { 'date': '1 March 2023 16:10:30', 'title': 'File returned' },\n    { 'date': '1 March 2023 16:10:30', 'title': 'New directory created' }\n  ];\n\n\n  totalArticle: number = 0;\n  articleListSideBar: any;\n  searchKeySideBar: any;\n  pageSideBar: number = 1;\n  totalArticleSideBar: number = 0;\n  chatHistory: any;\n  articleAnswerView: boolean = false;\n  answerDetail: any;\n  userDetail: any = JSON.parse(localStorage.getItem('userdetails') || '{}')\n  @ViewChild('answer')\n  public copyAns!: ElementRef;\n  distance = 2;\n  noteDetails: any;\n  chatPage: number = 1;\n  chatPageSize: number = 10;\n  articleAnswerViewBlock: boolean = false;\n  answerDetailBlock: any;\n  downloadFileList: any;\n  // template canvas variable\n  showError: boolean = false;\n  templates: any = [];\n  temCanpage = 1;\n  temCanSize = 10;\n  title = '';\n  totalTemplate: any;\n  category = '';\n  permissions: any;\n  ckeEditor: boolean = false;\n  conversationsCount:number = 0;\n\n  // Active Users\n  activeUsersCount = 0;\n  isActiveUsersVisible = false;\n\n  @ViewChild('popup')\n  activeUserPopup!:ElementRef;\n  \n  @ViewChild('popupContainer')\n  popupContainer!:ElementRef;\n\n  customerId = 0;\n  constructor(\n    private _converservice: ConversationService, private sanitizer: DomSanitizer,\n    private route: ActivatedRoute, private fb: FormBuilder, private router: Router,\n    private _ticketservice: TicketService, private _titleservice: Title, private _permissions: PermissionsService,\n    private toastr: ToastrService, private uploadService: UploadFileService,\n    private _roleservice: RoleService, private crud: CrudService, private _templateservice: TemplateService,\n    public notification: NotificationsService,\n    private renderer:Renderer2,\n    private location: Location,\n    private xorEncryption: XorEncryptionService\n  ) {\n\n    const data:any = this.location.getState();\n    const ticket = data?.state;\n    if(ticket) {\n      this.ticketDetail = ticket;\n    }\n\n    \n    this.ticketstatusForm = this.fb.group({\n      ticket_status: ['', Validators.required],\n    });\n    this.attachmentForm = this.fb.group({\n      attachement_type: ['Select File Type',],\n      attachement_name: ['']\n    });\n    this.templateForm = this.fb.group({\n      subject: [{ value:'',disabled:true }, [Validators.required]],\n      template_type: [{ value:'',disabled:true } , [Validators.required]],\n      body: [{value:'', disabled:true}, [Validators.required]],\n    });\n    this.personalizeList = this.categoryList[0].personalize;\n\n    this._titleservice.setTitle('ticket details');\n    \n    this.ticketId = this.route.snapshot.paramMap.get('ids');\n    this.id = this.route.snapshot.paramMap.get('id');\n\n    this.conversationForm = this.fb.group({\n      sender: ['', Validators.required],\n      recipient: ['', Validators.required],\n      message: [''],\n      file: [''],\n      message_type: ['text'],\n      attachement_name:[''],\n    });\n\n    this.ticketAssignForm = this.fb.group({\n      role_id: ['Select Role', Validators.required],\n      user_id: ['Select User', Validators.required]\n    });\n\n\n    this.industryCtrl.valueChanges.pipe(\n      debounceTime(500)\n    ).subscribe((value: string) => {\n      if (value) {\n        this.crud.getRequest(`${requestUrl.getAdminInternalTeam}${this.ticketId}?search=${value.trim()}`).then((res: any) => {\n          this.industryList = res.data.results;\n        })\n      }\n    })\n\n    this.frTicketstatusForm = this.fb.group({\n      ticket_status: ['', Validators.required],\n    });\n    this.permissions = this._permissions.getPermissions();\n\n    this.renderer.listen('window', 'click',(e:Event)=>{\n      \n      console.log('Is Clicked in button: ',this.activeUserPopup?.nativeElement.contains(e.target));\n      console.log('Is Clicked in popover Container: ', this.popupContainer.nativeElement.contains(e.target),'asd');\n      if(!this.activeUserPopup?.nativeElement.contains(e.target) && !this.popupContainer.nativeElement.contains(e.target)) {\n        \n          this.isActiveUsersVisible = false;\n        }\n    });\n  }\n\n  updateDownloadHistory(id:number) {\n    this.crud.getRequest(`customer/conversation/attachment/download/${id}`)\n  }\n\n\n\n  activeUserList: any;\n  ngOnInit(): void {\n    // this.getUserByRole();\n    this.route.queryParams.subscribe(params => {\n      const paramValue = params['historyTab'];\n      if (paramValue) {\n        this.tab = 'history'; this.getChatHistory();\n      }\n    });\n\n    this.notification.onMessageAdmin.subscribe((res: any) => {\n      if (res && res.type === 'admin_attachment_refresh') {\n        this.retrieveConversation();\n      }\n    });\n\n\n    this._converservice.initSocket(this.ticketId);\n    this.retrieveConversation();\n    this._converservice.onConversation.subscribe((res: any) => {\n      console.log(res, 'res of chat socket on message');\n      console.log('message =>', res.message);\n\n\n      if (res.message_type != 'online' && res.message_type != 'offline') {\n        res['message'] = res?.message_type == 'article' ? this.sanitizer.bypassSecurityTrustHtml(res?.message) : res.message;\n        if (res?.message_type == 'article') {\n          res.message = res.message.changingThisBreaksApplicationSecurity.replace('SafeValue must use [property]=binding:', '');\n          res.message = res.message.replace('(see https://g.co/ng/security#xss)', '');\n        } else {\n          res.message = res.message.replace('SafeValue must use [property]=binding:', '');\n          res.message = res.message.replace('(see https://g.co/ng/security#xss)', '');\n        }\n        this.conversations.push(res);\n        setTimeout(() => {\n          this.scrollBottom();\n        },200)\n\n      }\n      const activeUsers = res.active_users.filter((el:any) => el.uuid != this.userDetail.uuid);\n      this.activeUserList = activeUsers;\n      this.activeUsersCount = activeUsers.length;\n    })\n    // this.getRoles();\n    this.getTicketDetail();\n    this.getCountByCategory();\n  }\n\n  getArticleDetailBlock(id: string, type?: string) {\n    this.crud.getRequest(`${requestUrl.getArticleDetail}${id}`).then((res: any) => {\n      this.answerDetailBlock = res;\n      this.answerDetailBlock.answer = this.sanitizer.bypassSecurityTrustHtml(this.answerDetailBlock?.answer);\n      this.articleAnswerViewBlock = true;\n    })\n  }\n  onScroll() {\n    this.page = this.page + 1;\n  }\n  onChatScroll() {\n    this.chatPageSize = this.chatPageSize + 10;\n    this.retrieveConversation();\n  }\n  handlePageChange(event: number, type: string): void {\n    if (type == 'main') {\n      this.page = event;\n      this.getKnowledgeBaseDetail();\n    }\n    else {\n      this.pageSideBar = event;\n      this.getKnowledgeBaseDetailSidebar();\n    }\n  }\n  handleNotePageChange(event: number) {\n    this.notePage = event;\n    this.getNotes();\n  }\n  getKnowledgeBaseDetail() {\n    if (this.searchKey) {\n      this.crud.getRequest(`${cusRequestUrl.getArticleList}?search=${this.searchKey}`).then((res: any) => {\n        if (res) {\n          this.articleList = res.data.results;\n          this.totalArticle = res.data.count;\n        }\n      })\n    }\n    else {\n      this.crud.getRequest(`${cusRequestUrl.getArticleList}?page=${this.page}&page_size=${this.pageSize}`).then((res: any) => {\n        if (res) {\n          this.articleList = res.data.results;\n          this.totalArticle = res.data.count;\n        }\n      })\n    }\n  }\n  getKnowledgeBaseDetailSidebar() {\n    if (this.searchKeySideBar) {\n      this.crud.getRequest(`${cusRequestUrl.getArticleList}?search=${this.searchKeySideBar}`).then((res: any) => {\n        if (res) {\n          this.articleListSideBar = res.data.results\n          this.totalArticleSideBar = res.data.count\n        }\n      })\n    }\n    else {\n      this.crud.getRequest(`${cusRequestUrl.getArticleList}?page=${this.page}&page_size=${this.pageSize}`).then((res: any) => {\n        if (res) {\n          this.articleListSideBar = res.data.results\n          this.totalArticleSideBar = res.data.count\n        }\n      })\n    }\n  }\n  addKeys(event: MatChipInputEvent): void {\n    const input = event.input;\n    const value = event.value;\n    if ((value || '').trim()) {\n      this.selectedIndustry.push(value.trim());\n      this.industryCtrl.setValue(null);\n    }\n    if (input)\n      input.value = '';\n  }\n  removeKeys(gen: string): void {\n    const index = this.selectedIndustry.indexOf(gen);\n    if (index >= 0) {\n      this.selectedIndustry.splice(index, 1);\n      this.tagList.splice(index, 1);\n    }\n  }\n  selectedKeys(event: MatAutocompleteSelectedEvent): void {\n    this.selectedIndustry.push(event.option.value.first_name);\n    this.tagList.push(event.option.value.id);\n    this.industryInput.nativeElement.value = '';\n    this.industryCtrl.setValue(null);\n  }\n\n  // getRoles() {\n  //   this.crud.getRequest(`${requestUrl.getAdminRolesAndPermission}`).then((res: any) => {\n  //     if (res)\n  //       this.roleList = res.data.results;\n  //   });\n  // }\n\n  getTicketDetail() {\n    this.crud.getRequest(`${requestUrl.getTicketDetail}${this.id}/`, true).then((res: any) => {\n      if (res) {\n        this.ticketDetail = res.data;\n\n        // Created By\n        this.customerId = this.ticketDetail.created_by.id;\n        // this.ticketstatus = res.count_by_category.reverse();\n        let ticket_status_id = res.ticket_status != null ? res.ticket_status.id : 0;\n        this.ticketstatusForm.patchValue({ 'ticket_status': ticket_status_id });\n        this.ticket_status = res.data.ticket_status != null ? res.data.ticket_status.team_status : 'New';\n        this.ticketstatusForm.controls['ticket_status'].setValue(res.data.ticket_status != null ? res.data.ticket_status.id : 0);\n      }\n    });\n  }\n\n  getCountByCategory() {\n    \n    this._ticketservice.statusCount.subscribe((res: any) => {\n      if (res) {\n        this.ticketstatus = res.count_by_category.reverse();\n      }\n\n      \n      if(!res) {\n        this._ticketservice.getStatusCount().subscribe((res:any) => {\n          if (res) {\n            this.ticketstatus = res.count_by_category.reverse();\n          }\n        })\n      }\n    })\n  }\n\n  isDirectoryLoading = false;\n  getFileList() {\n    this.isDirectoryLoading = true;\n    this.crud.getRequest(`${requestUrl.fileDownloadList}${this.ticketDetail?.request_id}`, true)\n    .then((res: any) => {\n      if (res) {\n        this.downloadFileList = res.data;\n      }\n    }).finally(() => this.isDirectoryLoading = false)\n  }\n\n  getUserByRole(event?: any) {\n    // let roleid = event.target.value;\n    this._roleservice.getRoles({}).subscribe((res: any) => {\n      this.roleUserList = res.data;\n    },\n      (err: any) => {\n      })\n  }\n\n  ticketAssignFormSubmit() {\n    const body = { user_id:this.ticketAssignForm.value?.user_id }\n    this._roleservice.ticketAssignTo(this.ticketId, body).subscribe((res: any) => {\n      this.toastr.success(res.message, '', { timeOut: 4000 });\n      this.getTicketDetail();\n    },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      })\n  }\n\n  ticketstatusFormSubmit() {\n    let data = this.ticketstatusForm.value;\n    this._ticketservice.updateTicketStatus(this.ticketDetail.ids, data).subscribe((res: any) => {\n      this.toastr.success(res.message, '', { timeOut: 4000 });\n      document.getElementById('closemodal')?.click();\n      this.getTicketDetail();\n    },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      })\n  }\n\n  conversationFormSubmit() {\n    let data = this.conversationForm.value;\n    data.message = data.message.replace('SafeValue must use [property]=binding:', '');\n    data.message = data.message.replace('(see https://g.co/ng/security#xss)', '');\n    // data.message = data.message.replace(/\\n\\s*\\n/g, '\\n');\n    if (this.conversationForm.controls['file'].value != '' || this.conversationForm.controls['message'].value != '') {\n      this._converservice.sendMessage(JSON.stringify(data))\n\n      if(this.conversationForm.controls['file'].value) {\n        this.toastr.success(\"Attachment saved successfully.\")\n      }\n\n      this.conversationForm.patchValue({ 'message': '' });\n      this.conversationForm.patchValue({ 'message_type': 'text' });\n      this.conversationForm.patchValue({ 'file': '' });\n      this.ckeEditor = false;\n    }\n\n  }\n  copyShare(type: string) {\n    if (type == 'copy') {\n      let text = `<h5><b>${this.answerDetail.title}</b></h5><br><br>${this.answerDetail.answer}`\n      text = text.replace('SafeValue must use [property]=binding:', '');\n      text = text.replace('(see https://g.co/ng/security#xss)', '');\n      this.conversationForm.patchValue({ 'message': text });\n      this.conversationForm.patchValue({ 'message_type': 'article' });\n      this.conversationFormSubmit()\n      // this.ckeEditor = true;\n    }\n    else {\n      this.conversationForm.patchValue({ 'message': `<a>${environment.chatNavigationUrl}viewArticle?${this.answerDetail.slug}</a>` })\n      this.conversationFormSubmit()\n    }\n    this.articleAnswerView = false;\n  }\n  readArticle(ques: any) {\n    var text = ques.changingThisBreaksApplicationSecurity.split('?')[1]\n    text = ques.changingThisBreaksApplicationSecurity.split('?')[1].slice(0, (text.length - 4))\n    const url = this.router.serializeUrl(\n      this.router.createUrlTree([`/admin/knowledgebase`], { queryParams: { 'ques': text } })\n    );\n    window.open(url, '_blank');\n  }\n  oldC: any = [];\n\n  isConversationLoading = false;\n  retrieveConversation() {\n    this.isConversationLoading = true;\n    this.crud.getRequest(`${requestUrl.getChat}${this.ticketId}?page=${this.chatPage}&page_size=${500}`, true)\n    .then((res: any) => {\n      if (res) {\n        this.isConversationLoading = false;\n        this.conversations = res.data.results.reverse();\n        this.conversations.forEach((element: any) => {\n          element['message'] = this.sanitizer.bypassSecurityTrustHtml(element.message);\n        });\n        // console.log(res,'conversations');\n        this.conversationsCount = res?.data?.count || 0;\n        this.conversationForm.patchValue({ 'sender': res.sender, 'recipient': res.recipient });\n\n        setTimeout(() => {\n          this.scrollBottom();\n        },200)\n      }\n    }).catch(err => {\n      this.isConversationLoading = false;\n    });\n  }\n\n  isLoading = false;\n  getAttachments() {\n    this.isLoading = true;\n    this._ticketservice.getAttachments(this.ticketId, true).subscribe((res: any) => {\n      this.attachments = res.data;\n      this.isLoading = false;\n    },\n      (err: any) => {\n      this.isLoading = false;\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      })\n  }\n\n  newFileList: any;\n  fileList: any = [];\n  onFileChange(event: any) {\n    this.newFileList = Array.from(event.target.files);\n    this.attachmentForm.controls['attachement_name'].setValue(this.newFileList[0].name);\n    if (this.newFileList.length > 0) {\n      for (let file of this.newFileList) {\n        let detail = {\n          \"name\": file.name,\n          \"type\": file.type,\n          \"size\": (file.size / 1000) + \"KB\",\n          \"file\": file,\n        }\n        this.fileList.push(detail);\n        this.formData.append('files', file, file.name);\n      }\n    }\n\n  }\n  sendAttachment() {\n    this.formData.append('attachement_name', this.attachmentForm.value.attachement_name);\n    this.formData.append('attachement_type', this.attachmentForm.value.attachement_type);\n    this._ticketservice.saveAttachments(this.ticketId, this.formData).subscribe((res: any) => {\n      this.toastr.success(res.message, '', { timeOut: 4000 });\n      // this.updateStatusOnAttachment();\n      this.getAttachments();\n      this.formData = new FormData();\n      this.fileInput.nativeElement.value = \"\";\n      this.attachmentForm.controls['attachement_type'].setValue('Select File Type')\n      this.attachmentForm.controls['attachement_name'].setValue('')\n    },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      })\n  }\n\n  updateStatusOnAttachment() {\n    this._ticketservice\n      .updateTicketStatus(\n        this.ticketId,\n        {ticket_status:48},\n      )\n      .subscribe(\n        (res: any) => {\n          // this.toastr.success(res.message, '', { timeOut: 4000 });\n          // // this.retrieveTickets(false);\n          // document.getElementById('closeFtmodal')?.click();\n          // this.frTicketstatusForm.controls['ticket_status'].setValue('');\n        },\n        (err: any) => {\n          this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n        }\n      );\n  }\n\n\n  selectFile(event: any) {\n    this.selectedFiles = event.target.files;\n    const file = this.selectedFiles.item(0);\n    this.uploadService.uploadFile(file, ((cb: any) => {\n      this.conversationForm.controls['file'].setValue(cb);\n      this.conversationForm.controls['message_type'].setValue('file');\n      this.conversationForm.controls['attachement_name'].setValue(file.name);\n      this.fileType = cb.split('.')\n      this.fileType = this.fileType[this.fileType.length - 1];\n    }));\n  }\n\n  decodeFileNameFromUrl(name:string): string {\n    return decodeURIComponent(name.split('/')[name.split('/').length-1]);\n  }\n\n\n  scrollBottom() {\n    this.scroll.nativeElement.scrollTop = this.scroll.nativeElement.scrollHeight;\n  }\n\n  scrollToTop() {\n    this.scroll.nativeElement.scrollTop = 0;\n  }\n\n  ngOnDestroy() {\n     this._converservice.closeSocket();\n  }\n\n  applyTag() {\n    let body = {\n      \"tags\": this.tagList\n    }\n    this.crud.postRequest(`${requestUrl.getAdminInternalTeam}/${this.ticketId}`, body).then((res: any) => {\n      if (res) {\n        this.toastr.success(res.message)\n        document.getElementById('closefilterconvas')?.click();\n        this.getTicketDetail();\n      }\n    })\n  }\n\n  expandMsgWindow() {\n    this.isexpandedMsgWindow = !this.isexpandedMsgWindow;\n  }\n\n  isHistoryLoading = false;\n  getChatHistory() {\n    this.isHistoryLoading = true;\n    this.crud.getRequest(`${requestUrl.getChatHistory}${this.ticketId}?page=${this.page}&page_size=500`,true)\n    .then((res: any) => {\n      this.isHistoryLoading = false;\n      this.chatHistory = res.data.results;\n    }).catch(err => {\n      this.isHistoryLoading = false;\n    })\n  }\n\n\n  getArticleDetail(id: string, type?: string) {\n    this.crud.getRequest(`${requestUrl.getArticleDetail}${id}`).then((res: any) => {\n      if (res) {\n        this.answerDetail = res;\n        this.answerDetail.answer = this.sanitizer.bypassSecurityTrustHtml(this.answerDetail.answer);\n        if (type)\n          this.copyShare(type);\n        else\n          this.articleAnswerView = true;\n      }\n    })\n  }\n  getNotes() {\n    this.crud.getRequest(`${requestUrl.getAllNotes}${this.ticketDetail.id}?page=${this.notePage}&page_size=${this.notePageSize}`,).then((res: any) => {\n      if (res) {\n        this.noteDetails = res?.data;\n        this.totalNote = res?.data?.count;\n      }\n    })\n  }\n  createTicketNote() {\n    let body = {\n      \"ticket\": this.ticketDetail.id,\n      \"note\": this.notes\n    };\n    this.crud.postRequest(`${requestUrl.createTicketNote}`, body).then((res: any) => {\n      if (res) {\n        this.toastr.success('Note Added Successfully')\n        this.notes = '';\n        this.getNotes();\n      }\n    })\n  }\n  downloadFIle(file: any, i: number) {\n    this.crud.getRequest(`${cusRequestUrl.updateDownloadCount}${file.id}`).then((res: any) => {\n      if (res) {\n        this.downloadFileList[i].downloaded_times = res.counter;\n        window.open(file.url, '_blank');\n      }\n    })\n  }\n  retrieveTemplate(): void {\n    const params = this.getRequestParams(this.title, this.page, this.pageSize, this.category);\n    this._templateservice.getTemplate(params).subscribe((res: any) => {\n      this.templates = res.data.results;\n      this.showError = this.templates.length == 0 ? true : false;\n      this.totalTemplate = res.data.count;\n\n    },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      })\n\n  }\n  getRequestParams(searchTitle: string, page: number, pageSize: number, category: any): any {\n    let params: any = {};\n    if (searchTitle) {\n      params[`search`] = searchTitle;\n    }\n    if (page) {\n      params[`page`] = page;\n    }\n    if (pageSize) {\n      params[`page_size`] = pageSize;\n    }\n    if (pageSize) {\n      params[`name`] = category\n    }\n    return params;\n  }\n  handleTemplatePageChange(event: number): void {\n    this.temCanpage = event;\n    this.retrieveTemplate();\n  }\n  setTemplateInSendMsgBox(template: any) {\n    this.crud.getRequest(`${requestUrl.shareTemplate}${template.ids}&ticket_id=${this.ticketId}`).then((res: any) => {\n      if (res) {\n        this.conversationForm.controls['message'].setValue(res.data)\n        this.conversationForm.patchValue({ 'message_type': 'article' });\n        this.ckeEditor = true;\n        // this.conversationFormSubmit();\n      }\n    })\n  }\n\n  frTicketstatusFormSubmit() {\n    this._ticketservice.updateFRTicketStatus(this.frTicketstatusForm.value.ticket_status, this.ticketId).subscribe((res: any) => {\n      this.toastr.success(res.message, '', { timeOut: 4000 });\n      document.getElementById('closeFtmodal')?.click();\n      this.frTicketstatusForm.controls['ticket_status'].setValue('');\n    },\n      (err: any) => {\n        this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n      })\n  }\n\n  vehDetail: any;\n  isStandaloneTicket = false;\n  getVehicleDetail() {\n    if (this.ticketDetail?.vehicle_details?.model) {\n      this.isStandaloneTicket = true;\n      this.vehDetail = this.ticketDetail.vehicle_details; \n      return;\n    }\n\n    this.isStandaloneTicket = false;\n    if (this.ticketDetail?.request_id) {\n      this.crud.getRequest(`file/service/request/detail/${this.ticketDetail?.request_id.replace('FR', '')}`).then((res: any) => {\n        this.vehDetail = res;\n        if(\"other_fields\" in this.vehDetail && this.vehDetail.other_fields) {\n          this.vehDetail.other_fields = this.vehDetail.other_fields.replaceAll('_',' ').replaceAll(',',', ');\n        }\n      })\n    }\n    else {\n      this.vehDetail = this.ticketDetail?.vehicle_details;\n    }\n  }\n\n\n  previewTemplateForm(data:any) {\n    this.templateForm.patchValue(\n      {\n        \"subject\":data.subject,\n        \"template_type\":data.template_type,\n        \"body\"    :data.body\n      }\n    );\n    this.currentTemplate = data;\n  }\n\n\n  // We should not update the TEMPLATE from this page.\n\n  // appendValue(value: any) {\n  //   this.ckeditor.instance.insertText(`{{${value.target.value}}}`);\n  // }\n\n  // updateTemplate() {\n  //   let data:any = {\n  //     body:this.templateForm.value.body,\n  //     template_type:this.templateForm.get('template_type')?.value,\n  //     subject: this.templateForm.get('subject')?.value\n  //   };\n    \n  //   this._templateservice.updateTemplate(data,this.currentTemplate.id)\n  //   .subscribe(\n  //     (res: any) => {\n  //       this.toastr.success(res.message, '', { timeOut: 4000 });\n  //       this.retrieveTemplate();\n  //     },\n  //     (err: any) => {\n  //       this.toastr.error(err.error.detail, '', { timeOut: 4000 });\n  //     }\n  //   )\n  // }\n\n  deleteAttachmentData = {id:0, index:0};\n\n  setDeleteData(id:number,index:number) {\n    this.deleteAttachmentData = { id, index };\n  }\n  \n  deleteAttachment():void {\n    this.crud.deleteRequest(`customer/conversation/attachment/delete/${this.deleteAttachmentData.id}`)\n    .then((res:any) => {\n      if(res.success) {\n        this.attachments.splice(this.deleteAttachmentData.index,1);\n        this.toastr.success(res.message);\n      }\n    }).catch((err:any) => {\n      this.toastr.error(\"Something went wrong\")\n    })\n  }\n\n}\n","<section class=\"file-service-form\">\n  <div class=\"file-service-inner\">\n    <div class=\"formFields\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n        <h5 style=\"text-align: left;\">Vehicle information</h5>\n        <button class=\"backBtn\" routerLink=\"/admin/tickets\">\n          <i class=\"fa fa-long-arrow-left\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n      <div class=\"d-flex\">\n        <label for=\"\" style=\"font-weight: 600;\">File Request : </label>\n        <p>{{vehDetail?.request_id}}, &nbsp; &nbsp;</p>\n        <label for=\"\" style=\"font-weight: 600;\">Ticket Id : </label>\n        <p>{{ticketId}}</p>\n      </div>\n      <hr>\n      <div *ngIf=\"tab=='form1'\">\n        <form [formGroup]=\"vehicleInformation\">\n          <div class=\"form-inner\">\n            <div>\n              <div>\n                <label>Associated Customer First Name</label>\n                <div>\n                  <input type=\"text\" class=\"form-control\" id=\"lname\" placeholder=\"Enter Associated Customer First Name\"\n                    formControlName=\"customer_first_name\">\n                </div>\n              </div>\n              <div>\n                <label>Associated Customer Last Name</label>\n                <div>\n                  <input type=\"text\" class=\"form-control\" id=\"lname\" placeholder=\"Enter Associated Customer Last Name\"\n                    formControlName=\"customer_last_name\">\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <label for=\"vehicle\" class=\"form-label\">Vehicle Type</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"vehicle_type\"\n                    (change)=\"getVehicleBrands(false);otherVehicleDetailBoxController('vehicleType');\">\n                    <option disabled>Select Vehicle Type</option>\n                    <option *ngFor=\"let vehicleType of vehicleTypes\" [disabled]=\"vehicleType?.name=='Other'\" [value]=\"vehicleType?.id\"> {{vehicleType?.name}}\n                    </option>\n                  </select>\n                  <small class=\"text-danger\"\n                    *ngIf=\"vehicleInformation.controls['vehicle_type'].touched && vehicleInformation.controls['vehicle_type'].hasError('required')\">\n                    Please select vehicle type.\n                  </small>\n                  <div (click)=\"showMultiselect = false\" *ngIf=\"showOtherVehicleType\">\n                    <label for=\"\"></label>\n                    <input type=\"text\" readonly class=\"form-control mt-2\" formControlName=\"other_vehicle_type\"\n                      placeholder=\"Enter Vehicle Type\">\n                  </div>\n                </div>\n              </div>\n              <div>\n                <label> Vehicle Make</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"vehicle_make\"\n                    (change)=\"getBrandModel();otherVehicleDetailBoxController('vehicleMake');\">\n                    <option disabled>Select Vehicle Make</option>\n                    <option *ngFor=\"let brand of vehicleBrandList\" [disabled]=\"brand?.brand_name=='Other'\" [value]=\"brand?.id\">{{brand?.brand_name}}</option>\n                  </select>\n                </div>\n                <div *ngIf=\"showOtherVehicleMake\">\n                  <label for=\"\"></label>\n                  <input type=\"text\" readonly class=\"form-control mt-2\" formControlName=\"other_vehicle_make\"\n                    placeholder=\"Enter Vehicle Make\">\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <label> Vehicle Model</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"model\" \n                    (change)=\"getVehicleControlList();otherVehicleDetailBoxController('model');\">\n                    <option disabled>Select Vehicle Model</option>\n                    <option *ngFor=\"let model of modelList\" [disabled]=\"model?.model_name=='Other'\" [value]=\"model?.id\">{{model?.model_name}}</option>\n                  </select>\n                </div>\n                <div *ngIf=\"showOtherModel\">\n                  <label for=\"\"></label>\n                  <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_model\"\n                    placeholder=\"Enter Vehicle Model\">\n                </div>\n              </div>\n              <div>\n                <label>Vehicle Registration</label>\n                <div>\n                  <input type=\"text\" class=\"form-control\" id=\"vehReg\" placeholder=\"Vehicle Registration\"\n                    formControlName=\"vehicle_registration\">\n                  <small class=\"text-danger\"\n                    *ngIf=\"vehicleInformation.controls['vehicle_registration'].touched && vehicleInformation.controls['vehicle_registration'].hasError('required')\">\n                    Please enter vehicle registration.\n                  </small>\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <label>Vehicle Year</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"vehicle_year\">\n                    <option disabled>Select Vehicle Year</option>\n                    <option *ngFor='let in of counter(yearCount) ;let i = index' [value]=\"year-i\">{{year-i}}\n                    </option>\n                  </select>\n                  <small class=\"text-danger\"\n                    *ngIf=\"vehicleInformation.value.vehicle_year == 'Select Vehicle Year' && showSelectError\">\n                    Please select vehicle year.\n                  </small>\n                </div>\n              </div>\n              <div>\n                <label>Vehicle VIN</label>\n                <div>\n                  <input type=\"text\" class=\"form-control\" id=\"vehVin\" placeholder=\"Vehicle VIN\"\n                    formControlName=\"vehicle_VIN\">\n                  <small class=\"text-danger\"\n                    *ngIf=\"vehicleInformation.controls['vehicle_VIN'].touched && vehicleInformation.controls['vehicle_VIN'].hasError('required')\">\n                    Please enter vehicle VIN.\n                  </small>\n                </div>\n              </div>\n            </div>\n            <div>\n              <div>\n                <label for=\"vehicle\" class=\"form-label\">File Type</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"file_type\">\n                    <option disabled>Select File Type</option>\n                    <option>Master</option>\n                    <option>Client/Slave</option>\n                  </select>\n                  <small class=\"text-danger\"\n                    *ngIf=\"vehicleInformation.value.file_type == 'Select File Type' && showSelectError\">\n                    Please select file type.\n                  </small>\n                </div>\n              </div>\n              <div (click)=\"showMultiselect = false\">\n                <label for=\"vehicle\" class=\"form-label\">Tuning Tool Used</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"tuning_tool_used\"\n                    (change)=\"this.vehicleInformation.controls['other_tuning_tool_used'].setValue('')\">\n                    <option disabled>Select Tuning Tool</option>\n                    <option *ngFor=\"let tuningTool of tuningToolUsedList\" [disabled]=\"tuningTool=='Other'\" [value]=\"tuningTool\"> {{tuningTool}}\n                    </option>\n                  </select>\n                  <small class=\"text-danger\"\n                    *ngIf=\"vehicleInformation.value.tuning_tool_used == 'Select Tuning Tool' && showSelectError\">\n                    Please select tuning tool.\n                  </small>\n                </div>\n                <div (click)=\"showMultiselect = false\"\n                  *ngIf=\"vehicleInformation.controls['tuning_tool_used'].value == 'Other'\">\n                  <label for=\"\"></label>\n                  <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_tuning_tool_used\"\n                    placeholder=\"Enter Tuning Tool\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </form>\n        <h5 style=\"text-align: left;\" class=\"mt-3\">Engine information</h5>\n        <hr>\n        <form [formGroup]=\"engineInformation\">\n          <div class=\"form-inner\">\n            <div class=\"otherCase\">\n              <label class=\"form-label\">Engine Size</label>\n              <div style=\"display: flex; flex-direction: row; gap: 30px; align-items:center;\">\n                <div style=\"width: 50%;\">\n                  <input type=\"number\" class=\"form-control\" appRestrictEnumber formControlName=\"engine_size\"\n                    placeholder=\"In litres\">\n                  <small class=\"text-danger\" style=\"width: 100%; display: block; text-align: left;\"\n                    *ngIf=\"engineInformation.controls['engine_size'].touched && engineInformation.controls['engine_size'].hasError('required')\">\n                    Please enter engine size.\n                  </small>\n                  <small class=\"text-danger\" style=\"width: 100%; display: block; text-align: left;\"\n                    *ngIf=\"engineInformation.controls['engine_size'].dirty && engineInformation.controls['engine_size'].hasError('pattern')\">\n                    Please enter valid number ex: (1,22).\n                  </small>\n                </div>\n                <span class=\"ldot\"></span>\n                <div style=\"width: 50%;\">\n                  <input type=\"number\" class=\"form-control\" appRestrictEnumber placeholder=\"Decimal\"\n                    formControlName=\"engine_size_deci\">\n                  <small class=\"text-danger\" style=\"width: 100%; display: block; text-align: left;\"\n                    *ngIf=\"engineInformation.controls['engine_size_deci'].dirty && engineInformation.controls['engine_size_deci'].hasError('pattern')\">\n                    Please enter valid number ex: (1,2).\n                  </small>\n                </div>\n              </div>\n            </div>\n            <div class=\"otherCase fullWidth\">\n              <label for=\"vehicle\" class=\"form-label\">Transmission</label>\n              <select class=\"form-select\" formControlName=\"transmission\">\n                <option disabled>Select Transmission</option>\n                <option *ngFor=\"let transmissionType of vehicleDetails?.transmission\" [disabled]=\"transmissionType=='Other'\" [value]=\"transmissionType\">\n                  {{transmissionType}}</option>\n              </select>\n              <small class=\"text-danger\"\n                *ngIf=\"engineInformation.value.transmission == 'Select Transmission' && showSelectError\">\n                Please select transmission.\n              </small>\n            </div>\n            <div class=\"otherCase\" *ngIf=\"engineInformation.controls['transmission'].value == 'Other'\">\n              <label for=\"\"></label>\n              <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_transmission\"\n                placeholder=\"Enter Transmission \">\n            </div>\n            <div class=\"otherCase\">\n              <label for=\"vehicle\" class=\"form-label\">Fuel Type</label>\n              <select class=\"form-select\" formControlName=\"fuel_type\" (change)=\"resetCtrlUnit()\">\n                <option disabled>Select Fuel Type</option>\n                <option *ngFor=\"let fuelType of vehicleDetails?.fuel_type\" [disabled]=\"fuelType=='Other'\" [value]=\"fuelType\"> {{fuelType}}</option>\n              </select>\n            </div>\n            <div class=\"otherCase\" *ngIf=\"engineInformation.controls['fuel_type'].value == 'Other'\">\n              <label for=\"\"></label>\n              <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_fuel_type\"\n                placeholder=\"Enter Fuel Type\">\n            </div>\n            <h5 style=\"text-align: left; width: 100%; border-bottom: 1px solid rgb(236, 232, 232);\n            padding-bottom: 15px;\" class=\"mt-3\">Mileage information</h5>\n            <div>\n              <div>\n                <label for=\"vehicle\" class=\"form-label\">Mileage type</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"mileage_type\">\n                    <option disabled>Select Mileage Type</option>\n                    <option *ngFor=\"let MileageType of vehicleDetails?.milage\" [value]=\"MileageType\"> {{MileageType}}\n                    </option>\n                  </select>\n                  <small class=\"text-danger\"\n                    *ngIf=\"engineInformation.value.mileage_type == 'Select Mileage Type' && showSelectError\">\n                    Please select mileage type.\n                  </small>\n                </div>\n              </div>\n              <div>\n                <label>Mileage</label>\n                <div>\n                  <input type=\"number\" class=\"form-control\" appRestrictEnumber placeholder=\"Enter Mileage\"\n                    formControlName=\"mileage\">\n                  <small class=\"text-danger\"\n                    *ngIf=\"engineInformation.controls['mileage'].touched && engineInformation.controls['mileage'].hasError('required')\">\n                    Please enter mileage.\n                  </small>\n                </div>\n              </div>\n            </div>\n          </div>\n        </form>\n        <h5 style=\"text-align: left;\" class=\"mt-3\">ECU information</h5>\n        <hr>\n        <form [formGroup]=\"ecuInformation\">\n          <div class=\"form-inner\">\n            <div class=\"otherCase fullWidth\">\n              <label>Control Unit</label>\n              <select class=\"form-select\" formControlName=\"control_unit\" (change)=\"getTuningRequired(false)\">\n                <option disabled>Select Control Unit</option>\n                <option *ngFor=\"let ctrlUnit of vehicleDetails?.control_unit\" [disabled]=\"ctrlUnit=='Other'\" [value]=\"ctrlUnit\"> {{ctrlUnit}}</option>\n              </select>\n              <small class=\"text-danger\"\n                *ngIf=\"ecuInformation.value.control_unit == 'Select Control Unit' && showSelectError\">\n                Please select control unit.\n              </small>\n            </div>\n            <div class=\"otherCase\" *ngIf=\"ecuInformation.controls['control_unit'].value == 'Other'\">\n              <label for=\"\"></label>\n              <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_control_unit\"\n                placeholder=\"Enter Control Unit\">\n            </div>\n            <div>\n              <div *ngIf=\"!showVehicleTypeInput\">\n                <label>ECU Brand</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"ecu_brand\"\n                    (change)=\"setFuelModel(false);showOtherEcuBrand_version('brand')\">\n                    <option disabled value=\"\">Select ECU Brand</option>\n                    <option *ngFor=\"let ecu of uniqueBrands\" [value]=\"ecu?.id\" [disabled]=\"ecu?.ecu_brand=='Other'\">{{ecu?.ecu_brand}}\n                    </option>\n                  </select>\n                  <small class=\"text-danger\" *ngIf=\"ecuInformation.controls['ecu_brand'].touched && ecuInformation.controls['ecu_brand'].hasError('required')\">\n                    ECU Version is required!\n                  </small>\n                </div>\n                <div class=\"mt-4\" *ngIf=\"showEcuBrand\">\n                  <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_ecu_brand\"\n                    placeholder=\"Enter ECU Brand\">\n                </div>\n              </div>\n              <div>\n                <label>ECU Version</label>\n                <div>\n                  <select class=\"form-select\" formControlName=\"ecu_version\"\n                    (change)=\"showOtherEcuBrand_version('version')\">\n                    <option disabled value=\"\">Select ECU Version</option>\n                    <option *ngFor=\"let ecu of newECU_versionList\" [disabled]=\"ecu?.ecu_version=='Other'\" [value]=\"ecu?.ecu_version\">{{ecu?.ecu_version}}\n                    </option>\n                  </select>\n                  <small class=\"text-danger\" *ngIf=\"ecuInformation.controls['ecu_version'].touched && ecuInformation.controls['ecu_version'].hasError('required')\">\n                    ECU Version is required!\n                  </small>\n                </div>\n                <div class=\"mt-4\" *ngIf=\"showEcuVersion || ecuInformation.value.ecu_version == 'Other'\">\n                  <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_ecu_version\"\n                    placeholder=\"Enter ECU Version\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </form>\n        <h5 style=\"text-align: left;\" class=\"mt-3\">Additional information</h5>\n        <hr>\n        <form [formGroup]=\"additionalInformation\">\n          <div class=\"form-inner\">\n            <div class=\"otherCase fullWidth\" (click)=\"showMultiselect = false\">\n              <label for=\"vehicle\" class=\"form-label\">Country/Location</label>\n              <ng-select class=\"form-control\" formControlName=\"country\">\n                <ng-option selected disabled>Select Your Country</ng-option>\n                <ng-option *ngFor=\"let country of countryData\" [value]=\"country?.country\">\n                  {{country?.country}} <img width=\"20px\" [src]=\"country?.flag\" alt=\"\">\n                </ng-option>\n              </ng-select>\n              <small class=\"text-danger\" style=\"top: 48px !important;\"\n                *ngIf=\"additionalInformation.value.country == 'Select Your Country' && showSelectError\">\n                Please select country.\n              </small>\n            </div>\n            <div class=\"otherCase fullWidth\" style=\"margin-top: 10px !important;\" (click)=\"showMultiselect = false\">\n              <label for=\"vehicle\" class=\"form-label\">Tuning Required</label>\n              <select class=\"form-select\" formControlName=\"tuning_required\">\n                <option disabled>Select Tuning Required</option>\n                <option *ngFor=\"let tuning of tuningRequiredList\" [value]=\"tuning.value\">{{tuning.name}}</option>\n              </select>\n              <small class=\"text-danger\"\n                *ngIf=\"additionalInformation.value.tuning_required == 'Select Tuning Required' && showSelectError\">\n                Please select tuning required.\n              </small>\n            </div>\n            <div class=\"otherCase\" style=\"margin-top: 10px !important;\" *ngIf=\"showAdditonalFunction\">\n              <label click=\"showMultiselect = false\" for=\"password\">Additional Function</label>\n              <div class=\"additionalFucntion\" style=\"padding-top: 18px !important;\">\n                <div *ngFor=\"let addFun of additionalFunctionList;let i = index\">\n                  <input (click)=\"selectAddFun(i)\" [checked]=\"selectAdditionalFun[i]\" type=\"checkbox\" name=\"\" id=\"\">\n                  <label for=\"\">{{addFun}}</label>\n                </div>\n              </div>\n            </div>\n            <div class=\"otherCase\" click=\"showMultiselect = false\" *ngIf=\"showAddiInfoOtherBox\">\n              <label for=\"\"></label>\n              <input type=\"text\" class=\"form-control mt-2\" readonly formControlName=\"other_additional_function\"\n                placeholder=\"Enter Additional Function\">\n            </div>\n            <div class=\"otherCase\" style=\"margin-top: 10px !important;\" (click)=\"showMultiselect = false\" class=\"w100\">\n              <label for=\"\">Additional Info</label>\n              <textarea class=\"form-control\" formControlName=\"additional_info\"\n                placeholder=\"Please list any additional information related to your file. For any DTC removal you must list the DTC and its full description here.\"></textarea>\n            </div>\n            <div class=\"otherCase\" class=\"w100 mt-4\">\n              <label (click)=\"showMultiselect = false\" for=\"\">Upload File</label>\n              <div class=\"reldiv\">\n                <p (click)=\"showMultiselect = false\" *ngIf=\"!fileName\">Drag and Drop the files here </p>\n                <span (click)=\"showMultiselect = false\" *ngIf=\"!fileName\">OR</span>\n                <p (click)=\"showMultiselect = false\" *ngIf=\"!fileName\">Browse file</p>\n                <p *ngIf=\"fileName\">{{fileName}}</p>\n                <input type=\"file\" class=\"form-control\" (change)=\"fileUpload($event)\" />\n              </div>\n            </div>\n            <div>\n              <div class=\"text-center termcondition\" style=\"margin: 0px; align-items: center !important;\">\n                <p>Please find the Previous Uploaded file you can download and attach or upload new file. <a\n                  [href]=\"downloadFile\" target=\"_blank\"><i class=\"fa fa-download\" title=\"Download\"\n                    aria-hidden=\"true\"></i></a></p>\n                    <div style=\"justify-content: center; margin-top: 10px;\" >\n                  <input type=\"checkbox\" (click)=\"acceptTermCond()\" />\n                  <p>By clicking Register, you agree to our <a routerLink=\"/terms-and-conditions\" target=\"_blank\">Terms\n                      & conditions </a> and <a target=\"_blank\" routerLink=\"/privacy\">Privacy Policy.</a></p>\n                </div>\n                <small class=\"text-danger\" *ngIf=\"!acceptTermBusi && (acceptTermCondCount >0)\">\n                  Please select terms & conditions.\n                </small>\n              </div>\n            </div>\n            <div click=\"showMultiselect = false\" class=\"btnDiv\" style=\"justify-content: center !important;\">\n              <button class=\"btn-secondary\" (click)=\"resetForm()\">Reset</button>\n              <button class=\"btn-primary\" (click)=\"submitForm('finalSubmit')\">Submit</button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</section>\n\n\n\n\n<!-- <div *ngIf=\"tab=='form1'\">\n  <form [formGroup]=\"vehicleInformation\">\n    <div class=\"form-inner\">\n      <div>\n        <div>\n          <label>Associated Customer First Name</label>\n          <div>\n            <input type=\"text\" class=\"form-control\" id=\"lname\" placeholder=\"Enter Associated Customer First Name\"\n              formControlName=\"customer_first_name\">\n          </div>\n        </div>\n        <div>\n          <label>Associated Customer Last Name</label>\n          <div>\n            <input type=\"text\" class=\"form-control\" id=\"lname\" placeholder=\"Enter Associated Customer Last Name\"\n              formControlName=\"customer_last_name\">\n          </div>\n        </div>\n      </div>\n      <div>\n        <div>\n          <label for=\"vehicle\" class=\"form-label\">Vehicle Type</label>\n          <div>\n            <select class=\"form-select\" formControlName=\"vehicle_type\" (change)=\"getVehicleBrands(true)\">\n              <option disabled>Select Vehicle Type</option>\n              <option *ngFor=\"let vehicleType of vehicleTypes\" [value]=\"vehicleType.id\"> {{vehicleType.name}}\n              </option>\n            </select>\n            <small class=\"text-danger\"\n              *ngIf=\"vehicleInformation.controls['vehicle_type'].touched && vehicleInformation.controls['vehicle_type'].hasError('required')\">\n              Please select vehicle type.\n            </small>\n          </div>\n        </div>\n        <div>\n          <label> Vehicle Make</label>\n          <div *ngIf=\"!showVehicleTypeInput\">\n            <select class=\"form-select\" formControlName=\"vehicle_make\" (change)=\"getBrandModel(true)\">\n              <option disabled>Select Vehicle Make</option>\n              <option *ngFor=\"let brand of vehicleBrandList\" [value]=\"brand.id\">{{brand.brand_name}}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div>\n        <div>\n          <label> Vehicle Model</label>\n          <div *ngIf=\"!showVehicleTypeInput\">\n            <select class=\"form-select\" formControlName=\"model\" (change)=\"getVehicleControlList(true)\">\n              <option disabled>Select Vehicle Model</option>\n              <option *ngFor=\"let model of modelList\" [value]=\"model.id\">{{model.model_name}}</option>\n            </select>\n          </div>\n        </div>\n        <div>\n          <label>Vehicle Registration</label>\n          <div>\n            <input type=\"text\" class=\"form-control\" id=\"vehReg\" placeholder=\"Vehicle Registration\"\n              formControlName=\"vehicle_registration\">\n            <small class=\"text-danger\"\n              *ngIf=\"vehicleInformation.controls['vehicle_registration'].touched && vehicleInformation.controls['vehicle_registration'].hasError('required')\">\n              Please enter vehicle registration.\n            </small>\n          </div>\n        </div>\n      </div>\n      <div>\n        <div>\n          <label>Vehicle Year</label>\n          <div>\n            <select class=\"form-select\" formControlName=\"vehicle_year\">\n              <option disabled>Select Vehicle Year</option>\n              <option *ngFor='let in of counter(yearCount) ;let i = index' [value]=\"this.year-i\">{{this.year-i}}\n              </option>\n            </select>\n            <small class=\"text-danger\"\n              *ngIf=\"vehicleInformation.value.vehicle_year == 'Select Vehicle Year' && showSelectError\">\n              Please select file type.\n            </small>\n          </div>\n        </div>\n        <div>\n          <label>Vehicle VIN</label>\n          <div>\n            <input type=\"text\" class=\"form-control\" id=\"vehVin\" placeholder=\"Vehicle VIN\"\n              formControlName=\"vehicle_VIN\">\n            <small class=\"text-danger\"\n              *ngIf=\"vehicleInformation.controls['vehicle_VIN'].touched && vehicleInformation.controls['vehicle_VIN'].hasError('required')\">\n              Please enter vehicle VIN.\n            </small>\n          </div>\n        </div>\n      </div>\n      <div>\n        <div>\n          <label for=\"vehicle\" class=\"form-label\">File Type</label>\n          <div>\n            <select class=\"form-select\" formControlName=\"file_type\">\n              <option disabled>Select File Type</option>\n              <option>Master</option>\n              <option>Client/Slave</option>\n            </select>\n            <small class=\"text-danger\"\n              *ngIf=\"vehicleInformation.value.file_type == 'Select File Type' && showSelectError\">\n              Please select file type.\n            </small>\n          </div>\n        </div>\n        <div (click)=\"showMultiselect = false\">\n          <label for=\"vehicle\" class=\"form-label\">Tuning Tool Used</label>\n          <div>\n            <select class=\"form-select\" formControlName=\"tuning_tool_used\">\n              <option disabled>Select Tuning Tool</option>\n              <option *ngFor=\"let tuningTool of tuningToolUsedList\" [value]=\"tuningTool\"> {{tuningTool}}\n              </option>\n            </select>\n            <small class=\"text-danger\"\n              *ngIf=\"vehicleInformation.value.tuning_tool_used == 'Select Tuning Tool' && showSelectError\">\n              Please select tuning tool.\n            </small>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n  <h5 style=\"text-align: left;\" class=\"mt-3\">Engine information</h5>\n  <hr>\n  <form [formGroup]=\"engineInformation\">\n    <div class=\"form-inner\">\n      <div class=\"otherCase\">\n        <label class=\"form-label\">Engine Size</label>\n        <div style=\"display: flex; flex-direction: row; gap: 30px; align-items:center;\">\n          <div style=\"width: 50%;\">\n            <input type=\"number\" class=\"form-control\" appRestrictEnumber formControlName=\"engine_size\"\n              placeholder=\"In litres\">\n            <small class=\"text-danger\" style=\"width: 100%; display: block; text-align: left;\"\n              *ngIf=\"engineInformation.controls['engine_size'].touched && engineInformation.controls['engine_size'].hasError('required')\">\n              Please enter engine size.\n            </small>\n            <small class=\"text-danger\" style=\"width: 100%; display: block; text-align: left;\"\n              *ngIf=\"engineInformation.controls['engine_size'].dirty && engineInformation.controls['engine_size'].hasError('pattern')\">\n              Please enter valid number ex: (1 ,22).\n            </small>\n          </div>\n          <span class=\"ldot\"></span>\n          <div style=\"width: 50%;\">\n            <input type=\"number\" class=\"form-control\" appRestrictEnumber placeholder=\"Decimal\"\n              formControlName=\"engine_size_deci\">\n            <small class=\"text-danger\" style=\"width: 100%; display: block; text-align: left;\"\n              *ngIf=\"engineInformation.controls['engine_size_deci'].dirty && engineInformation.controls['engine_size_deci'].hasError('pattern')\">\n              Please enter valid number ex: (1 ,2).\n            </small>\n          </div>\n        </div>\n\n\n      </div>\n      <div class=\"otherCase fullWidth\">\n        <label for=\"vehicle\" class=\"form-label\">Transmission</label>\n        <select class=\"form-select\" formControlName=\"transmission\">\n          <option disabled>Select Transmission</option>\n          <option *ngFor=\"let transmissionType of vehicleDetails?.transmission\" [value]=\"transmissionType\">\n            {{transmissionType}}</option>\n        </select>\n        <small class=\"text-danger\"\n          *ngIf=\"engineInformation.value.transmission == 'Select Transmission' && showSelectError\">\n          Please select transmission.\n        </small>\n      </div>\n      <div class=\"otherCase\">\n        <label for=\"vehicle\" class=\"form-label\">Fuel Type</label>\n        <select class=\"form-select\" formControlName=\"fuel_type\" (change)=\"getTuningRequired(true)\">\n          <option disabled>Select Fuel Type</option>\n          <option *ngFor=\"let fuelType of vehicleDetails?.fuel_type\" [value]=\"fuelType\"> {{fuelType}}</option>\n        </select>\n      </div>\n      <h5 style=\"text-align: left; width: 100%; border-bottom: 1px solid rgb(236, 232, 232);\n        padding-bottom: 15px;\" class=\"mt-3\">Mileage information</h5>\n      <div>\n        <div>\n          <label for=\"vehicle\" class=\"form-label\">Mileage type</label>\n          <div>\n            <select class=\"form-select\" formControlName=\"mileage_type\">\n              <option disabled>Select Mileage Type</option>\n              <option *ngFor=\"let MileageType of vehicleDetails?.milage\" [value]=\"MileageType\"> {{MileageType}}\n              </option>\n            </select>\n            <small class=\"text-danger\"\n              *ngIf=\"engineInformation.value.mileage_type == 'Select Mileage Type' && showSelectError\">\n              Please select mileage type.\n            </small>\n          </div>\n        </div>\n        <div>\n          <label>Mileage</label>\n          <div>\n            <input type=\"number\" class=\"form-control\" appRestrictEnumber placeholder=\"Enter Mileage\"\n              formControlName=\"mileage\">\n            <small class=\"text-danger\"\n              *ngIf=\"engineInformation.controls['mileage'].touched && engineInformation.controls['mileage'].hasError('required')\">\n              Please enter mileage.\n            </small>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n  <h5 style=\"text-align: left;\" class=\"mt-3\">ECU information</h5>\n  <hr>\n  <form [formGroup]=\"ecuInformation\">\n    <div class=\"form-inner\">\n\n      <div class=\"otherCase fullWidth\">\n        <label>Control Unit</label>\n        <select class=\"form-select\" formControlName=\"control_unit\">\n          <option disabled>Select Control Unit</option>\n          <option *ngFor=\"let ctrlUnit of vehicleDetails?.control_unit\" [value]=\"ctrlUnit\"> {{ctrlUnit}}</option>\n        </select>\n        <small class=\"text-danger\"\n          *ngIf=\"ecuInformation.value.control_unit == 'Select Control Unit' && showSelectError\">\n          Please select control unit.\n        </small>\n      </div>\n      <div>\n        <div *ngIf=\"!showVehicleTypeInput\">\n          <label>ECU Brand</label>\n          <div *ngIf=\"!editEcuBrandVesrsion\">\n            <select class=\"form-select\" formControlName=\"ecu_brand\" (change)=\"setFuelModel(true);\">\n              <option disabled>Select ECU Brand</option>\n              <option *ngFor=\"let ecu of newUniqueEcuBrandList\" [value]=\"ecu?.id\">{{ecu?.ecu_brand}}\n              </option>\n            </select>\n          </div>\n          <div *ngIf=\"showVehicleTypeInput\">\n            <input type=\"text\" class=\"form-control mt-2\" formControlName=\"other_ecu_brand\"\n              placeholder=\"Enter ECU Brand\">\n          </div>\n          <div *ngIf=\"editEcuBrandVesrsion\">\n            <input type=\"text\" class=\"form-control mt-2\" formControlName=\"ecu_brand\"\n              placeholder=\"Enter ECU Brand\">\n          </div>\n        </div>\n        <div>\n          <label>ECU Version</label>\n          <div *ngIf=\"!editEcuBrandVesrsion\">\n            <select class=\"form-select\" formControlName=\"ecu_version\" (change)=\"setFuelModel();\">\n              <option disabled>Select ECU Version</option>\n              <option *ngFor=\"let ecu of newECU_versionList\" [value]=\"ecu?.ecu_version\">{{ecu?.ecu_version}}\n              </option>\n            </select>\n          </div>\n          <div *ngIf=\"editEcuBrandVesrsion\">\n            <input type=\"text\" class=\"form-control mt-2\" formControlName=\"ecu_version\"\n              placeholder=\"Enter ECU Version\">\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n  <h5 style=\"text-align: left;\" class=\"mt-3\">Additional information</h5>\n  <hr>\n  <form [formGroup]=\"additionalInformation\">\n    <div class=\"form-inner\">\n      <div class=\"otherCase fullWidth\" (click)=\"showMultiselect = false\">\n        <label for=\"vehicle\" class=\"form-label\">Country/Location</label>\n\n        <ng-select class=\"form-control\" formControlName=\"country\">\n          <ng-option selected disabled>Select Your Country</ng-option>\n          <ng-option *ngFor=\"let country of countryData\" [value]=\"country.country\">\n            {{country.country}} <img width=\"20px\" [src]=\"country.flag\" alt=\"\">\n          </ng-option>\n        </ng-select>\n        <small class=\"text-danger\" style=\"top: 48px !important;\"\n          *ngIf=\"additionalInformation.value.country == 'Select Your Country' && showSelectError\">\n          Please select country.\n        </small>\n      </div>\n      <div class=\"otherCase fullWidth\" style=\"margin-top: 10px !important;\" (click)=\"showMultiselect = false\">\n        <label for=\"vehicle\" class=\"form-label\">Tuning Required</label>\n        <select class=\"form-select\" formControlName=\"tuning_required\">\n          <option disabled>Select Tuning Required</option>\n          <option *ngFor=\"let tuning of tuningRequiredList\" [value]=\"tuning.value\">{{tuning.name}}</option>\n        </select>\n        <small class=\"text-danger\"\n          *ngIf=\"additionalInformation.value.tuning_required == 'Select Tuning Required' && showSelectError\">\n          Please select tuning required.\n        </small>\n      </div>\n      <div class=\"otherCase\" class=\"w100 mt-4\">\n        <label (click)=\"showMultiselect = false\" for=\"\">Upload File</label>\n        <div class=\"reldiv\">\n          <p (click)=\"showMultiselect = false\" *ngIf=\"!fileName\">Drag and Drop the files here </p>\n          <span (click)=\"showMultiselect = false\" *ngIf=\"!fileName\">OR</span>\n          <p (click)=\"showMultiselect = false\" *ngIf=\"!fileName\">Browse file</p>\n          <p *ngIf=\"fileName\">{{fileName}}</p>\n          <input type=\"file\" class=\"form-control\" (change)=\"fileUpload($event)\" />\n        </div>\n      </div>\n      <div>\n        <div class=\"text-center termcondition\" style=\"margin: 0px; align-items: center !important;\">\n          <p>Please find the Previous Uploaded file you can download and attach or upload new file. <a\n              [href]=\"downloadFile\" target=\"_blank\"><i class=\"fa fa-download\" title=\"Download\"\n                aria-hidden=\"true\"></i></a></p>\n\n          <div style=\"justify-content: center; margin-top: 10px;\">\n            <input type=\"checkbox\" (click)=\"acceptTermCond()\" />\n            <p>By clicking Register, you agree to our <a routerLink=\"/terms-and-conditions\" target=\"_blank\">Terms\n                & conditions </a> and <a target=\"_blank\" routerLink=\"/privacy\">Privacy Policy.</a></p>\n          </div>\n          <small class=\"text-danger\" *ngIf=\"!acceptTermBusi && (acceptTermCondCount >0)\">\n            Please select terms & conditions.\n          </small>\n        </div>\n      </div>\n\n      <div click=\"showMultiselect = false\" class=\"btnDiv\" style=\"justify-content: center !important;\">\n        <button class=\"sbtn\" (click)=\"resetForm()\">Reset</button>\n        <button class=\"fbtn\" (click)=\"submitForm('finalSubmit')\">Submit</button>\n      </div>\n    </div>\n  </form>\n\n</div> -->","import { Component } from '@angular/core';\nimport { CustomerService } from '../../services/customer.service';\nimport { CrudService } from 'src/app/services/crud.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { cusRequestUrl } from 'src/app/services/customerReqUrl.const';\nimport { countryDetails } from 'src/app/global-files/global.const';\nimport { Title } from '@angular/platform-browser';\nimport { NotificationsService } from 'src/services/notifications.service';\n\n@Component({\n  selector: 'app-admin-request-file',\n  templateUrl: './admin-request-file.component.html',\n  styleUrls: ['./admin-request-file.component.scss'],\n})\nexport class AdminRequestFileComponent {\n  vehicleInformation!: FormGroup;\n  engineInformation!: FormGroup;\n  ecuInformation!: FormGroup;\n  additionalInformation!: FormGroup;\n  vehicle_step = false;\n  engine_step = false;\n  ecu_step = false;\n  additional_step = false;\n  step = 1;\n  tab: string = 'form1';\n  countries = require('country-data-list').countries;\n  vehicleTypes: any;\n  vehicleDetails: any;\n  vehicleBrandList: any = [];\n  modelList: any = [];\n  ecuBrandList: any = [];\n  showVehicleTypeInput: boolean = false;\n  formData = new FormData();\n  formData3 = new FormData();\n  ticketFormData = new FormData();\n  yearCount: number = 0;\n  year: number = 0;\n  additionalFunctionList: any[] = [];\n  tuningRequiredList: any[] = [];\n  showAdditonalFunction: boolean = false;\n  ticketCreateForm: FormGroup;\n  ticketCategories: any = [];\n  // previewSrc: any;\n  showMultiselect: boolean = false;\n  selectAdditionalFun: any[] = [];\n  tuningToolUsedList: any;\n  users: any;\n  buyItemDetail: any;\n  fileCreditRequired: any = 0;\n  functionCreditRequired: any = 0;\n  filePurchaseRequired: any = 0;\n  functionPurchaseRequired: any;\n  onlyFileKeyCredit: boolean = true;\n  onlyFuntionKeyCredit: boolean = false;\n  submitRequest: any;\n  fileName: string = '';\n  acceptTermBusi: boolean = false;\n  showSelectError: boolean = false;\n  showOtherVehicleType: boolean = false;\n  showOtherVehicleMake: boolean = false;\n  showOtherModel: boolean = false;\n  type: any = this.ar.queryParams;\n\n  ticketId = this.ar.snapshot.paramMap.get('ids');\n  file: any;\n\n  constructor(\n    private customer: CustomerService,\n    private crud: CrudService,\n    private ar: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    private toastr: ToastrService,\n    private route: Router,\n    private _titleservice: Title,\n    private notification: NotificationsService\n  ) {\n    this._titleservice.setTitle('File Submission');\n    this.vehicleInformation = this.formBuilder.group({\n      customer_first_name: [''],\n      customer_last_name: [''],\n      vehicle_type: ['Select Vehicle Type', Validators.required],\n      other_vehicle_type: [''],\n      vehicle_make: ['Select Vehicle Make', Validators.required],\n      other_vehicle_make: [''],\n      model: ['Select Vehicle Model', Validators.required],\n      other_model: [''],\n      vehicle_registration: ['', Validators.required],\n      vehicle_year: ['Select Vehicle Year', Validators.required],\n      vehicle_VIN: ['', Validators.required],\n      file_type: ['Select File Type', Validators.required],\n      tuning_tool_used: ['Select Tuning Tool', Validators.required],\n      other_tuning_tool_used: [''],\n    });\n    this.engineInformation = this.formBuilder.group({\n      engine_size: ['', [Validators.required, Validators.pattern(/^\\d+$/)]],\n      engine_size_deci: ['', [Validators.pattern(/^[0-9]$/)]],\n      transmission: ['Select Transmission', Validators.required],\n      other_transmission: [''],\n      fuel_type: ['Select Fuel Type', Validators.required],\n      other_fuel_type: [''],\n      mileage_type: ['Select Mileage Type', Validators.required],\n      mileage: ['', Validators.required],\n    });\n    this.ecuInformation = this.formBuilder.group({\n      ecu_brand: ['', Validators.required],\n      other_ecu_brand: [''],\n      ecu_version: ['', Validators.required],\n      other_ecu_version: [''],\n      control_unit: ['Select Control Unit', Validators.required],\n      other_control_unit: ['', Validators.required],\n    });\n    this.additionalInformation = this.formBuilder.group({\n      country: ['Select Your Country', Validators.required],\n      additional_function: ['', Validators.required],\n      other_additional_function: ['', Validators.required],\n      tuning_required: ['Select Tuning Required', Validators.required],\n      additional_info: ['', Validators.required],\n    });\n    this.ticketCreateForm = this.formBuilder.group({\n      subject: ['', [Validators.required]],\n      category: ['', [Validators.required]],\n      file_request: ['', []],\n      description: ['', [Validators.required]],\n    });\n  }\n  obj: any = [\n    { alpha2: 'US', name: 'United States' },\n    { alpha2: 'GB', name: 'United Kingdom' },\n  ];\n  uniqueECUBrand: any = [];\n  unique: any = [];\n  countryData = countryDetails;\n  ngOnInit() {\n    console.log(this.type['_value'].reqId);\n    this.countryData.sort((a: any, b: any) => (a.country > b.country ? 1 : -1));\n    this.obj.forEach((element: any) => {\n      this.moveCountryOnTop(element.name);\n    });\n    const d = new Date();\n    this.year = d.getFullYear();\n    this.yearCount = this.year - 1980;\n    this.users = JSON.parse(localStorage.getItem('userdetails') || '');\n    this.ar.queryParams.subscribe((params) => {\n      this.submitRequest = params['submitRequest'];\n    });\n\n    this.getTicketCategory();\n\n    this.getTypeCount();\n    this.getVehicleDetail();\n  }\n  vehDetail: any;\n  other_field: any;\n  downloadFile: any;\n  getVehicleDetail() {\n    this.crud\n      .getRequest(\n        `file/service/request/detail/${this.type['_value'].reqId.replace(\n          'FR',\n          ''\n        )}`\n      )\n      .then((res: any) => {\n        if (res) {\n          this.vehDetail = res;\n          this.downloadFile = this.vehDetail?.tuning_file;\n\n          this.getTypeCount();\n          this.customer.getFileFormData().subscribe((res: any) => {\n            if (res) {\n              this.vehicleDetails = res.data;\n              this.vehicleDetails.control_unit = this.sortEle(\n                this.vehicleDetails.control_unit\n              );\n              let indexOfECU = this.vehicleDetails.control_unit.indexOf('ECU');\n              // Move \"ECU\" to the 0th index\n              if (indexOfECU !== -1) {\n                this.vehicleDetails.control_unit.splice(\n                  0,\n                  0,\n                  this.vehicleDetails.control_unit.splice(indexOfECU, 1)[0]\n                );\n              }\n              this.vehicleDetails.transmission = this.sortEle(\n                this.vehicleDetails.transmission\n              );\n              this.vehicleDetails.fuel_type = this.sortEle(\n                this.vehicleDetails.fuel_type\n              );\n              this.engineInformation.controls['fuel_type'].setValue(\n                this.vehDetail?.fuel_type\n              );\n              this.autotuningListSet();\n              this.autoEcuBrandVersionSet();\n              this.moveOtherInLast(this.vehicleDetails.transmission, 'Other');\n              this.moveOtherInLast(this.vehicleDetails.control_unit, 'Other');\n              this.tuningToolUsedList =\n                this.users.role == 'INDIVIDUAL_CUSTOMER'\n                  ? this.vehicleDetails.tuning_tool_used.individual\n                  : this.vehicleDetails.tuning_tool_used.business;\n              this.tuningToolUsedList = this.sortEle(this.tuningToolUsedList);\n              this.moveOtherInLast(this.tuningToolUsedList, 'OTHER');\n              if (this.vehDetail?.other_fields) {\n                this.other_field = this.vehDetail?.other_fields.split(',');\n                this.other_field.forEach((ele: any) => {\n                  if (ele == 'fuel_type') {\n                    this.engineInformation.controls['other_fuel_type'].setValue(\n                      this.vehDetail?.fuel_type\n                    );\n                    this.engineInformation.controls['fuel_type'].setValue(\n                      'Other'\n                    );\n                  }\n                });\n              }\n              // if (this.submitRequest) {\n              //   this.getTuningRequired();\n              // }\n            }\n          });\n          this.crud\n            .getRequest(cusRequestUrl.getVehicleTypeList)\n            .then((res: any) => {\n              this.vehicleTypes = res;\n              this.vehicleTypes = this.sort(this.vehicleTypes, 'name');\n              var a = {\n                id: 0,\n                name: 'Other',\n              };\n              this.vehicleTypes.push(a);\n              // this.vehicleInformation.controls['vehicle_type'].setValue(this.vehDetail?.vehicle_type);\n              this.vehicleTypes.forEach((element: any) => {\n                if (element.name == this.vehDetail?.vehicle_type) {\n                  this.vehicleInformation.controls['vehicle_type'].setValue(\n                    element.id\n                  );\n                  this.getVehicleBrands(true);\n                }\n              });\n            });\n          this.vehicleInformation.controls['customer_first_name'].setValue(\n            this.vehDetail?.customer_first_name\n          );\n          this.vehicleInformation.controls['customer_last_name'].setValue(\n            this.vehDetail?.customer_last_name\n          );\n          this.vehicleInformation.controls['vehicle_registration'].setValue(\n            this.vehDetail?.vehicle_registration\n          );\n          this.vehicleInformation.controls['vehicle_year'].setValue(\n            this.vehDetail?.vehicle_year\n          );\n          this.vehicleInformation.controls['vehicle_VIN'].setValue(\n            this.vehDetail?.vehicle_VIN\n          );\n          this.vehicleInformation.controls['file_type'].setValue(\n            this.vehDetail?.file_type\n          );\n          this.vehicleInformation.controls['tuning_tool_used'].setValue(\n            this.vehDetail?.tuning_tool_used\n          );\n          this.engineInformation.controls['engine_size'].setValue(\n            this.vehDetail?.engine_size.split('.')[0]\n          );\n          this.engineInformation.controls['engine_size_deci'].setValue(\n            this.vehDetail?.engine_size.split('.')[1]\n          );\n          this.vehicleInformation.controls['tuning_tool_used'].setValue(\n            this.vehDetail?.tuning_tool_used\n          );\n          this.engineInformation.controls['transmission'].setValue(\n            this.vehDetail?.transmission\n          );\n          this.engineInformation.controls['mileage_type'].setValue(\n            this.vehDetail?.mileage_type\n          );\n          this.engineInformation.controls['mileage'].setValue(\n            this.vehDetail?.mileage\n          );\n          this.ecuInformation.controls['ecu_version'].setValue(\n            this.vehDetail?.ecu_version\n          );\n          this.ecuInformation.controls['control_unit'].setValue(\n            this.vehDetail?.control_unit\n          );\n          this.additionalInformation.controls['country'].setValue(\n            this.vehDetail?.country\n          );\n          this.additionalInformation.controls['additional_function'].setValue(\n            this.vehDetail?.additional_function\n          );\n          this.additionalInformation.controls[\n            'other_additional_function'\n          ].setValue(this.vehDetail?.other_additional_function);\n          this.additionalInformation.controls['additional_info'].setValue(\n            this.vehDetail?.additional_info\n          );\n          // this.a = this.buyItemDetail?.additionalFuncArray;\n          // setTimeout(() => {\n          //   this.getTuningRequired(true);\n          // }, 9000);\n          if (this.vehDetail?.other_fields) {\n            this.other_field = this.vehDetail?.other_fields.split(',');\n            this.other_field.forEach((ele: any) => {\n              if (ele == 'vehicle_type') {\n                this.showOtherVehicleType = true;\n                var a = {\n                  id: 0,\n                  brand_name: 'Other',\n                };\n                this.vehicleBrandList.push(a);\n                this.vehicleInformation.controls['other_vehicle_type'].setValue(\n                  this.vehDetail?.vehicle_type\n                );\n                this.vehicleInformation.controls['vehicle_type'].setValue(0);\n              } else if (ele == 'vehicle_make') {\n                this.showOtherVehicleMake = true;\n                var b = {\n                  id: 0,\n                  model_name: 'Other',\n                  file_key_credit: 1,\n                };\n                this.modelList.push(b);\n                this.vehicleInformation.controls['other_vehicle_make'].setValue(\n                  this.vehDetail?.vehicle_make\n                );\n                this.vehicleInformation.controls['vehicle_make'].setValue(0);\n              } else if (ele == 'model') {\n                this.showOtherModel = true;\n                this.vehicleInformation.controls['other_model'].setValue(\n                  this.vehDetail?.model\n                );\n                this.vehicleInformation.controls['model'].setValue(0);\n              } else if (ele == 'tuning_tool_used') {\n                this.vehicleInformation.controls[\n                  'other_tuning_tool_used'\n                ].setValue(this.vehDetail?.tuning_tool_used);\n                this.vehicleInformation.controls['tuning_tool_used'].setValue(\n                  'Other'\n                );\n              } else if (ele == 'transmission') {\n                this.engineInformation.controls['other_transmission'].setValue(\n                  this.vehDetail?.transmission\n                );\n                this.engineInformation.controls['transmission'].setValue(\n                  'Other'\n                );\n              } else if (ele == 'control_unit') {\n                this.ecuInformation.controls['other_control_unit'].setValue(\n                  this.vehDetail?.control_unit\n                );\n                this.ecuInformation.controls['control_unit'].setValue('Other');\n              }\n            });\n          }\n        }\n      });\n  }\n  autotuningListSet() {\n    this.newTuningRequiredList = [];\n    if (\n      this.engineInformation.controls['fuel_type'].value == 'Gasoline Hybrid' ||\n      this.engineInformation.controls['fuel_type'].value == 'Gasoline'\n    ) {\n      this.tuningRequiredList = {\n        ...this.vehicleDetails.tuning_required.business.gasoline,\n        ...this.vehicleDetails.tuning_required.individual.gasoline,\n      };\n\n      for (var key in this.tuningRequiredList) {\n        var ab = {\n          value: key,\n          name: this.tuningRequiredList[key],\n        };\n        this.newTuningRequiredList.push(ab);\n      }\n      this.tuningRequiredList = this.newTuningRequiredList;\n      console.log(this.tuningRequiredList, 'tuning required list/////////////');\n\n      this.additionalFunctionList =\n        this.vehicleDetails.additional_functions.gasoline;\n      this.showAdditonalFunction = true;\n      for (let i = 0; i < this.additionalFunctionList.length; i++) {\n        this.selectAdditionalFun[i] = false;\n      }\n    } else if (\n      this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid' ||\n      this.engineInformation.controls['fuel_type'].value == 'Diesel'\n    ) {\n      this.tuningRequiredList = {\n        ...this.vehicleDetails.tuning_required.business.gasoline,\n        ...this.vehicleDetails.tuning_required.individual.gasoline,\n      };\n      for (var key in this.tuningRequiredList) {\n        var ab = {\n          value: key,\n          name: this.tuningRequiredList[key],\n        };\n        this.newTuningRequiredList.push(ab);\n      }\n      this.tuningRequiredList = this.newTuningRequiredList;\n      this.additionalFunctionList =\n        this.vehicleDetails.additional_functions.diesel;\n      console.log(\n        this.tuningRequiredList,\n        'tuning required list////////////#################/'\n      );\n\n      this.showAdditonalFunction = true;\n      for (let i = 0; i < this.additionalFunctionList.length; i++) {\n        this.selectAdditionalFun[i] = false;\n      }\n    } else {\n      this.tuningRequiredList = [];\n      var abc = {\n        value: 'NO TUNE',\n        name: 'NO TUNE',\n      };\n      this.tuningRequiredList.push(abc);\n      this.showAdditonalFunction = false;\n    }\n    this.additionalInformation.controls['tuning_required'].setValue(\n      this.vehDetail?.tuning_required\n    );\n  }\n  autoEcuBrandVersionSet() {\n    // Ecu Brand and version code starts from here\n    this.newUniqueEcuBrandList = [];\n    this.ecuBrandList.forEach((element: any) => {\n      if (\n        element.fuel_type == 'Petrol' &&\n        (this.engineInformation.value.fuel_type == 'Gasoline Hybrid' ||\n          this.engineInformation.value.fuel_type == 'Gasoline')\n      ) {\n        this.newUniqueEcuBrandList.push(element);\n      } else if (\n        this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid' ||\n        this.engineInformation.controls['fuel_type'].value == 'Diesel'\n      ) {\n        if (\n          element.fuel_type == 'Diesel' ||\n          element.fuel_type == 'Diesel Hybrid'\n        ) {\n          this.newUniqueEcuBrandList.push(element);\n        }\n      } else if (\n        element.fuel_type == this.engineInformation.controls['fuel_type'].value\n      )\n        this.newUniqueEcuBrandList.push(element);\n    });\n    this.uniqueBrands = Object.values(\n      this.newUniqueEcuBrandList.reduce((acc: any, obj: any) => {\n        acc[obj.ecu_brand] = obj;\n        return acc;\n      }, {})\n    );\n    var uniqueBrandListBaseOnCtrlUnit = this.uniqueBrands;\n    this.uniqueBrands = [];\n\n    uniqueBrandListBaseOnCtrlUnit.forEach((element: any) => {\n      if (element.ecu_type == this.ecuInformation.value.control_unit)\n        this.uniqueBrands.push(element);\n    });\n\n    if (this.uniqueBrands.length > 0) {\n      this.editEcuBrandVesrsion = false;\n      this.showEcuBrand = false;\n      this.showEcuVersion = false;\n      this.ecuInformation.controls['other_ecu_brand'].setValue('');\n      this.ecuInformation.controls['other_ecu_version'].setValue('');\n      var a = {\n        id: 0,\n        ecu_brand: 'Other',\n      };\n      this.uniqueBrands.push(a);\n    } else {\n      this.showEcuBrand = false;\n      this.showEcuVersion = false;\n      this.editEcuBrandVesrsion = true;\n      var a = {\n        id: 0,\n        ecu_brand: 'Other',\n      };\n      this.uniqueBrands.push(a);\n      this.newECU_versionList = [];\n      var b = {\n        ecu_version: 'Other',\n      };\n      this.newECU_versionList.push(b);\n      this.ecuInformation.controls['ecu_version'].setValue(\n        'Select ECU Version'\n      );\n    }\n    if (!this.editEcuBrandVesrsion) {\n      this.newECU_versionList = [];\n      var brand = '';\n      this.ecuBrandList.forEach((element: any) => {\n        if (element.id == this.ecuInformation.value.ecu_brand)\n          brand = element.ecu_brand;\n      });\n      this.ecuBrandList.forEach((element: any) => {\n        if (\n          element.ecu_brand == brand &&\n          element.fuel_type ==\n            this.engineInformation.controls['fuel_type'].value\n        )\n          this.newECU_versionList.push(element);\n        else if (\n          element.ecu_brand == brand &&\n          element.fuel_type == 'Petrol' &&\n          (this.engineInformation.value.fuel_type == 'Gasoline Hybrid' ||\n            this.engineInformation.value.fuel_type == 'Gasoline')\n        )\n          this.newECU_versionList.push(element);\n        else if (\n          element.ecu_brand == brand &&\n          (element.fuel_type == 'Diesel' ||\n            element.fuel_type == 'Diesel Hybrid')\n        ) {\n          if (\n            this.engineInformation.controls['fuel_type'].value == 'Diesel' ||\n            this.engineInformation.controls['fuel_type'].value ==\n              'Diesel Hybrid'\n          ) {\n            this.newECU_versionList.push(element);\n          }\n        }\n        // if (element.ecu_brand == brand)\n        //   this.newECU_versionList.push(element);\n      });\n      this.newECU_versionList = this.sort(\n        this.newECU_versionList,\n        'ecu_version'\n      );\n      var b = {\n        ecu_version: 'Other',\n      };\n      this.newECU_versionList.push(b);\n    }\n    // if (isEdit)\n    //   this.ecuInformation.controls['ecu_version'].setValue(this.newECU_versionList[0].ecu_version)\n    this.ecuInformation.controls['ecu_brand'].setValue(\n      this.vehDetail?.ecu_brand\n    );\n    this.uniqueBrands.forEach((element: any) => {\n      if (element.ecu_brand == this.vehDetail?.ecu_brand)\n        this.ecuInformation.controls['ecu_brand'].setValue(element.id);\n        this.setFuelModel(false);\n    });\n    if (this.vehDetail?.other_fields) {\n      this.other_field = this.vehDetail?.other_fields.split(',');\n      this.other_field.forEach((ele: any) => {\n        if (ele == 'ecu_brand') {\n          this.showEcuBrand = true;\n          this.ecuInformation.controls['other_ecu_brand'].setValue(\n            this.vehDetail?.ecu_brand\n          );\n          this.ecuInformation.controls['ecu_brand'].setValue(0);\n        }\n      });\n\n      this.setFuelModel(true);\n    }\n    // else{\n    //   this.uniqueBrands.forEach((element:any) => {\n    //       if(element.ecu_brand == this.vehDetail?.ecu_brand){\n    //         this.ecuInformation.controls['ecu_brand'].setValue(element.id);\n    //       }\n    //   });\n\n    // }\n  }\n  sortEle(arr: any) {\n    return arr.sort((a: any, b: any) => {\n      return a.toLowerCase().localeCompare(b.toLowerCase());\n    });\n  }\n  sort(array: any, key: any) {\n    return array.sort((a: any, b: any) => {\n      var nameA = a[key].toUpperCase();\n      var nameB = b[key].toUpperCase();\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  moveCountryOnTop(name: string) {\n    const index = this.countryData.findIndex(\n      (item: any) => item.country === name\n    );\n    if (index !== -1) {\n      const removedObject = this.countryData.splice(index, 1)[0];\n      this.countryData.unshift(removedObject);\n    }\n  }\n  getTicketCategory() {\n    this.crud.getRequest(cusRequestUrl.getTicketCategory).then((res: any) => {\n      if (res) {\n        this.ticketCategories = res.data.results;\n        this.ticketCreateForm.patchValue({\n          category: this.ticketCategories[0].id,\n        });\n      }\n    });\n  }\n  getVehicleBrands(autocall?: boolean) {\n    this.vehicleBrandList = [];\n    if (this.vehicleInformation.controls['vehicle_type'].value != 0) {\n      this.crud\n        .getRequest(\n          `${cusRequestUrl.getVehicleBrandList}${this.vehicleInformation.controls['vehicle_type'].value}`\n        )\n        .then((res: any) => {\n          if (res) {\n            this.vehicleBrandList = res;\n            this.vehicleBrandList = this.sort(\n              this.vehicleBrandList,\n              'brand_name'\n            );\n            var a = {\n              id: 0,\n              brand_name: 'Other',\n            };\n            this.vehicleBrandList.push(a);\n            if (autocall) {\n              this.vehicleBrandList.forEach((element: any) => {\n                if (element.brand_name == this.vehDetail?.vehicle_make) {\n                  this.vehicleInformation.controls['vehicle_make'].setValue(\n                    element.id\n                  );\n                  this.getBrandModel(true);\n                }\n              });\n            }\n            // else\n            //   this.getBrandModel();\n          }\n        });\n    }\n  }\n\n  getBrandModel(autocall?: boolean) {\n    if (this.vehicleInformation.controls['vehicle_make'].value != 0) {\n      this.crud\n        .getRequest(\n          `${cusRequestUrl.getBrandModal}${this.vehicleInformation.controls['vehicle_make'].value}`\n        )\n        .then((res: any) => {\n          if (res) {\n            this.modelList = res;\n            this.modelList = this.sort(this.modelList, 'model_name');\n            var a = {\n              id: 0,\n              model_name: 'Other',\n              file_key_credit: 1,\n            };\n            this.modelList.push(a);\n            if (autocall) {\n              this.modelList.forEach((element: any) => {\n                if (element.model_name == this.vehDetail?.model) {\n                  this.vehicleInformation.controls['model'].setValue(\n                    element.id\n                  );\n                  console.log(\n                    element.id,\n                    this.vehDetail.model,\n                    'kkkkkkkkkkkkkkkkkkkkk'\n                  );\n\n                  this.getVehicleControlList(true);\n                }\n              });\n            }\n          }\n        });\n    }\n  }\n  otherVehicleDetailBoxController(type: string) {\n    var a = {\n      id: 0,\n      brand_name: 'Other',\n    };\n    var ab = {\n      id: 0,\n      model_name: 'Other',\n      file_key_credit: 1,\n    };\n    if (type != 'model') this.modelList.push(ab);\n    if (type == 'vehicleType') {\n      this.vehicleBrandList = [];\n      this.modelList = [];\n      this.showOtherVehicleType =\n        this.vehicleInformation.value.vehicle_type == 0 ? true : false;\n      // this.showOtherVehicleMake = this.vehicleInformation.value.vehicle_type == 0 ? true : false;\n      // this.showOtherModel = this.vehicleInformation.value.vehicle_type == 0 ? true : false;\n      this.showOtherVehicleMake = false;\n      this.showOtherModel = false;\n      this.vehicleBrandList.push(a);\n      this.modelList.push(ab);\n      this.vehicleInformation.controls['other_vehicle_type'].setValue('');\n      this.vehicleInformation.controls['other_vehicle_make'].setValue('');\n      this.vehicleInformation.controls['other_model'].setValue('');\n      this.vehicleInformation.controls['vehicle_make'].setValue(\n        'Select Vehicle Make'\n      );\n      this.vehicleInformation.controls['model'].setValue(\n        'Select Vehicle Model'\n      );\n    } else if (type == 'vehicleMake') {\n      this.modelList = [];\n      this.showOtherVehicleMake =\n        this.vehicleInformation.value.vehicle_make == 0 ? true : false;\n      // this.showOtherModel = this.vehicleInformation.value.vehicle_make == 0 ? true : false;\n      this.showOtherModel = false;\n      this.modelList.push(ab);\n      this.vehicleInformation.controls['model'].setValue(\n        'Select Vehicle Model'\n      );\n      this.vehicleInformation.controls['other_vehicle_make'].setValue('');\n      this.vehicleInformation.controls['other_model'].setValue('');\n    } else if (type == 'model') {\n      this.showOtherModel =\n        this.vehicleInformation.value.model == 0 ? true : false;\n      this.vehicleInformation.controls['other_model'].setValue('');\n      // this.modelList.push(ab);\n    }\n    this.resetEcuBrandVersion(true);\n  }\n  getTypeCount() {\n    this.crud.getRequest(cusRequestUrl.getCustomerProfile).then((res: any) => {\n      localStorage.setItem('userdetails', JSON.stringify(res.data));\n      this.users = JSON.parse(localStorage.getItem('userdetails') || '');\n    });\n  }\n\n  getVehicleControlList(autocall?: boolean) {\n    this.crud\n      .getRequest(\n        `${cusRequestUrl.getVehicleControlList}${this.vehicleInformation.controls['model'].value}`\n      )\n      .then((res: any) => {\n        if (res) {\n          this.ecuBrandList = res;\n          this.unique = [];\n          this.uniqueECUBrand = [];\n          this.unique = this.ecuBrandList.filter((element: any) => {\n            const isDublicate = this.uniqueECUBrand.includes(element.ecu_brand);\n            if (!isDublicate) {\n              this.uniqueECUBrand.push(element.ecu_brand);\n              return true;\n            } else return false;\n          });\n          this.unique = this.sort(this.unique, 'ecu_brand');\n          if (autocall) {\n            this.autoEcuBrandVersionSet();\n          }\n        }\n      });\n    if (!autocall) this.resetEcuBrandVersion(true);\n  }\n  newECU_versionList: any = [];\n  setFuelModel(autoCall?: boolean) {\n    this.newECU_versionList = [];\n    var brand = '';\n    this.ecuBrandList.forEach((element: any) => {\n      console.log(this.ecuInformation.value.ecu_brand,element,'element.id');\n      \n      if (element.id == this.ecuInformation.value.ecu_brand)\n        brand = element.ecu_brand;\n    });\n    this.ecuBrandList.forEach((element: any) => {\n      if (\n        element.ecu_brand == brand &&\n        element.fuel_type == this.engineInformation.controls['fuel_type'].value\n      )\n        this.newECU_versionList.push(element);\n      else if (\n        element.ecu_brand == brand &&\n        element.fuel_type == 'Petrol' &&\n        (this.engineInformation.value.fuel_type == 'Gasoline Hybrid' ||\n          this.engineInformation.value.fuel_type == 'Gasoline')\n      )\n        this.newECU_versionList.push(element);\n      else if (\n        element.ecu_brand == brand &&\n        (element.fuel_type == 'Diesel' || element.fuel_type == 'Diesel Hybrid')\n      ) {\n        if (\n          this.engineInformation.controls['fuel_type'].value == 'Diesel' ||\n          this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid'\n        ) {\n          this.newECU_versionList.push(element);\n        }\n      }\n    });\n    var ecuListBaseOnCtrlUnit = this.newECU_versionList;\n    this.newECU_versionList = [];\n\n    ecuListBaseOnCtrlUnit.forEach((element: any) => {\n      if (element.ecu_type == this.ecuInformation.value.control_unit)\n        this.newECU_versionList.push(element);\n    });\n\n    this.newECU_versionList = this.sort(this.newECU_versionList, 'ecu_version');\n    var b = {\n      ecu_version: 'Other',\n    };\n    this.newECU_versionList.push(b);\n    if (!autoCall) {\n      this.ecuInformation.controls['ecu_version'].setValue(\n        'Select ECU Version'\n      );\n      this.ecuInformation.controls['other_ecu_version'].setValue('');\n      this.ecuInformation.controls['other_ecu_brand'].setValue('');\n      this.showEcuVersion = false;\n    }\n    if (autoCall) {\n      this.ecuInformation.controls['ecu_version'].setValue(\n        this.vehDetail?.ecu_version\n      );\n      if (this.vehDetail?.other_fields) {\n        this.other_field = this.vehDetail?.other_fields.split(',');\n        this.other_field.forEach((ele: any) => {\n          if (ele == 'ecu_version') {\n            this.showEcuVersion = true;\n            this.ecuInformation.controls['other_ecu_version'].setValue(\n              this.vehDetail?.ecu_version\n            );\n            this.ecuInformation.controls['ecu_version'].setValue('Other');\n          }\n        });\n      }\n    }\n  }\n  resetEcuBrandVersion(all: boolean) {\n    this.ecuInformation.controls['ecu_brand'].setValue('Select ECU Brand');\n    this.ecuInformation.controls['other_ecu_brand'].setValue('');\n    this.ecuInformation.controls['other_control_unit'].setValue('');\n    this.ecuInformation.controls['ecu_version'].setValue('Select ECU Version');\n    this.ecuInformation.controls['other_ecu_version'].setValue('');\n    this.showEcuBrand = false;\n    this.showEcuVersion = false;\n    this.newECU_versionList = [];\n    if (all) {\n      this.engineInformation.controls['fuel_type'].setValue('Select Fuel Type');\n      this.ecuInformation.controls['control_unit'].setValue(\n        'Select Control Unit'\n      );\n      this.engineInformation.controls['other_fuel_type'].setValue('');\n      this.uniqueBrands = [];\n    }\n  }\n  resetCtrlUnit() {\n    this.ecuInformation.controls['control_unit'].setValue(\n      'Select Control Unit'\n    );\n    this.ecuInformation.controls['other_control_unit'].setValue('');\n    this.uniqueBrands = [];\n    this.resetEcuBrandVersion(false);\n  }\n\n  a: any = [];\n  showAddiInfoOtherBox: boolean = false;\n  selectAddFun(i: any) {\n    this.selectAdditionalFun[i] = !this.selectAdditionalFun[i];\n    if (\n      this.selectAdditionalFun[i] &&\n      this.additionalFunctionList[i] == 'Other'\n    ) {\n      this.showAddiInfoOtherBox = true;\n    } else if (\n      !this.selectAdditionalFun[i] &&\n      this.additionalFunctionList[i] == 'Other'\n    ) {\n      this.showAddiInfoOtherBox = false;\n    }\n    if (this.selectAdditionalFun[i]) {\n      this.a.push(this.additionalFunctionList[i]);\n      var b = this.additionalInformation.value.additional_function;\n\n      this.a.forEach((res: any) => {\n        this.additionalInformation.patchValue({\n          additional_function:\n            b +\n            (this.additionalInformation.value.additional_function.length > 0\n              ? ', '\n              : '') +\n            res,\n        });\n      });\n    } else {\n      this.additionalInformation.controls['additional_function'].setValue('');\n      const index = this.a.indexOf(this.additionalFunctionList[i]);\n      if (index > -1) {\n        this.a.splice(index, 1);\n      }\n      this.a.forEach((res: any) => {\n        var b = this.additionalInformation.value.additional_function;\n        this.additionalInformation.patchValue({\n          additional_function:\n            b +\n            (this.additionalInformation.value.additional_function.length > 0\n              ? ', '\n              : '') +\n            res,\n        });\n      });\n    }\n  }\n  newUniqueEcuBrandList: any = [];\n  editEcuBrandVesrsion: boolean = false;\n  newTuningRequiredList: any = [];\n  uniqueBrands: any;\n\n  getTuningRequired(autocall?: boolean) {\n    if (!autocall) {\n      this.newTuningRequiredList = [];\n      if (\n        this.engineInformation.controls['fuel_type'].value ==\n          'Gasoline Hybrid' ||\n        this.engineInformation.controls['fuel_type'].value == 'Gasoline'\n      ) {\n        // this.tuningRequiredList = this.users.role == 'INDIVIDUAL_CUSTOMER' ? this.vehicleDetails.tuning_required.individual.gasoline : this.vehicleDetails.tuning_required.business.gasoline;\n        this.tuningRequiredList = {\n          ...this.vehicleDetails.tuning_required.business.gasoline,\n          ...this.vehicleDetails.tuning_required.individual.gasoline,\n        };\n\n        //       for (var key in this.tuningRequiredList) {\n        //         var ab = {\n        //           value: key,\n        //           name: this.tuningRequiredList[key]\n        //         }\n        //         this.newTuningRequiredList.push(ab);\n        //       }\n        //       this.tuningRequiredList = this.newTuningRequiredList;\n        for (var key in this.tuningRequiredList) {\n          var ab = {\n            value: key,\n            name: this.tuningRequiredList[key],\n          };\n          this.newTuningRequiredList.push(ab);\n        }\n        this.tuningRequiredList = this.newTuningRequiredList;\n        console.log(\n          this.tuningRequiredList,\n          'tuning required list/////////////'\n        );\n\n        this.additionalFunctionList =\n          this.vehicleDetails.additional_functions.gasoline;\n        this.showAdditonalFunction = true;\n        for (let i = 0; i < this.additionalFunctionList.length; i++) {\n          this.selectAdditionalFun[i] = false;\n        }\n      } else if (\n        this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid' ||\n        this.engineInformation.controls['fuel_type'].value == 'Diesel'\n      ) {\n        this.tuningRequiredList = {\n          ...this.vehicleDetails.tuning_required.business.gasoline,\n          ...this.vehicleDetails.tuning_required.individual.gasoline,\n        };\n        // this.tuningRequiredList = this.users.role == 'INDIVIDUAL_CUSTOMER' ? this.vehicleDetails.tuning_required.individual.diesel : this.vehicleDetails.tuning_required.business.diesel;\n        for (var key in this.tuningRequiredList) {\n          var ab = {\n            value: key,\n            name: this.tuningRequiredList[key],\n          };\n          this.newTuningRequiredList.push(ab);\n        }\n        this.tuningRequiredList = this.newTuningRequiredList;\n        this.additionalFunctionList =\n          this.vehicleDetails.additional_functions.diesel;\n        console.log(\n          this.tuningRequiredList,\n          'tuning required list////////////#################/'\n        );\n\n        this.showAdditonalFunction = true;\n        for (let i = 0; i < this.additionalFunctionList.length; i++) {\n          this.selectAdditionalFun[i] = false;\n        }\n      } else {\n        this.tuningRequiredList = [];\n        var abc = {\n          value: 'NO TUNE',\n          name: 'NO TUNE',\n        };\n        this.tuningRequiredList.push(abc);\n        this.showAdditonalFunction = false;\n      }\n    }\n    // Ecu Brand and version code starts from here\n    this.newUniqueEcuBrandList = [];\n    this.ecuBrandList.forEach((element: any) => {\n      if (\n        element.fuel_type == 'Petrol' &&\n        (this.engineInformation.value.fuel_type == 'Gasoline Hybrid' ||\n          this.engineInformation.value.fuel_type == 'Gasoline')\n      ) {\n        this.newUniqueEcuBrandList.push(element);\n      } else if (\n        this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid' ||\n        this.engineInformation.controls['fuel_type'].value == 'Diesel'\n      ) {\n        if (\n          element.fuel_type == 'Diesel' ||\n          element.fuel_type == 'Diesel Hybrid'\n        ) {\n          this.newUniqueEcuBrandList.push(element);\n        }\n      } else if (\n        element.fuel_type == this.engineInformation.controls['fuel_type'].value\n      )\n        this.newUniqueEcuBrandList.push(element);\n    });\n    this.uniqueBrands = Object.values(\n      this.newUniqueEcuBrandList.reduce((acc: any, obj: any) => {\n        acc[obj.ecu_brand] = obj;\n        return acc;\n      }, {})\n    );\n    var uniqueBrandListBaseOnCtrlUnit = this.uniqueBrands;\n    this.uniqueBrands = [];\n\n    uniqueBrandListBaseOnCtrlUnit.forEach((element: any) => {\n      if (element.ecu_type == this.ecuInformation.value.control_unit)\n        this.uniqueBrands.push(element);\n    });\n\n    if (this.uniqueBrands.length > 0) {\n      this.editEcuBrandVesrsion = false;\n      this.showEcuBrand = false;\n      this.showEcuVersion = false;\n      this.ecuInformation.controls['other_ecu_brand'].setValue('');\n      this.ecuInformation.controls['other_ecu_version'].setValue('');\n      var a = {\n        id: 0,\n        ecu_brand: 'Other',\n      };\n      this.uniqueBrands.push(a);\n    } else {\n      this.showEcuBrand = false;\n      this.showEcuVersion = false;\n      this.editEcuBrandVesrsion = true;\n      var a = {\n        id: 0,\n        ecu_brand: 'Other',\n      };\n      this.uniqueBrands.push(a);\n      if (!autocall)\n        this.ecuInformation.controls['ecu_brand'].setValue('Select ECU Brand');\n      this.newECU_versionList = [];\n      var b = {\n        ecu_version: 'Other',\n      };\n      this.newECU_versionList.push(b);\n      this.ecuInformation.controls['ecu_version'].setValue(\n        'Select ECU Version'\n      );\n    }\n    if (!this.editEcuBrandVesrsion) {\n      this.newECU_versionList = [];\n      var brand = '';\n      this.ecuBrandList.forEach((element: any) => {\n        if (element.id == this.ecuInformation.value.ecu_brand)\n          brand = element.ecu_brand;\n      });\n      this.ecuBrandList.forEach((element: any) => {\n        if (\n          element.ecu_brand == brand &&\n          element.fuel_type ==\n            this.engineInformation.controls['fuel_type'].value\n        )\n          this.newECU_versionList.push(element);\n        else if (\n          element.ecu_brand == brand &&\n          element.fuel_type == 'Petrol' &&\n          (this.engineInformation.value.fuel_type == 'Gasoline Hybrid' ||\n            this.engineInformation.value.fuel_type == 'Gasoline')\n        )\n          this.newECU_versionList.push(element);\n        else if (\n          element.ecu_brand == brand &&\n          (element.fuel_type == 'Diesel' ||\n            element.fuel_type == 'Diesel Hybrid')\n        ) {\n          if (\n            this.engineInformation.controls['fuel_type'].value == 'Diesel' ||\n            this.engineInformation.controls['fuel_type'].value ==\n              'Diesel Hybrid'\n          ) {\n            this.newECU_versionList.push(element);\n          }\n        }\n        // if (element.ecu_brand == brand)\n        //   this.newECU_versionList.push(element);\n      });\n      this.newECU_versionList = this.sort(\n        this.newECU_versionList,\n        'ecu_version'\n      );\n      var b = {\n        ecu_version: 'Other',\n      };\n      this.newECU_versionList.push(b);\n    }\n    // if (isEdit)\n    //   this.ecuInformation.controls['ecu_version'].setValue(this.newECU_versionList[0].ecu_version)\n    if (autocall) {\n      this.ecuInformation.controls['ecu_brand'].setValue(\n        this.vehDetail?.ecu_brand\n      );\n      this.uniqueBrands.forEach((element: any) => {\n        if (element.ecu_brand == this.vehDetail?.ecu_brand)\n          this.ecuInformation.controls['ecu_brand'].setValue(element.id);\n      });\n      if (this.vehDetail?.other_fields) {\n        this.other_field = this.vehDetail?.other_fields.split(',');\n        this.other_field.forEach((ele: any) => {\n          if (ele == 'ecu_brand') {\n            this.showEcuBrand = true;\n            this.ecuInformation.controls['other_ecu_brand'].setValue(\n              this.vehDetail?.ecu_brand\n            );\n            this.ecuInformation.controls['ecu_brand'].setValue(0);\n          }\n        });\n      }\n      this.setFuelModel(true);\n    } else {\n      this.engineInformation.controls['other_fuel_type'].setValue('');\n      this.resetEcuBrandVersion(false);\n    }\n  }\n  ctrlUnitChange() {}\n  showEcuBrand: boolean = false;\n  showEcuVersion: boolean = false;\n  showOtherEcuBrand_version(type: string) {\n    if (type == 'brand' && this.ecuInformation.value.ecu_brand == '0')\n      this.showEcuBrand = true;\n    else if (type == 'brand' && this.ecuInformation.value.ecu_brand != '0') {\n      this.showEcuBrand = false;\n      this.showEcuVersion = false;\n    } else if (\n      type == 'version' &&\n      this.ecuInformation.value.ecu_version == 'Other'\n    )\n      this.showEcuVersion = true;\n    else if (\n      type == 'version' &&\n      this.ecuInformation.value.ecu_version != 'Other'\n    )\n      this.showEcuVersion = false;\n  }\n  markAllControlsAsTouched(formGroup: FormGroup) {\n    Object.values(formGroup.controls).forEach((control) => {\n      control.markAsTouched();\n      if (control instanceof FormGroup) {\n        this.markAllControlsAsTouched(control);\n      }\n    });\n  }\n\n  areFormsValid() {\n    if(this.ecuInformation.invalid ||\n      this.vehicleInformation.invalid ||\n      this.engineInformation.invalid ||\n      this.additionalInformation.invalid\n    ) {\n      this.ecuInformation.markAllAsTouched()\n      this.vehicleInformation.markAllAsTouched()\n      this.engineInformation.markAllAsTouched()\n      this.additionalInformation.markAllAsTouched()\n      console.log(\n        this.ecuInformation,\n        this.vehicleInformation,\n        this.engineInformation,\n        this.additionalInformation\n      )\n    }\n  }\n  \n  other_fields: any;\n  submitForm(type: any) {\n\n    this.areFormsValid()\n\n\n    this.formData = new FormData();\n    this.formData3 = new FormData();\n    if (type == 'finalSubmit') {\n      if (\n        this.vehicleInformation.value.tuning_tool_used ==\n          'Select Tuning Tool' ||\n        this.vehicleInformation.value.file_type == 'Select File Type' ||\n        this.vehicleInformation.value.vehicle_year == 'Select Vehicle Year' ||\n        this.engineInformation.value.transmission == 'Select Transmission' ||\n        this.engineInformation.value.mileage_type == 'Select Mileage Type' ||\n        this.ecuInformation.value.control_unit == 'Select Control Unit' ||\n        this.additionalInformation.value.tuning_required ==\n          'Select Tuning Required' ||\n        this.additionalInformation.value.country == 'Select Your Country'\n      ) {\n        this.showSelectError = true;\n      } else {\n        this.showSelectError = false;\n      }\n      if (\n        this.acceptTermBusi &&\n        this.vehicleInformation.valid &&\n        this.engineInformation.valid &&\n        this.showSelectError == false\n      ) {\n        if (this.vehicleTypes) {\n          this.vehicleTypes.forEach((element: any) => {\n            if (\n              this.vehicleInformation.controls['vehicle_type'].value ==\n              element.id\n            ) {\n              this.formData.append(\n                'vehicle_type',\n                element.name == 'Other'\n                  ? this.vehicleInformation.controls['other_vehicle_type'].value\n                  : element.name\n              );\n              this.formData3.append('vehicle_type', element.name);\n              if (element.name == 'Other') this.other_fields = 'vehicle_type';\n            }\n          });\n        }\n        if (this.vehicleBrandList) {\n          this.vehicleBrandList.forEach((element: any) => {\n            if (\n              this.vehicleInformation.controls['vehicle_make'].value ==\n              element.id\n            ) {\n              this.formData.append(\n                'vehicle_make',\n                element.name == 'Other'\n                  ? this.vehicleInformation.controls['other_vehicle_make'].value\n                  : element.brand_name\n              );\n              this.formData3.append('vehicle_make', element.brand_name);\n              if (element.brand_name == 'Other')\n                this.other_fields = this.other_fields\n                  ? this.other_fields + ',vehicle_make'\n                  : 'vehicle_make';\n            }\n          });\n        }\n        // else {\n        //   this.formData3.append('vehicle_make', this.vehicleInformation.controls['other_vehicle_make'].value);\n        // }\n        if (this.modelList) {\n          this.modelList.forEach((element: any) => {\n            if (this.vehicleInformation.controls['model'].value == element.id) {\n              this.formData.append(\n                'model',\n                element.name == 'Other'\n                  ? this.vehicleInformation.controls['other_model'].value\n                  : element.model_name\n              );\n              this.formData3.append('model', element.model_name);\n              if (element.model_name == 'Other')\n                this.other_fields = this.other_fields\n                  ? this.other_fields + ',model'\n                  : 'model';\n            }\n          });\n        }\n        // else {\n        //   this.formData3.append('model', this.vehicleInformation.controls['other_model'].value);\n        // }\n        var ecuBrandName = '';\n        if (this.editEcuBrandVesrsion == false) {\n          this.ecuBrandList.forEach((element: any) => {\n            if (element.id == this.ecuInformation.value.ecu_brand)\n              ecuBrandName = element.ecu_brand;\n          });\n        } else {\n          ecuBrandName = this.ecuInformation.value.ecu_brand;\n        }\n        let engineSizeValue = '';\n        if (this.engineInformation.controls['engine_size_deci'].value != '') {\n          engineSizeValue = `${this.engineInformation.controls['engine_size'].value}.${this.engineInformation.controls['engine_size_deci'].value}`;\n        } else {\n          engineSizeValue = `${this.engineInformation.controls['engine_size'].value}.0`;\n        }\n        this.formData.append(\n          'ecu_brand',\n          this.showEcuBrand\n            ? this.ecuInformation.value.other_ecu_brand\n            : ecuBrandName\n        );\n        if (this.showEcuBrand)\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',ecu_brand'\n            : 'ecu_brand';\n        this.formData.append(\n          'ecu_version',\n          this.showEcuVersion\n            ? this.ecuInformation.value.other_ecu_version\n            : this.ecuInformation.value.ecu_version\n        );\n        this.formData3.append('ecu_brand', ecuBrandName);\n        this.formData3.append(\n          'ecu_version',\n          this.ecuInformation.value.ecu_version\n        );\n        if (this.showEcuVersion)\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',ecu_version'\n            : 'ecu_version';\n        this.formData.append(\n          'file_key_credit',\n          this.onlyFileKeyCredit ? this.fileCreditRequired : 0\n        );\n        this.formData.append(\n          'function_credit',\n          this.onlyFuntionKeyCredit ? this.functionCreditRequired : 0\n        );\n        this.formData.append(\n          'customer_first_name',\n          this.vehicleInformation.controls['customer_first_name'].value\n        );\n        this.formData.append(\n          'customer_last_name',\n          this.vehicleInformation.controls['customer_last_name'].value\n        );\n        this.formData.append(\n          'vehicle_registration',\n          this.vehicleInformation.controls['vehicle_registration'].value\n        );\n        this.formData.append(\n          'vehicle_year',\n          this.vehicleInformation.controls['vehicle_year'].value\n        );\n        this.formData.append(\n          'vehicle_VIN',\n          this.vehicleInformation.controls['vehicle_VIN'].value\n        );\n        this.formData.append('engine_size', engineSizeValue);\n        this.formData.append(\n          'tuning_tool_used',\n          this.vehicleInformation.controls['tuning_tool_used'].value == 'Other'\n            ? this.vehicleInformation.controls['other_tuning_tool_used'].value\n            : this.vehicleInformation.controls['tuning_tool_used'].value\n        );\n        this.formData3.append(\n          'tuning_tool_used',\n          this.vehicleInformation.controls['tuning_tool_used'].value\n        );\n        if (\n          this.vehicleInformation.controls['tuning_tool_used'].value == 'Other'\n        )\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',tuning_tool_used'\n            : 'tuning_tool_used';\n        this.formData.append(\n          'transmission',\n          this.engineInformation.controls['transmission'].value == 'Other'\n            ? this.engineInformation.controls['other_transmission'].value\n            : this.engineInformation.controls['transmission'].value\n        );\n        this.formData3.append(\n          'transmission',\n          this.engineInformation.controls['transmission'].value\n        );\n        if (this.engineInformation.controls['transmission'].value == 'Other')\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',transmission'\n            : 'transmission';\n        this.formData.append(\n          'fuel_type',\n          this.engineInformation.controls['fuel_type'].value == 'Other'\n            ? this.engineInformation.controls['other_fuel_type'].value\n            : this.engineInformation.controls['fuel_type'].value\n        );\n        this.formData3.append(\n          'fuel_type',\n          this.engineInformation.controls['fuel_type'].value\n        );\n        if (this.engineInformation.controls['fuel_type'].value == 'Other')\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',fuel_type'\n            : 'fuel_type';\n        this.formData.append(\n          'mileage_type',\n          this.engineInformation.controls['mileage_type'].value\n        );\n        this.formData.append(\n          'mileage',\n          this.engineInformation.controls['mileage'].value\n        );\n        this.formData.append(\n          'control_unit',\n          this.ecuInformation.controls['control_unit'].value == 'Other'\n            ? this.ecuInformation.controls['other_control_unit'].value\n            : this.ecuInformation.controls['control_unit'].value\n        );\n        this.formData3.append(\n          'control_unit',\n          this.ecuInformation.controls['control_unit'].value\n        );\n        if (this.ecuInformation.controls['control_unit'].value == 'Other')\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',control_unit'\n            : 'control_unit';\n        this.formData.append(\n          'tuning_required',\n          this.additionalInformation.controls['tuning_required'].value\n        );\n        this.formData.append(\n          'country',\n          this.additionalInformation.controls['country'].value\n        );\n        this.formData.append(\n          'file_type',\n          this.vehicleInformation.controls['file_type'].value\n        );\n        this.formData.append(\n          'additional_info',\n          this.additionalInformation.controls['additional_info'].value\n        );\n        this.formData3.append(\n          'additional_info',\n          this.additionalInformation.controls['additional_info'].value\n        );\n        this.formData.append(\n          'additional_function',\n          this.additionalInformation.controls['additional_function'].value ==\n            'Other'\n            ? this.additionalInformation.controls['other_additional_function']\n                .value\n            : this.additionalInformation.controls['additional_function'].value\n        );\n        this.formData3.append(\n          'additional_function',\n          this.additionalInformation.controls['additional_function'].value\n        );\n        if (this.file) {\n          this.formData.append('tuning_file', this.file);\n        }\n        if (\n          this.additionalInformation.controls['additional_function'].value ==\n          'Other'\n        )\n          this.other_fields = this.other_fields\n            ? this.other_fields + ',additional_function'\n            : 'additional_function';\n        this.formData.append('other_fields', this.other_fields);\n        if (this.ticketId) this.formData.append('ticket_id', this.ticketId);\n        this.checkOtherCondition((cb: any) => {\n          if (cb) {\n            var url = cb;\n            this.crud.postRequest(url, this.formData).then((res: any) => {\n              if (res) {\n                this.toastr.success(res.message);\n                this.route.navigate([`/admin/fileservice`], {\n                  queryParams: { id: res.data.request_id },\n                });\n              }\n            });\n          }\n        });\n      } else {\n        this.markAllControlsAsTouched(this.engineInformation);\n        this.markAllControlsAsTouched(this.vehicleInformation);\n        this.acceptTermCondCount = this.acceptTermCondCount + 1;\n        this.toastr.error('Please fill all the required field.');\n      }\n    }\n  }\n  checkOtherCondition(cb: any) {\n    let count = 0;\n    var url;\n    this.formData3.forEach((value, key) => {\n      if (value == 'other' || value == 'Other' || value == 'OTHER') {\n        count = 1;\n        // if(this.vehicleInformation.controls['file_type'].value == 'Client/Slave')\n        // url = `file/service/request/create/re-submission/slave`;\n      }\n    });\n    // if (this.vehicleInformation.controls['file_type'].value == 'Client/Slave') {\n    //   if (this.vehicleInformation.controls['tuning_tool_used'].value != 'KESS v2' ||\n    //     this.vehicleInformation.controls['tuning_tool_used'].value != 'KTAG' ||\n    //     this.vehicleInformation.controls['tuning_tool_used'].value != 'KESS3') {\n    //     this.ticketCreateForm.patchValue({ 'description': `File are send for manual handle as user selected ${this.vehicleInformation.controls['tuning_tool_used'].value} tool.` })\n    //     count += 1;\n    //   }\n    // }\n    if (count == 1) {\n      this.toastr.error(\n        'Unable to submit the file due to incomplete selection in other fields.'\n      );\n      cb(false);\n    } else {\n      url = `file/service/request/create`;\n      cb(url);\n    }\n  }\n\n  fileUpload(event: any) {\n    this.file = event.target.files[0];\n    this.fileName = this.file.name;\n\n    if (event.target.files && event.target.files[0]) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n    }\n  }\n  counter(i: number) {\n    return new Array(i);\n  }\n  newFileList: any;\n  fileList: any = [];\n  ticketCreateFormSubmit() {\n    this.ticketFormData.append('subject', this.ticketCreateForm.value.subject);\n    this.ticketFormData.append(\n      'category',\n      this.ticketCreateForm.value.category\n    );\n    this.ticketFormData.append(\n      'description',\n      this.ticketCreateForm.value.description\n    );\n    this.crud\n      .postRequest(`${cusRequestUrl.createTicket}`, this.ticketFormData)\n      .then((res: any) => {\n        if (res) {\n          // this.toastr.success(res.message)\n          this.route.navigateByUrl('/file-service/file-services');\n        }\n      });\n  }\n  buyNow() {\n    let body = {\n      vehicleInfo: {\n        customer_first_name:\n          this.vehicleInformation.controls['customer_first_name'].value,\n        customer_last_name:\n          this.vehicleInformation.controls['customer_last_name'].value,\n        vehicle_type: this.vehicleInformation.controls['vehicle_type'].value,\n        other_vehicle_type:\n          this.vehicleInformation.controls['other_vehicle_type'].value,\n        vehicle_make: this.vehicleInformation.controls['vehicle_make'].value,\n        other_vehicle_make:\n          this.vehicleInformation.controls['other_vehicle_make'].value,\n        model: this.vehicleInformation.controls['model'].value,\n        other_model: this.vehicleInformation.controls['other_model'].value,\n        vehicle_registration:\n          this.vehicleInformation.controls['vehicle_registration'].value,\n        vehicle_year: this.vehicleInformation.controls['vehicle_year'].value,\n        vehicle_VIN: this.vehicleInformation.controls['vehicle_VIN'].value,\n        file_type: this.vehicleInformation.controls['file_type'].value,\n        tuning_tool_used:\n          this.vehicleInformation.controls['tuning_tool_used'].value,\n        other_tuning_tool_used:\n          this.vehicleInformation.controls['other_tuning_tool_used'].value,\n      },\n      engineInfo: {\n        engine_size: this.engineInformation.controls['engine_size'].value,\n        engine_size_deci:\n          this.engineInformation.controls['engine_size_deci'].value,\n        transmission: this.engineInformation.controls['transmission'].value,\n        other_transmission:\n          this.engineInformation.controls['other_transmission'].value,\n        fuel_type: this.engineInformation.controls['fuel_type'].value,\n        other_fuel_type:\n          this.engineInformation.controls['other_fuel_type'].value,\n        mileage_type: this.engineInformation.controls['mileage_type'].value,\n        mileage: this.engineInformation.controls['mileage'].value,\n      },\n      ecuInfo: {\n        ecu_brand: this.ecuInformation.controls['ecu_brand'].value,\n        ecu_version: this.ecuInformation.controls['ecu_version'].value,\n        control_unit: this.ecuInformation.controls['control_unit'].value,\n      },\n      additionalInfo: {\n        country: this.additionalInformation.controls['country'].value,\n        additional_function:\n          this.additionalInformation.controls['additional_function'].value,\n        other_additional_function:\n          this.additionalInformation.controls['other_additional_function']\n            .value,\n        tuning_required:\n          this.additionalInformation.controls['tuning_required'].value,\n        additional_info:\n          this.additionalInformation.controls['additional_info'].value,\n      },\n      additionalFuncArray: this.a,\n    };\n    localStorage.setItem('buyItemDetail', JSON.stringify(body));\n    this.route.navigate([`/credit/buy-credit`], {\n      queryParams: {\n        type: this.onlyFileKeyCredit ? 'file credit' : 'function credit',\n      },\n    });\n  }\n  acceptTermCondCount: number = 0;\n  acceptTermCond() {\n    this.acceptTermCondCount = this.acceptTermCondCount + 1;\n    this.acceptTermBusi = !this.acceptTermBusi;\n  }\n  resetForm() {\n    this.vehicleInformation.controls['customer_first_name'].setValue('');\n    this.vehicleInformation.controls['customer_last_name'].setValue('');\n    this.vehicleInformation.controls['vehicle_type'].setValue(\n      'Select Vehicle Type'\n    );\n    this.vehicleInformation.controls['other_vehicle_type'].setValue('');\n    this.vehicleInformation.controls['vehicle_make'].setValue(\n      'Select Vehicle Make'\n    );\n    this.vehicleInformation.controls['other_vehicle_make'].setValue('');\n    this.vehicleInformation.controls['model'].setValue('Select Vehicle Model');\n    this.vehicleInformation.controls['other_model'].setValue('');\n    this.vehicleInformation.controls['vehicle_registration'].setValue('');\n    this.vehicleInformation.controls['vehicle_year'].setValue(\n      'Select Vehicle Year'\n    );\n    this.vehicleInformation.controls['vehicle_VIN'].setValue('');\n    this.vehicleInformation.controls['file_type'].setValue('Select File Type');\n    this.vehicleInformation.controls['tuning_tool_used'].setValue(\n      'Select Tuning Tool'\n    );\n    this.vehicleInformation.controls['other_tuning_tool_used'].setValue('');\n    this.engineInformation.controls['engine_size'].setValue('');\n    this.engineInformation.controls['transmission'].setValue(\n      'Select Transmission'\n    );\n    this.engineInformation.controls['other_transmission'].setValue('');\n    this.engineInformation.controls['fuel_type'].setValue('Select Fuel Type');\n    this.engineInformation.controls['other_fuel_type'].setValue('');\n    this.engineInformation.controls['mileage_type'].setValue(\n      'Select Mileage Type'\n    );\n    this.engineInformation.controls['mileage'].setValue('');\n    this.ecuInformation.controls['ecu_brand'].setValue('Select ECU Brand');\n    this.ecuInformation.controls['ecu_version'].setValue('Select ECU Version');\n    this.ecuInformation.controls['control_unit'].setValue(\n      'Select Control Unit'\n    );\n    this.ecuInformation.controls['other_control_unit'].setValue('');\n    this.additionalInformation.controls['additional_function'].setValue('');\n    this.additionalInformation.controls['other_additional_function'].setValue(\n      ''\n    );\n    this.additionalInformation.controls['tuning_required'].setValue(\n      'Select Tuning Required'\n    );\n    this.additionalInformation.controls['additional_info'].setValue('');\n    this.showAdditonalFunction = false;\n    this.additionalFunctionList = [];\n    this.fileName = '';\n    this.formData.delete('tuning_file');\n  }\n  moveOtherInLast(arr: any, key: any) {\n    let otherIndex = arr.indexOf(key);\n    if (otherIndex !== -1) {\n      arr.splice(otherIndex, 1); // Remove \"Other\" from its current position\n      arr.push('Other');\n    }\n  }\n}\n\n// export class AdminRequestFileComponent {\n//   vehicleInformation!: FormGroup;\n//   engineInformation!: FormGroup;\n//   ecuInformation!: FormGroup;\n//   additionalInformation!: FormGroup;\n//   vehicle_step = false;\n//   engine_step = false;\n//   ecu_step = false;\n//   additional_step = false;\n//   step = 1;\n//   tab: string = 'form1';\n//   countries = require('country-data-list').countries;\n//   vehicleTypes: any;\n//   vehicleDetails: any;\n//   vehicleBrandList: any;\n//   modelList: any;\n//   ecuBrandList: any;\n//   showVehicleTypeInput: boolean = false;\n//   formData = new FormData();\n//   yearCount: number = 0;\n//   year: number = 0;\n//   additionalFunctionList: any[] = [];\n//   tuningRequiredList: any[] = [];\n//   showAdditonalFunction: boolean = false;\n//   ticketCategories: any = [];\n//   previewSrc: any;\n//   showMultiselect: boolean = false;\n//   selectAdditionalFun: any[] = [];\n//   tuningToolUsedList: any;\n//   users: any;\n//   fileName: string = '';\n//   acceptTermBusi: boolean = false;\n//   showSelectError: boolean = false;\n//   ticketId = this.ar.snapshot.paramMap.get('ids');\n//   obj: any = [\n//     { \"alpha2\": \"US\", \"name\": \"United States\", },\n//     { \"alpha2\": \"GB\", \"name\": \"United Kingdom\", }\n//   ]\n//   uniqueECUBrand: any = [];\n//   unique: any = [];\n//   countryData = countryDetails\n//   constructor(private customer: CustomerService, private crud: CrudService, private ar: ActivatedRoute,\n//     private formBuilder: FormBuilder, private toastr: ToastrService, private route: Router) {\n//     this.vehicleInformation = this.formBuilder.group({\n//       customer_first_name: [''],\n//       customer_last_name: [''],\n//       vehicle_type: ['Select Vehicle Type', Validators.required],\n//       other_vehicle_type: [''],\n//       vehicle_make: ['Select Vehicle Make', Validators.required],\n//       other_vehicle_make: [''],\n//       model: ['Select Vehicle Model', Validators.required],\n//       other_model: [''],\n//       vehicle_registration: ['', Validators.required],\n//       vehicle_year: ['Select Vehicle Year', Validators.required],\n//       vehicle_VIN: ['', Validators.required],\n//       file_type: ['Select File Type', Validators.required],\n//       tuning_tool_used: ['Select Tuning Tool', Validators.required],\n//       other_tuning_tool_used: [''],\n//     });\n//     this.engineInformation = this.formBuilder.group({\n//       engine_size: ['', [Validators.required, Validators.pattern(/^\\d+$/)]],\n//       engine_size_deci: ['', [Validators.pattern(/^[0-9]$/)]],\n//       transmission: ['Select Transmission', Validators.required],\n//       other_transmission: [''],\n//       fuel_type: ['Select Fuel Type', Validators.required],\n//       other_fuel_type: [''],\n//       mileage_type: ['Select Mileage Type', Validators.required],\n//       mileage: ['', Validators.required]\n//     });\n//     this.ecuInformation = this.formBuilder.group({\n//       ecu_brand: ['Select ECU Brand', Validators.required],\n//       ecu_version: ['Select ECU Version', Validators.required],\n//       control_unit: ['Select Control Unit', Validators.required],\n//       other_control_unit: ['', Validators.required]\n//     });\n//     this.additionalInformation = this.formBuilder.group({\n//       country: ['Select Your Country', Validators.required],\n//       additional_function: ['', Validators.required],\n//       other_additional_function: ['', Validators.required],\n//       tuning_required: ['Select Tuning Required', Validators.required],\n//       additional_info: ['', Validators.required]\n//     });\n//   }\n//   ticketDetail: any;\n//   downloadFile: any;\n//   ngOnInit() {\n//     this.countryData.sort((a: any, b: any) => (a.country > b.country) ? 1 : -1)\n//     this.obj.forEach((element: any) => {\n//       this.moveCountryOnTop(element.name);\n//     });\n//     const d = new Date();\n//     this.year = d.getFullYear();\n//     this.yearCount = this.year - 1980;\n//     this.users = JSON.parse(localStorage.getItem('userdetails') || '');\n//     this.ticketDetail = JSON.parse(localStorage.getItem('fileRequestData') || '');\n//     this.customer.getFileFormData().subscribe((res: any) => {\n//       this.vehicleDetails = res.data;\n//       this.vehicleDetails.control_unit = this.sortEle(this.vehicleDetails.control_unit)\n//       this.vehicleDetails.transmission = this.sortEle(this.vehicleDetails.transmission)\n//       this.vehicleDetails.fuel_type = this.sortEle(this.vehicleDetails.fuel_type)\n//       this.tuningToolUsedList = [...this.vehicleDetails.tuning_tool_used.business, ...this.vehicleDetails.tuning_tool_used.individual];\n//       this.tuningToolUsedList = this.sortEle(this.tuningToolUsedList)\n//       this.tuningToolUsedList = [...new Set(this.tuningToolUsedList)];\n//       console.log(this.ticketDetail,'ticketDetail');\n\n//       this.setDetail();\n//       this.getTuningRequired();\n//     })\n//     this.crud.getRequest(cusRequestUrl.getVehicleTypeList).then((res: any) => {\n//       this.vehicleTypes = res;\n//       this.vehicleTypes = this.sort(this.vehicleTypes, 'name')\n//       this.vehicleTypes.forEach((element: any) => {\n//         if (element.name == this.ticketDetail.file_request.vehicle_type) {\n//           this.vehicleInformation.controls['vehicle_type'].setValue(element.id);\n//         }\n//       });\n\n//       this.getVehicleBrands();\n//     })\n//   }\n//   async setDetail() {\n//     this.downloadFile = this.ticketDetail?.file_request?.tuning_file;\n//     this.vehicleInformation.controls['customer_first_name'].setValue(this.ticketDetail.file_request.customer_first_name);\n//     this.vehicleInformation.controls['customer_last_name'].setValue(this.ticketDetail.file_request.customer_last_name);\n//     this.vehicleInformation.controls['vehicle_registration'].setValue(this.ticketDetail.file_request.vehicle_registration);\n//     this.vehicleInformation.controls['vehicle_year'].setValue(this.ticketDetail.file_request.vehicle_year);\n//     this.vehicleInformation.controls['vehicle_VIN'].setValue(this.ticketDetail.file_request.vehicle_VIN);\n//     this.vehicleInformation.controls['file_type'].setValue(this.ticketDetail.file_request.file_type);\n//     this.vehicleInformation.controls['tuning_tool_used'].setValue(this.ticketDetail.file_request.tuning_tool_used);\n//     this.engineInformation.controls['engine_size'].setValue(this.ticketDetail.file_request.engine_size.split('.')[0]);\n//     this.engineInformation.controls['engine_size_deci'].setValue(this.ticketDetail.file_request.engine_size.split('.')[1]);\n//     this.engineInformation.controls['transmission'].setValue(this.ticketDetail.file_request.transmission);\n//     this.engineInformation.controls['fuel_type'].setValue(this.ticketDetail.file_request.fuel_type);\n//     this.engineInformation.controls['mileage_type'].setValue(this.ticketDetail.file_request.mileage_type);\n//     this.engineInformation.controls['mileage'].setValue(this.ticketDetail.file_request.mileage);\n//     // this.ecuInformation.controls['ecu_version'].setValue(this.ticketDetail.file_request.ecu_version);\n//     this.ecuInformation.controls['control_unit'].setValue(this.ticketDetail.file_request.control_unit);\n//     this.additionalInformation.controls['country'].setValue(this.ticketDetail.file_request.country);\n//     this.additionalInformation.controls['additional_function'].setValue(this.ticketDetail.file_request.additional_function);\n//     this.additionalInformation.controls['tuning_required'].setValue(this.ticketDetail.file_request.tuning_required);\n//     // this.additionalInformation.controls['additional_info'].setValue(this.ticketDetail.file_request.additional_info);\n//   }\n\n//   sortEle(arr: any) {\n//     return arr.sort((a: any, b: any) => {\n//       return a.toLowerCase().localeCompare(b.toLowerCase());\n//     });\n//   }\n//   sort(array: any, key: any) {\n//     return array.sort((a: any, b: any) => {\n//       var nameA = a[key].toUpperCase();\n//       var nameB = b[key].toUpperCase();\n//       if (nameA < nameB) {\n//         return -1;\n//       }\n//       if (nameA > nameB) {\n//         return 1;\n//       }\n//       return 0;\n//     });\n//   }\n\n//   moveCountryOnTop(name: string) {\n//     const index = this.countryData.findIndex((item: any) => item.country === name);\n//     if (index !== -1) {\n//       const removedObject = this.countryData.splice(index, 1)[0];\n//       this.countryData.unshift(removedObject);\n//     }\n//   }\n//   getVehicleBrands(select?: boolean) {\n//     this.crud.getRequest(`${cusRequestUrl.getVehicleBrandList}${this.vehicleInformation.controls['vehicle_type'].value}`).then((res: any) => {\n//       if (res) {\n//         this.vehicleBrandList = res;\n//         this.vehicleBrandList = this.sort(this.vehicleBrandList, 'brand_name')\n//         this.vehicleBrandList.forEach((element: any) => {\n//           if (element.brand_name == this.ticketDetail.file_request.vehicle_make) {\n//             this.vehicleInformation.controls['vehicle_make'].setValue(element.id);\n//           }\n//         });\n//         if (select) {\n//           this.vehicleInformation.controls['vehicle_make'].setValue(this.vehicleBrandList[0].id);\n//           this.getBrandModel(true);\n//         }\n//         else\n//           this.getBrandModel();\n//       }\n//     })\n//   }\n\n//   getBrandModel(select?: boolean) {\n//     this.crud.getRequest(`${cusRequestUrl.getBrandModal}${this.vehicleInformation.controls['vehicle_make'].value}`).then((res: any) => {\n//       if (res) {\n//         this.modelList = res;\n//         this.modelList = this.sort(this.modelList, 'model_name');\n//         this.modelList.forEach((element: any) => {\n//           if (element.model_name == this.ticketDetail.file_request.model) {\n//             this.vehicleInformation.controls['model'].setValue(element.id);\n//           }\n//         });\n//         this.getVehicleControlList();\n//         if (select) {\n//           this.vehicleInformation.controls['model'].setValue(this.modelList[0].id);\n\n//         }\n//       }\n//     })\n//   }\n\n//   // getTypeCount() {\n//   //   this.crud.getRequest(cusRequestUrl.getCustomerProfile).then((res: any) => {\n//   //     localStorage.setItem('userdetails', JSON.stringify(res.data));\n//   //     this.users = JSON.parse(localStorage.getItem('userdetails') || '');\n//   //   })\n//   // }\n\n//   getVehicleControlList(select?: boolean) {\n//     this.crud.getRequest(`${cusRequestUrl.getVehicleControlList}${this.vehicleInformation.controls['model'].value}`).then((res: any) => {\n//       if (res) {\n//         this.ecuBrandList = res;\n//         if (select)\n//           this.ecuInformation.controls['control_unit'].setValue(this.ecuBrandList[0].ecu_type);\n//         this.unique = [];\n//         this.uniqueECUBrand = []\n//         this.unique = this.ecuBrandList.filter((element: any) => {\n//           const isDublicate = this.uniqueECUBrand.includes(element.ecu_brand)\n//           if (!isDublicate) {\n//             this.uniqueECUBrand.push(element.ecu_brand)\n//             return true;\n//           }\n//           else\n//             return false;\n//         });\n//         this.unique = this.sort(this.unique, 'ecu_brand')\n//         this.getTuningRequired();\n//         // this.unique.forEach((element: any) => {\n//         //   if (element.ecu_brand == this.ticketDetail.file_request.ecu_brand) {\n//         //     this.ecuInformation.controls['ecu_brand'].setValue(element.id);\n\n//         //   }\n//         // });\n//         // this.setFuelModel();\n//       }\n//     })\n//   }\n//   newECU_versionList: any = [];\n//   setFuelModel(isEdit?: boolean) {\n//     // this.newECU_versionList = [];\n//     // var brand = '';\n//     // this.ecuBrandList.forEach((element: any) => {\n//     //   if (element.id == this.ecuInformation.value.ecu_brand)\n//     //     brand = element.ecu_brand;\n//     // });\n//     // this.ecuBrandList.forEach((element: any) => {\n//     //   if (element.ecu_brand == brand)\n//     //     this.newECU_versionList.push(element);\n//     // });\n//     // this.newECU_versionList = this.sort(this.newECU_versionList, 'ecu_version');\n//     // if (isEdit)\n//     //   this.ecuInformation.controls['ecu_version'].setValue(this.newECU_versionList[0].ecu_version)\n//     this.newECU_versionList = [];\n//     var brand = '';\n//     this.ecuBrandList.forEach((element: any) => {\n//       if (element.id == this.ecuInformation.value.ecu_brand)\n//         brand = element.ecu_brand;\n//     });\n//     this.ecuBrandList.forEach((element: any) => {\n//       if (element.ecu_brand == brand)\n//         this.newECU_versionList.push(element);\n//     });\n//     this.newECU_versionList = this.sort(this.newECU_versionList, 'ecu_version');\n//     // if (isEdit)\n//     //   this.ecuInformation.controls['ecu_version'].setValue(this.newECU_versionList[0].ecu_version)\n//   }\n//   next() {\n//     if (this.step == 1) {\n//       this.vehicle_step = true;\n//       if (this.vehicleInformation.invalid) { return }\n//       this.step++\n//     }\n//     if (this.step == 2) {\n//       this.engine_step = true;\n//       if (this.engineInformation.invalid) { return }\n//       this.step++;\n//     }\n\n//     if (this.step == 3) {\n//       this.ecu_step = true;\n//       if (this.ecuInformation.invalid) { return }\n//       this.step++;\n//     }\n//   }\n\n//   a: any = [];\n//   showAddiInfoOtherBox: boolean = false;\n//   // selectAddFun(i: any) {\n//   //   this.selectAdditionalFun[i] = !this.selectAdditionalFun[i];\n//   //   if (this.selectAdditionalFun[i] && this.additionalFunctionList[i] == 'Other') {\n//   //     this.showAddiInfoOtherBox = true;\n//   //   }\n//   //   else if ((!this.selectAdditionalFun[i]) && (this.additionalFunctionList[i] == 'Other')) {\n//   //     this.showAddiInfoOtherBox = false;\n//   //   }\n//   //   if (this.selectAdditionalFun[i]) {\n//   //     this.a.push(this.additionalFunctionList[i]);\n//   //     var b = this.additionalInformation.value.additional_function\n\n//   //     this.a.forEach((res: any) => {\n//   //       this.additionalInformation.patchValue({ 'additional_function': b + (this.additionalInformation.value.additional_function.length > 0 ? ', ' : '') + res });\n//   //     })\n//   //     // this.masterCalculation(this.masterCalculationData)\n//   //   }\n//   //   else {\n//   //     this.additionalInformation.controls['additional_function'].setValue('');\n//   //     const index = this.a.indexOf(this.additionalFunctionList[i]);\n//   //     if (index > -1) {\n//   //       this.a.splice(index, 1);\n//   //     }\n//   //     this.a.forEach((res: any) => {\n//   //       var b = this.additionalInformation.value.additional_function\n//   //       this.additionalInformation.patchValue({ 'additional_function': b + (this.additionalInformation.value.additional_function.length > 0 ? ', ' : '') + res });\n//   //     })\n//   //     // this.masterCalculation(this.masterCalculationData)\n//   //   }\n//   // }\n//   newUniqueEcuBrandList: any = [];\n//   editEcuBrandVesrsion: boolean = false;\n//   newTuningRequiredList: any = [];\n//   getTuningRequired(select?: boolean) {\n//     if (this.engineInformation.controls['fuel_type'].value == 'Gasoline Hybrid' ||\n//       this.engineInformation.controls['fuel_type'].value == 'Gasoline') {\n//       this.tuningRequiredList = { ...this.vehicleDetails.tuning_required.business.gasoline, ...this.vehicleDetails.tuning_required.individual.gasoline };\n//       for (var key in this.tuningRequiredList) {\n//         var ab = {\n//           value: key,\n//           name: this.tuningRequiredList[key]\n//         }\n//         this.newTuningRequiredList.push(ab);\n//       }\n//       this.tuningRequiredList = this.newTuningRequiredList;\n\n//       this.additionalFunctionList = this.vehicleDetails.additional_functions.gasoline\n//       this.showAdditonalFunction = true;\n//       for (let i = 0; i < this.additionalFunctionList.length; i++) {\n//         this.selectAdditionalFun[i] = false;\n//       }\n//     }\n//     else if (this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid' ||\n//       this.engineInformation.controls['fuel_type'].value == 'Diesel') {\n//       this.tuningRequiredList = { ...this.vehicleDetails.tuning_required.business.diesel, ...this.vehicleDetails.tuning_required.individual.diesel };\n//       for (var key in this.tuningRequiredList) {\n//         var ab = {\n//           value: key,\n//           name: this.tuningRequiredList[key]\n//         }\n//         this.newTuningRequiredList.push(ab);\n//       }\n//       this.tuningRequiredList = this.newTuningRequiredList;\n//       this.additionalFunctionList = this.vehicleDetails.additional_functions.diesel\n//       this.showAdditonalFunction = true;\n//       for (let i = 0; i < this.additionalFunctionList.length; i++) {\n//         this.selectAdditionalFun[i] = false;\n//       }\n//     }\n//     else {\n//       this.tuningRequiredList = [];\n//       var abc = {\n//         value: 'NO TUNE',\n//         name: 'NO TUNE'\n//       }\n//       this.tuningRequiredList.push(abc)\n//       this.showAdditonalFunction = false;\n//     }\n\n//     //__________________________New ECU Brand and version code___________________________\n//     this.newUniqueEcuBrandList = [];\n//     this.unique.forEach((element: any) => {\n//       if (element.fuel_type == \"Petrol\" && (this.engineInformation.value.fuel_type == 'Gasoline Hybrid' || this.engineInformation.value.fuel_type == 'Gasoline')) {\n//         this.newUniqueEcuBrandList.push(element);\n//       }\n//       else if (element.fuel_type == this.engineInformation.controls['fuel_type'].value)\n//         this.newUniqueEcuBrandList.push(element);\n//       else if (this.engineInformation.controls['fuel_type'].value == 'Diesel Hybrid' ||\n//         this.engineInformation.controls['fuel_type'].value == 'Diesel') {\n//         if (element.fuel_type == 'Diesel' || element.fuel_type == 'Diesel Hybrid') {\n//           this.newUniqueEcuBrandList.push(element);\n//         }\n//       }\n\n//     });\n//     if (this.newUniqueEcuBrandList.length > 0) {\n//       this.editEcuBrandVesrsion = false;\n//       if (select) {\n//         this.ecuInformation.controls['ecu_brand'].setValue(this.newUniqueEcuBrandList[0].id)\n//         this.ecuInformation.controls['ecu_version'].setValue(this.newUniqueEcuBrandList[0].ecu_version)\n//       }\n//       // this.showEcuBrand = false; this.showEcuVersion = false\n//       // this.ecuInformation.controls['other_ecu_brand'].setValue('')\n//       // this.ecuInformation.controls['other_ecu_version'].setValue('')\n//       else {\n//         this.ecuInformation.controls['ecu_version'].setValue(this.ticketDetail.file_request.ecu_version);\n//         this.unique.forEach((element: any) => {\n//           if (element.ecu_brand == this.ticketDetail.file_request.ecu_brand) {\n//             this.ecuInformation.controls['ecu_brand'].setValue(element.id);\n\n//           }\n//         });\n//       }\n//     }\n//     else {\n//       // this.showEcuBrand = false; this.showEcuVersion = false\n//       this.editEcuBrandVesrsion = true;\n//       this.ecuInformation.controls['ecu_version'].setValue(this.ticketDetail.file_request.ecu_version);\n//       this.ecuInformation.controls['ecu_brand'].setValue(this.ticketDetail.file_request.ecu_brand);\n//       // var a = {\n//       //   id: 0,\n//       //   ecu_brand: 'Other'\n//       // }\n//       // this.newUniqueEcuBrandList.push(a);\n//       // this.ecuInformation.controls['ecu_brand'].setValue('Select ECU Brand')\n//       // this.newECU_versionList = [];\n//       // var b = {\n//       //   ecu_version: 'Other'\n//       // }\n//       // this.newECU_versionList.push(b);\n//       // this.ecuInformation.controls['ecu_version'].setValue('Select ECU Version')\n\n//     }\n//     if (!this.editEcuBrandVesrsion) {\n//       this.newECU_versionList = [];\n//       var brand = '';\n//       this.ecuBrandList.forEach((element: any) => {\n//         if (element.id == this.ecuInformation.value.ecu_brand)\n//           brand = element.ecu_brand;\n//       });\n//       this.ecuBrandList.forEach((element: any) => {\n//         if (element.ecu_brand == brand)\n//           this.newECU_versionList.push(element);\n//       });\n//       this.newECU_versionList = this.sort(this.newECU_versionList, 'ecu_version');\n//     }\n\n//     console.log(this.ticketDetail.file_request.ecu_brand, this.ticketDetail.file_request.ecu_version, 'Ecu Brand & Version');\n//     console.log(this.newUniqueEcuBrandList, 'ecu brand array');\n//     console.log(this.newECU_versionList, 'ecu version array');\n\n//     //__________________________Old Ecu brand and version code________________________________\n\n//     // Ecu Brand and version code starts from here\n//     // this.newUniqueEcuBrandList = [];\n//     // this.unique.forEach((element: any) => {\n//     //   if (element.fuel_type == this.engineInformation.controls['fuel_type'].value)\n//     //     this.newUniqueEcuBrandList.push(element);\n//     // });\n//     // if (this.newUniqueEcuBrandList.length > 0) {\n//     //   this.editEcuBrandVesrsion = false;\n//     //   this.ecuInformation.controls['ecu_brand'].setValue(this.newUniqueEcuBrandList[0].id)\n//     //   this.ecuInformation.controls['ecu_version'].setValue(this.newUniqueEcuBrandList[0].ecu_version)\n//     // }\n//     // else {\n//     //   this.editEcuBrandVesrsion = true;\n//     //   this.ecuInformation.controls['ecu_brand'].setValue('')\n//     //   this.ecuInformation.controls['ecu_version'].setValue('')\n//     // }\n//     // this.newECU_versionList = [];\n//     // var brand = '';\n//     // if (!this.editEcuBrandVesrsion) {\n//     //   this.ecuBrandList.forEach((element: any) => {\n//     //     if (element.id == this.ecuInformation.value.ecu_brand)\n//     //       brand = element.ecu_brand;\n//     //   });\n//     //   this.ecuBrandList.forEach((element: any) => {\n//     //     if (element.ecu_brand == brand)\n//     //       this.newECU_versionList.push(element);\n//     //   });\n//     //   this.newECU_versionList = this.sort(this.newECU_versionList, 'ecu_version');\n//     // }\n//     // this.ecuInformation.controls['ecu_version'].setValue(this.ticketDetail.file_request.ecu_version);\n//     // this.unique.forEach((element: any) => {\n//     //   if (element.ecu_brand == this.ticketDetail.file_request.ecu_brand) {\n//     //     this.ecuInformation.controls['ecu_brand'].setValue(element.id);\n//     //   }\n//     // });\n//   }\n//   markAllControlsAsTouched(formGroup: FormGroup) {\n//     Object.values(formGroup.controls).forEach(control => {\n//       control.markAsTouched();\n//       if (control instanceof FormGroup) {\n//         this.markAllControlsAsTouched(control);\n//       }\n//     });\n//   }\n//   submitForm(type: any) {\n//     if (type == 'form2') {\n//       if (this.vehicleInformation.valid) {\n//         this.tab = 'form2';\n//       }\n//       else {\n//         this.markAllControlsAsTouched(this.vehicleInformation);\n//       }\n//     }\n//     else if (type == 'form3') {\n//       if (this.engineInformation.valid) {\n//         this.tab = 'form3';\n//       }\n//       else {\n//         this.markAllControlsAsTouched(this.engineInformation);\n//       }\n//     }\n//     else if (type == 'finalSubmit') {\n//       if (this.vehicleInformation.value.tuning_tool_used == 'Select Tuning Tool' ||\n//         this.vehicleInformation.value.file_type == 'Select File Type' ||\n//         this.vehicleInformation.value.vehicle_year == 'Select Vehicle Year' ||\n//         this.engineInformation.value.transmission == 'Select Transmission' ||\n//         this.engineInformation.value.mileage_type == 'Select Mileage Type' ||\n//         this.ecuInformation.value.control_unit == 'Select Control Unit' ||\n//         this.additionalInformation.value.tuning_required == 'Select Tuning Required' ||\n//         this.additionalInformation.value.country == 'Select Your Country') {\n//         this.showSelectError = true;\n//       } else {\n//         this.showSelectError = false;\n//       }\n//       if (this.acceptTermBusi && this.vehicleInformation.valid && this.engineInformation.valid && this.showSelectError == false) {\n//         if (this.vehicleTypes) {\n//           this.vehicleTypes.forEach((element: any) => {\n//             if (this.vehicleInformation.controls['vehicle_type'].value == element.id) {\n//               this.formData.append('vehicle_type', element.name == 'Other' ? this.vehicleInformation.controls['other_vehicle_type'].value : element.name);\n//               // this.formData3.append('vehicle_type', element.name);\n//             }\n//           });\n//         }\n//         if (this.vehicleBrandList) {\n//           this.vehicleBrandList.forEach((element: any) => {\n//             if (this.vehicleInformation.controls['vehicle_make'].value == element.id) {\n//               this.formData.append('vehicle_make', element.brand_name);\n//               // this.formData3.append('vehicle_make', element.brand_name);\n//             }\n//           });\n//         }\n//         // else {\n//         //   this.formData3.append('vehicle_make', this.vehicleInformation.controls['other_vehicle_make'].value);\n//         // }\n//         if (this.modelList) {\n//           this.modelList.forEach((element: any) => {\n//             if (this.vehicleInformation.controls['model'].value == element.id) {\n//               this.formData.append('model', element.model_name);\n//               // this.formData3.append('model', element.model_name);\n//             }\n//           });\n//         }\n//         // else {\n//         //   this.formData3.append('model', this.vehicleInformation.controls['other_model'].value);\n//         // }\n//         var ecuBrandName = '';\n//         if (!this.editEcuBrandVesrsion) {\n//           this.ecuBrandList.forEach((element: any) => {\n//             if (element.id == this.ecuInformation.value.ecu_brand)\n//               ecuBrandName = element.ecu_brand\n//           });\n//         }\n//         else {\n//           ecuBrandName = this.ecuInformation.value.ecu_brand;\n//         }\n//         let engineSizeValue = ''\n//         if (this.engineInformation.controls['engine_size_deci'].value != '') {\n//           engineSizeValue = `${this.engineInformation.controls['engine_size'].value}.${this.engineInformation.controls['engine_size_deci'].value}`\n//         }\n//         else {\n//           engineSizeValue = `${this.engineInformation.controls['engine_size'].value}.0`\n\n//         }\n\n//         this.formData.append('ecu_brand', ecuBrandName);\n//         this.formData.append('ecu_version', this.ecuInformation.value.ecu_version);\n//         // this.formData3.append('ecu_brand', ecuBrandName);\n//         // this.formData3.append('ecu_version', this.ecuInformation.value.ecu_version);\n//         // this.formData.append('file_key_credit', this.onlyFileKeyCredit ? this.fileCreditRequired : 0);\n//         // this.formData.append('function_credit', this.onlyFuntionKeyCredit ? this.functionCreditRequired : 0);\n//         this.formData.append('customer_first_name', this.vehicleInformation.controls['customer_first_name'].value);\n//         this.formData.append('customer_last_name', this.vehicleInformation.controls['customer_last_name'].value);\n//         this.formData.append('vehicle_registration', this.vehicleInformation.controls['vehicle_registration'].value);\n//         this.formData.append('vehicle_year', this.vehicleInformation.controls['vehicle_year'].value);\n//         this.formData.append('vehicle_VIN', this.vehicleInformation.controls['vehicle_VIN'].value);\n//         this.formData.append('engine_size', engineSizeValue);\n//         this.formData.append('tuning_tool_used', this.vehicleInformation.controls['tuning_tool_used'].value == 'OTHER' ? this.vehicleInformation.controls['other_tuning_tool_used'].value : this.vehicleInformation.controls['tuning_tool_used'].value);\n//         // this.formData3.append('tuning_tool_used', this.vehicleInformation.controls['tuning_tool_used'].value);\n//         this.formData.append('transmission', this.engineInformation.controls['transmission'].value == 'Other' ? this.engineInformation.controls['other_transmission'].value : this.engineInformation.controls['transmission'].value);\n//         // this.formData3.append('transmission', this.engineInformation.controls['transmission'].value);\n//         this.formData.append('fuel_type', this.engineInformation.controls['fuel_type'].value == 'Other' ? this.engineInformation.controls['other_fuel_type'].value : this.engineInformation.controls['fuel_type'].value);\n//         // this.formData3.append('fuel_type', this.engineInformation.controls['fuel_type'].value);\n//         this.formData.append('mileage_type', this.engineInformation.controls['mileage_type'].value);\n//         this.formData.append('mileage', this.engineInformation.controls['mileage'].value);\n//         this.formData.append('control_unit', this.ecuInformation.controls['control_unit'].value == 'Other' ? this.ecuInformation.controls['other_control_unit'].value : this.ecuInformation.controls['control_unit'].value);\n//         // this.formData3.append('control_unit', this.ecuInformation.controls['control_unit'].value);\n//         this.formData.append('tuning_required', this.additionalInformation.controls['tuning_required'].value);\n//         this.formData.append('country', this.additionalInformation.controls['country'].value);\n//         this.formData.append('file_type', this.vehicleInformation.controls['file_type'].value);\n//         this.formData.append('additional_info', this.additionalInformation.controls['additional_info'].value);\n//         // this.formData3.append('additional_info', this.additionalInformation.controls['additional_info'].value);\n//         this.formData.append('additional_function', this.additionalInformation.controls['additional_function'].value == 'Other' ? this.additionalInformation.controls['other_additional_function'].value : this.additionalInformation.controls['additional_function'].value);\n//         if (this.ticketId)\n//           this.formData.append('ticket_id', this.ticketId);\n//         // this.formData3.append('additional_function', this.additionalInformation.controls['additional_function'].value);\n//         // this.checkOtherCondition((cb: any) => {\n//         //   if (cb) {\n//         this.crud.postRequest(cusRequestUrl.createRequestFile, this.formData).then((res: any) => {\n//           if (res) {\n//             // localStorage.removeItem(\"buyItemDetail\");\n//             // if (cb == 'Create Ticket') {\n//             //   this.ticketFormData.append('file_request', res.data.request_id);\n//             // } else {\n//             //   this.route.navigateByUrl('/file-service/file-services')\n//             this.toastr.success(res.message);\n//             this.route.navigate([`/admin/fileservice`], { queryParams: { 'id': res.data.request_id, } })\n\n//             // }\n//           }\n//         })\n//         // }\n//         // })\n//       }\n//       else {\n//         this.markAllControlsAsTouched(this.engineInformation);\n//         this.markAllControlsAsTouched(this.vehicleInformation);\n//         this.acceptTermCondCount = this.acceptTermCondCount + 1;\n//       }\n//     }\n//   }\n//   // checkOtherCondition(cb: any) {\n//   //   let count = 0;\n//   //   this.formData3.forEach((value, key) => {\n//   //     if (value == 'other' || value == 'Other' || value == 'OTHER' || (key == 'additional_info' && (value != '' && value != undefined && value != null))) {\n//   //       count += 1;\n//   //       this.ticketCreateForm.controls['description'].setValue('')\n//   //       this.formData.forEach((value, key) => {\n//   //         this.ticketCreateForm.patchValue({ 'description': `${this.ticketCreateForm.controls['description'].value.replace('_', ' ')}${key}: ${value}, ` })\n//   //       });\n//   //     }\n//   //   });\n//   //   if (this.vehicleInformation.controls['file_type'].value == 'Client/Slave') {\n//   //     if (this.vehicleInformation.controls['tuning_tool_used'].value != 'KESS v2' ||\n//   //       this.vehicleInformation.controls['tuning_tool_used'].value != 'KTAG' ||\n//   //       this.vehicleInformation.controls['tuning_tool_used'].value != 'KESS3') {\n//   //       this.ticketCreateForm.patchValue({ 'description': `File are send for manual handle as user selected ${this.vehicleInformation.controls['tuning_tool_used'].value} tool.` })\n//   //       count += 1;\n//   //     }\n//   //   }\n//   //   if (count == 0)\n//   //     cb(true);\n//   //   else {\n//   //     this.ticketCreateForm.controls['subject'].setValue('Manual File Handling')\n//   //     this.ticketCreateForm.controls['category'].setValue(1)\n//   //     cb('Create Ticket')\n//   //   }\n//   // }\n\n//   fileUpload(event: any) {\n//     let file = event.target.files[0];\n//     if (file.name.length <= 150) {\n//       this.fileName = file.name;\n//       this.formData.append('tuning_file', file, file.name);\n//       if (event.target.files && event.target.files[0]) {\n//         const file = event.target.files[0];\n//         const reader = new FileReader();\n//         reader.readAsDataURL(file);\n//       }\n//     } else {\n//       this.toastr.error(\"File name cannot be more than 150 characters.\");\n//     }\n//   }\n//   counter(i: number) {\n//     return new Array(i);\n//   }\n//   newFileList: any;\n//   fileList: any = [];\n//   // ticketCreateFormSubmit() {\n//   //   this.ticketFormData.append('subject', this.ticketCreateForm.value.subject);\n//   //   this.ticketFormData.append('category', this.ticketCreateForm.value.category);\n//   //   this.ticketFormData.append('description', this.ticketCreateForm.value.description);\n//   //   this.crud.postRequest(`${cusRequestUrl.createTicket}`, this.ticketFormData).then((res: any) => {\n//   //     if (res) {\n//   //       this.toastr.success(res.message)\n//   //       this.route.navigateByUrl('/file-service/file-services')\n//   //     }\n//   //   });\n//   // }\n//   // buyNow() {\n//   //   let body = {\n//   //     vehicleInfo: {\n//   //       customer_first_name: this.vehicleInformation.controls['customer_first_name'].value,\n//   //       customer_last_name: this.vehicleInformation.controls['customer_last_name'].value,\n//   //       vehicle_type: this.vehicleInformation.controls['vehicle_type'].value,\n//   //       other_vehicle_type: this.vehicleInformation.controls['other_vehicle_type'].value,\n//   //       vehicle_make: this.vehicleInformation.controls['vehicle_make'].value,\n//   //       other_vehicle_make: this.vehicleInformation.controls['other_vehicle_make'].value,\n//   //       model: this.vehicleInformation.controls['model'].value,\n//   //       other_model: this.vehicleInformation.controls['other_model'].value,\n//   //       vehicle_registration: this.vehicleInformation.controls['vehicle_registration'].value,\n//   //       vehicle_year: this.vehicleInformation.controls['vehicle_year'].value,\n//   //       vehicle_VIN: this.vehicleInformation.controls['vehicle_VIN'].value,\n//   //       file_type: this.vehicleInformation.controls['file_type'].value,\n//   //       tuning_tool_used: this.vehicleInformation.controls['tuning_tool_used'].value,\n//   //       other_tuning_tool_used: this.vehicleInformation.controls['other_tuning_tool_used'].value,\n//   //     },\n//   //     engineInfo: {\n//   //       engine_size: this.engineInformation.controls['engine_size'].value,\n//   //       transmission: this.engineInformation.controls['transmission'].value,\n//   //       other_transmission: this.engineInformation.controls['other_transmission'].value,\n//   //       fuel_type: this.engineInformation.controls['fuel_type'].value,\n//   //       other_fuel_type: this.engineInformation.controls['other_fuel_type'].value,\n//   //       mileage_type: this.engineInformation.controls['mileage_type'].value,\n//   //       mileage: this.engineInformation.controls['mileage'].value,\n//   //     },\n//   //     ecuInfo: {\n//   //       ecu_brand: this.ecuInformation.controls['ecu_brand'].value,\n//   //       ecu_version: this.ecuInformation.controls['ecu_version'].value,\n//   //       control_unit: this.ecuInformation.controls['control_unit'].value\n//   //     },\n//   //     additionalInfo: {\n//   //       country: this.additionalInformation.controls['country'].value,\n//   //       additional_function: this.additionalInformation.controls['additional_function'].value,\n//   //       other_additional_function: this.additionalInformation.controls['other_additional_function'].value,\n//   //       tuning_required: this.additionalInformation.controls['tuning_required'].value,\n//   //       additional_info: this.additionalInformation.controls['additional_info'].value\n//   //     },\n//   //     additionalFuncArray: this.a\n//   //   }\n//   //   // localStorage.setItem('buyItemDetail', JSON.stringify(body));\n//   //   // this.route.navigate([`/credit/buy-credit`], { queryParams: { 'type': this.onlyFileKeyCredit ? 'file credit' : 'function credit' } })\n//   // }\n//   acceptTermCondCount: number = 0;\n//   acceptTermCond() {\n//     this.acceptTermCondCount = this.acceptTermCondCount + 1;\n//     this.acceptTermBusi = !this.acceptTermBusi\n//   }\n//   resetForm() {\n//     this.vehicleInformation.controls['customer_first_name'].setValue('');\n//     this.vehicleInformation.controls['customer_last_name'].setValue('');\n//     this.vehicleInformation.controls['vehicle_type'].setValue('Select Vehicle Type');\n//     this.vehicleInformation.controls['other_vehicle_type'].setValue('');\n//     this.vehicleInformation.controls['vehicle_make'].setValue('Select Vehicle Make');\n//     this.vehicleInformation.controls['other_vehicle_make'].setValue('');\n//     this.vehicleInformation.controls['model'].setValue('Select Vehicle Model');\n//     this.vehicleInformation.controls['other_model'].setValue('');\n//     this.vehicleInformation.controls['vehicle_registration'].setValue('');\n//     this.vehicleInformation.controls['vehicle_year'].setValue('Select Vehicle Year');\n//     this.vehicleInformation.controls['vehicle_VIN'].setValue('');\n//     this.vehicleInformation.controls['file_type'].setValue('Select File Type');\n//     this.vehicleInformation.controls['tuning_tool_used'].setValue('Select Tuning Tool');\n//     this.vehicleInformation.controls['other_tuning_tool_used'].setValue('');\n//     this.engineInformation.controls['engine_size'].setValue('');\n//     this.engineInformation.controls['transmission'].setValue('Select Transmission');\n//     this.engineInformation.controls['other_transmission'].setValue('');\n//     this.engineInformation.controls['fuel_type'].setValue('Select Fuel Type');\n//     this.engineInformation.controls['other_fuel_type'].setValue('');\n//     this.engineInformation.controls['mileage_type'].setValue('Select Mileage Type');\n//     this.engineInformation.controls['mileage'].setValue('');\n//     this.ecuInformation.controls['ecu_brand'].setValue('Select ECU Brand');\n//     this.ecuInformation.controls['ecu_version'].setValue('Select ECU Version');\n//     this.ecuInformation.controls['control_unit'].setValue('Select Control Unit');\n//     this.ecuInformation.controls['other_control_unit'].setValue('');\n//     this.additionalInformation.controls['additional_function'].setValue('');\n//     this.additionalInformation.controls['other_additional_function'].setValue('');\n//     this.additionalInformation.controls['tuning_required'].setValue('Select Tuning Required');\n//     this.additionalInformation.controls['additional_info'].setValue('');\n//     this.showAdditonalFunction = false;\n//     this.additionalFunctionList = [];\n//     this.fileName = '';\n//     this.formData.delete(\"tuning_file\");\n//   }\n// }\n","    <div class=\"ulist-div\" >\n        <div class=\"u-add\">\n            <h2 style=\"margin-left: 10px;\">{{pageType}} Filter</h2>\n            <div class=\"u-add-right\">\n                <button class=\"backBtn\" routerLink=\"/admin/tickets\">\n                    <i class=\"fa fa-long-arrow-left\" aria-hidden=\"true\"></i>\n                  </button>\n            </div>\n        </div>\n        <hr />\n        <div>\n            <div class=\"blockbody\" style=\"gap: 20px;\">\n                <div class=\"d-flex flex-column align-items-start\">\n                    <label class=\"form-label\">Filter Name</label>\n                    <input type=\"text\" [(ngModel)]=\"title\" placeholder=\"Enter Filter Name\" class=\"form-control\">\n                </div>\n                <!-- <div class=\"d-flex flex-column align-items-start\">\n                    <label class=\"form-label\">Roles</label>\n                    <select class=\"form-select\" [(ngModel)]=\"role\">\n                        <option value=\"\" disabled>Select Role</option>\n                        <option value=\"{{role.id}}\" *ngFor=\"let role of roleList\"> {{role.name}} </option>>\n                    </select>\n                </div> -->\n            </div>\n            <div class=\"d-flex flex-column align-items-start mt-3\">\n                <label class=\"form-label\" style=\"padding-left: 25px;\">Status List</label>\n                <div class=\"blockbody\">\n                    <label class=\"active d-flex\" style=\"cursor: pointer;\" *ngFor=\"let tkstatus of ticketStatus;let i = index;\">\n                        <input type=\"checkbox\" [checked]=\"tkstatus.is_active\" (change)=\"onChangeTicketStatus(i)\">\n                        <p class=\"mb-0 mx-2\"> {{tkstatus.ticket_status || 'New'}} </p>\n                        <span> ({{tkstatus.count}}) </span>\n                    </label>\n                </div>\n            </div>\n            <!-- <div class=\"d-flex flex-column align-items-start mt-3\">\n            <label class=\"form-label\">Roles</label>\n            <select class=\"form-select\" [(ngModel)]=\"role\">\n                <option value=\"\" disabled>Select Role</option>\n                <option value=\"{{role.id}}\" *ngFor=\"let role of roleList\"> {{role.name}} </option>>\n            </select>\n        </div> -->\n            <div class=\"submitReset d-flex justify-content-center mt-3\">\n                <button type=\"button\" (click)=\"resetFilter()\" class=\"ressetBtn\">Reset</button>\n                <button type=\"submit\" (click)=\"saveTicketFilter()\">Submit</button>\n            </div>\n\n        </div>\n    </div>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { EditTicketComponent } from './edit-ticket/edit-ticket.component';\nimport { TicketListComponent } from './ticket-list/ticket-list.component';\nimport { TicketComponent } from './ticket.component';\nimport { ViewTicketComponent } from './view-ticket/view-ticket.component';\nimport { AdminRequestFileComponent } from './admin-request-file/admin-request-file.component';\nimport { GroupTicketFilterComponent } from './group-ticket-filter/group-ticket-filter.component';\n\nconst routes: Routes = [\n  {\n    path: '', component: TicketComponent, children: [\n      { path: '', component: TicketListComponent },\n      { path: 'view-ticket/:ids/:id', component: ViewTicketComponent },\n      { path: 'edit-ticket', component: EditTicketComponent },\n      { path: 'group-ticket-filter', component: GroupTicketFilterComponent },\n      { path: 'request-file/:ids', component: AdminRequestFileComponent }\n    ]\n  }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TicketRoutingModule { }\n","import { Component } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { CrudService } from 'src/app/services/crud.service';\nimport { requestUrl } from 'src/app/services/adminReqUrl.const';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-group-ticket-filter',\n  templateUrl: './group-ticket-filter.component.html',\n  styleUrls: ['./group-ticket-filter.component.scss']\n})\nexport class GroupTicketFilterComponent {\n  ticketStatus: any = [];\n  ticketIds: any = [];\n  roleList: any;\n  title: any;\n\n  // Not used after removing role fromm filter\n  role: any = \"\";\n\n  type: any = this.ar.queryParams;\n  recentFilterId: any;\n  pageType: any = 'Create';\n  constructor(private fb: FormBuilder, private toastr: ToastrService, private crud: CrudService,\n    private ar: ActivatedRoute\n  ) {\n    this.recentFilterId = this.type['_value'].id\n    if (this.recentFilterId) {\n      this.pageType = 'Edit'\n    }\n  }\n  ngOnInit() {\n    this.getTicketStatusList();\n  }\n  getTicketStatusList() {\n    // Not used after removing role fromm filter\n\n    this.crud.get(`admin/ticket/status/count`).subscribe((res: any) => {\n      if (res) {\n        this.ticketStatus = res.count_by_category;\n        this.ticketStatus = this.sort(this.ticketStatus, 'ticket_status')\n        this.ticketStatus.forEach((element: any, index: any) => {\n          this.ticketStatus[index]['is_active'] = false;\n        });\n      }\n    })\n    this.crud.getRequest(`${requestUrl.getAdminRolesAndPermission}`).then((res: any) => {\n      if (res) {\n        this.roleList = res.data.results;\n        this.sort(this.roleList, 'name');\n        if (this.recentFilterId) {\n          this.getFilterGroup()\n        }\n      }\n    });\n\n  }\n\n  getFilterGroup() {\n    this.crud.get(`admin/ticket/group?filter_id=${this.recentFilterId}`).subscribe((res: any) => {\n      if (res) {\n        console.log(res, 'res');\n        this.ticketStatus = res?.data?.filter;\n        this.ticketStatus = this.sort(this.ticketStatus, 'ticket_status')\n        this.role = res?.data?.role_id;\n        this.title = res?.data?.title;\n      }\n    })\n  }\n\n  sort(array: any, key: any) {\n    return array.sort((a: any, b: any) => {\n      var nameA = a[key].toUpperCase();\n      var nameB = b[key].toUpperCase();\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  onChangeTicketStatus(index: any) {\n    this.ticketStatus[index]['is_active'] = !this.ticketStatus[index]['is_active'];\n  }\n  saveTicketFilter() {\n    var falseCount = 0;\n    this.ticketStatus.forEach((element: any) => {\n      if (element.is_active == false) {\n        falseCount = falseCount + 1;\n      }\n    });\n    if (this.title) {\n      if (falseCount != this.ticketStatus.length) {\n        if (this.recentFilterId) {\n          this.editFilter();\n        }\n        else {\n          let body = {\n            \"title\": this.title,\n            // \"role_id\": this.role,\n            \"filter\": this.ticketStatus\n          }\n          console.log(body, 'body payload');\n          this.crud.postRequest('admin/ticket/group', body).then((res: any) => {\n            if (res) {\n              this.toastr.success(res.message);\n              this.resetFilter();\n            }\n          });\n        }\n      }\n      else {\n        this.toastr.error('Please select atleast one status.');\n      }\n    } else {\n      this.toastr.error(\"Please fill all the fields.\")\n    }\n  }\n  editFilter() {\n    let body = {\n      \"id\": this.recentFilterId,\n      \"title\": this.title,\n\n      // Not used after removing role fromm filter\n      // \"role_id\": this.role,\n      \"filter\": this.ticketStatus\n    }\n    \n    this.crud.putRequest('admin/ticket/group', body).then((res: any) => {\n      if (res) {\n        this.toastr.success(res.message);\n      }\n    });\n  }\n  resetFilter() {\n    this.title = '';\n    this.role = '';\n    this.ticketStatus.forEach((element: any, index: any) => {\n      this.ticketStatus[index]['is_active'] = false;\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TicketRoutingModule } from './ticket-routing.module';\nimport { TicketComponent } from './ticket.component';\nimport { TicketListComponent } from './ticket-list/ticket-list.component';\nimport { EditTicketComponent } from './edit-ticket/edit-ticket.component';\nimport { ViewTicketComponent } from './view-ticket/view-ticket.component';\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport { AdminRequestFileComponent } from './admin-request-file/admin-request-file.component';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { NgxDaterangepickerBootstrapModule } from 'ngx-daterangepicker-bootstrap';\nimport { GroupTicketFilterComponent } from './group-ticket-filter/group-ticket-filter.component';\nimport { CKEditorModule } from 'ckeditor4-angular';\nimport { DirectiveModuleModule } from 'src/app/directives/directive-module/directive-module.module';\nimport { SharedComponentsModule } from \"../../shared-components/shared-components.module\";\nimport { SharedPipeModule } from 'src/app/pipe/shared-pipe.module';\nimport { NgHttpLoaderModule } from 'ng-http-loader';\n@NgModule({\n  declarations: [\n    TicketComponent,\n    TicketListComponent,\n    EditTicketComponent,\n    ViewTicketComponent,\n    AdminRequestFileComponent,\n    GroupTicketFilterComponent,\n  ],\n  imports: [\n    CommonModule,\n    InfiniteScrollModule,\n    TicketRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatChipsModule,\n    MatFormFieldModule,\n    MatIconModule,\n    MatInputModule,\n    MatAutocompleteModule,\n    NgxPaginationModule,\n    NgSelectModule,\n    NgxDaterangepickerBootstrapModule.forRoot(),\n    CKEditorModule,\n    DirectiveModuleModule,\n    SharedComponentsModule,\n    SharedPipeModule,\n    NgHttpLoaderModule.forRoot(),\n],\n})\nexport class TicketModule {}\n"],"x_google_ignoreList":[]}